"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8201],{7879:function(e,t,r){var a=r(85893),i=r(67294),n=r(77527),o=r(40492);let l=(0,n.ZP)(o.Z)(e=>{let{theme:t}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),s=(0,i.forwardRef)((e,t)=>{let{size:r="small",InputLabelProps:i,...n}=e;return(0,a.jsx)(l,{size:r,inputRef:t,...n,variant:"filled",InputLabelProps:{...i,shrink:!0}})});t.Z=s},74538:function(e,t){let r=e=>Array.isArray(e)?e[0]:null==e?"":String(e);t.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:e=>"/company-profile/".concat(r(e)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:e=>"/district/".concat(r(e)),region:"/region/",regionById:e=>"/region/".concat(r(e)),countryById:e=>"/country/".concat(r(e)),countryFields:"/country/fields/",command:"/command/",commandById:e=>"/command/".concat(r(e)),industries:"/industry",industryById:e=>"/industry/".concat(r(e)),industryFields:"/industry/fields",users:"/user",userById:e=>"/user/".concat(r(e)),equipmentCategories:"/equipment-category",equipmentCategoryById:e=>"/equipment-category/".concat(r(e)),services:"/service",serviceById:e=>"/service/".concat(r(e)),partners:"/partner",partnerById:e=>"/partner/".concat(r(e)),company:"/company/",companyById:e=>"/company/".concat(r(e)),replyLetter:"/reply-letter/",replyLetterById:e=>"/reply-letter/".concat(r(e)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:e=>"/reply-letter-file/".concat(r(e)),documents:"/documents/",documentById:e=>"/documents/".concat(r(e)),documentForm:"/document-form/",documentFormById:e=>"/document-form/".concat(r(e)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:e=>"/list-of-magazine/".concat(r(e)),department:"/department/",departmentById:e=>"/department/".concat(r(e)),position:"/position/",positionById:e=>"/position/".concat(r(e)),projects:"/project",projectById:e=>"/project/".concat(r(e)),projectDeliverables:"/project-deliverable",projectDeliverableById:e=>"/project-deliverable/".concat(r(e)),projectImages:"/project-image",projectImageById:e=>"/project-image/".concat(r(e)),stats:"/stats",statById:e=>"/stats/".concat(r(e)),faqs:"/faq",faqById:e=>"/faq/".concat(r(e)),inquiries:"/inquiry",inquiryById:e=>"/inquiry/".concat(r(e)),downloads:"/command-file/",downloadById:e=>"/command-file/".concat(r(e)),news:"/news-post",newsById:e=>"/news-post/".concat(r(e)),testimonials:"/testimonial",testimonialById:e=>"/testimonial/".concat(r(e)),ourWork:"/our-work",ourWorkById:e=>"/our-work/".concat(r(e)),applicationApprovedByID:e=>"/application-approved/".concat(r(e)),limitData:"/limit-data"}},28201:function(e,t,r){var a=r(85893),i=r(67294),n=r(87536),o=r(11163),l=r(60762),s=r(34375),c=r(71919),d=r(68573),p=r(15972),u=r(84166),m=r(73907),y=r(52857),x=r(4952),h=r(7879),f=r(52293),g=r(74538),j=r(86501),I=r(34273),b=r(75673);let Z={company:0,letter_number:"",responsible_person:0,basis:"",comment:""};t.Z=()=>{let e=(0,o.useRouter)(),{id:t}=e.query,r=t?"edit":"create",B=t?Number(t):null,{user:M}=(0,I.a)(),{control:v,handleSubmit:S,reset:w,formState:{isSubmitting:k,errors:C}}=(0,n.cI)({defaultValues:Z}),[P,q]=(0,i.useState)([]),[z,L]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=(await f.Do.get(g.Z.company+"?perPage=200")).data;q(e.results||e||[])}catch(e){}try{let e=(await f.Do.get(g.Z.users+"?perPage=200")).data;L(e.results||e||[])}catch(e){}})()},[]),(0,i.useEffect)(()=>{(async()=>{"edit"===r&&B?w((await f.Do.get(g.Z.replyLetterById(B))).data):w(Z)})()},[r,B,w]);let F=async t=>{try{let a={...t};if("create"===r){console.log(g.Z.replyLetter);let t=await f.Do.post(g.Z.replyLetter,a);j.ZP.success("Javob xati yaratildi"),e.push("/reply-letter/".concat(t.data.id))}else"edit"===r&&B&&(await f.Do.put(g.Z.replyLetterById(B),a),j.ZP.success("Saqlandi"))}catch(e){console.error(e),j.ZP.error("Saqlashda xato")}},[A,D]=(0,i.useState)([]),[_,T]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if("edit"===r&&B)try{let e=(await f.Do.get(g.Z.replyLetterFile+"?reply_letter=".concat(B))).data,t=(e.results||e||[]).map(e=>({title:e.title,file:null}));D(t)}catch(e){console.error(e)}})()},[r,B]);let W=e=>D(t=>t.filter((t,r)=>r!==e)),E=(e,t)=>D(r=>r.map((r,a)=>a===e?{...r,title:t}:r)),R=(e,t)=>D(r=>r.map((r,a)=>a===e?{...r,file:t}:r)),Q=async()=>{if(!B)return;let e=A.filter(e=>e.file&&e.title.trim().length);if(!e.length)return j.ZP.error("Fayl va title kiriting");try{for(let t of(T(!0),e)){let e=new FormData;e.append("reply_letter",String(B)),e.append("title",t.title),t.file&&e.append("file",t.file),await f.Do.postForm(g.Z.replyLetterFile,e)}j.ZP.success("Fayllar muvaffaqiyatli yuklandi"),D([]);let t=(await f.Do.get(g.Z.replyLetterFile+"?reply_letter=".concat(B))).data,r=(t.results||t||[]).map(e=>({title:e.title,file:null}));D(r)}catch(e){console.error(e),j.ZP.error("Yuklashda xato yuz berdi")}finally{T(!1)}};return(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(s.Z,{title:"create"===r?"Yangi javob xati":"Javob xatini tahrirlash"}),(0,a.jsxs)("form",{onSubmit:S(F),children:[(0,a.jsx)(c.Z,{children:(0,a.jsxs)(d.ZP,{container:!0,spacing:4,children:[(0,a.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.Qr,{name:"company",control:v,render:e=>{let{field:t}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Tashkilot",...t,children:[(0,a.jsx)(p.Z,{value:0,children:"Tanlanmagan"}),P.map(e=>(0,a.jsx)(p.Z,{value:e.id,children:e.name},e.id))]})}})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.Qr,{name:"letter_number",control:v,render:e=>{let{field:t}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Hujojat raqami",...t})}})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.Qr,{name:"responsible_person",control:v,render:e=>{let{field:t}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Mas'ul shaxs",...t,children:[(0,a.jsx)(p.Z,{value:0,children:"Tanlanmagan"}),z.map(e=>(0,a.jsx)(p.Z,{value:e.id,children:e.fullname||e.username},e.id))]})}})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,children:(0,a.jsx)(n.Qr,{name:"basis",control:v,render:e=>{let{field:t}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Asos",...t})}})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,children:(0,a.jsx)(n.Qr,{name:"comment",control:v,render:e=>{let{field:t}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Izoh",...t,multiline:!0,rows:4})}})})]})}),"edit"===r?(0,a.jsx)(c.Z,{children:(0,a.jsxs)(l.Z,{variant:"outlined",children:[(0,a.jsx)(s.Z,{title:"Fayllar ",subheader:"Title kiriting va faylni biriktiring. Bir nechta qator qo‘shish mumkin."}),(0,a.jsx)(c.Z,{children:(0,a.jsxs)(u.Z,{spacing:3,children:[A.map((e,t)=>(0,a.jsx)(l.Z,{variant:"outlined",children:(0,a.jsx)(c.Z,{children:(0,a.jsxs)(d.ZP,{container:!0,spacing:3,alignItems:"end",children:[(0,a.jsx)(d.ZP,{item:!0,xs:12,md:5,children:(0,a.jsx)(h.Z,{fullWidth:!0,label:"Title",value:e.title,onChange:e=>E(t,e.target.value)})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,md:5,children:(0,a.jsxs)(u.Z,{direction:"row",spacing:2,alignItems:"end",children:[(0,a.jsxs)(m.Z,{variant:"outlined",component:"label",startIcon:(0,a.jsx)(b.Z,{icon:"tabler:paperclip"}),children:["Fayl biriktirish",(0,a.jsx)("input",{hidden:!0,type:"file",onChange:e=>{var r;return R(t,(null===(r=e.target.files)||void 0===r?void 0:r[0])||null)}})]}),(0,a.jsx)("span",{style:{color:"rgba(0,0,0,0.6)"},children:e.file?e.file.name:"Fayl tanlanmagan"})]})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,md:2,sx:{textAlign:"right"},children:(0,a.jsx)(y.Z,{"aria-label":"remove",color:"error",onClick:()=>W(t),children:(0,a.jsx)(b.Z,{icon:"tabler:trash"})})})]})})},t)),(0,a.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,a.jsx)(m.Z,{variant:"contained",color:"primary",onClick:()=>D(e=>[...e,{title:"",file:null}]),children:"Qator qo‘shish"}),(0,a.jsx)(m.Z,{variant:"outlined",color:"success",onClick:Q,disabled:_,children:_?"Yuklanmoqda…":"Yuklash"})]})]})})]})}):null,(0,a.jsx)(x.Z,{children:(0,a.jsxs)(u.Z,{direction:"row",spacing:2,sx:{p:2},children:[(0,a.jsx)(m.Z,{type:"submit",variant:"contained",disabled:k,children:"Saqlash"}),(0,a.jsx)(m.Z,{variant:"tonal",onClick:()=>e.push("/reply-letter"),children:"Bekor qilish"})]})})]})]})}}}]);
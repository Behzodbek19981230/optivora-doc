"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8201],{7879:function(t,e,r){var n=r(85893),a=r(67294),o=r(77527),i=r(40492);let l=(0,o.ZP)(i.Z)(t=>{let{theme:e}=t;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:e.spacing(1),fontSize:e.typography.body2.fontSize,color:"".concat(e.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(e.palette.customColors.main,", 0.2)"),transition:e.transitions.create(["border-color","box-shadow"],{duration:e.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(e.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:e.palette.error.main},"&.Mui-focused":{boxShadow:e.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:e.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:e.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:e.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:e.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:e.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:e.palette.error.main},"&.Mui-error":{borderColor:e.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(e.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:e.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:e.spacing(1,0,0),color:e.palette.text.secondary,fontSize:e.typography.body2.fontSize,"&.Mui-error":{color:e.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),s=(0,a.forwardRef)((t,e)=>{let{size:r="small",InputLabelProps:a,...o}=t;return(0,n.jsx)(l,{size:r,inputRef:e,...o,variant:"filled",InputLabelProps:{...a,shrink:!0}})});e.Z=s},74538:function(t,e){let r=t=>Array.isArray(t)?t[0]:null==t?"":String(t);e.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:t=>"/company-profile/".concat(r(t)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:t=>"/district/".concat(r(t)),region:"/region/",regionById:t=>"/region/".concat(r(t)),countryById:t=>"/country/".concat(r(t)),countryFields:"/country/fields/",command:"/command/",commandById:t=>"/command/".concat(r(t)),industries:"/industry",industryById:t=>"/industry/".concat(r(t)),industryFields:"/industry/fields",users:"/user",userById:t=>"/user/".concat(r(t)),equipmentCategories:"/equipment-category",equipmentCategoryById:t=>"/equipment-category/".concat(r(t)),services:"/service",serviceById:t=>"/service/".concat(r(t)),partners:"/partner",partnerById:t=>"/partner/".concat(r(t)),company:"/company/",companyById:t=>"/company/".concat(r(t)),replyLetter:"/reply-letter/",replyLetterById:t=>"/reply-letter/".concat(r(t)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:t=>"/reply-letter-file/".concat(r(t)),documents:"/documents/",documentById:t=>"/documents/".concat(r(t)),documentForm:"/document-form/",documentFormById:t=>"/document-form/".concat(r(t)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:t=>"/list-of-magazine/".concat(r(t)),task:"/task/",taskById:t=>"/task/".concat(r(t)),taskPart:"/task-part/",taskPartById:t=>"/task-part/".concat(r(t)),taskEvent:"/task-event/",taskEventById:t=>"/task-event/".concat(r(t)),taskComment:"/task-comment/",taskCommentById:t=>"/task-comment/".concat(r(t)),taskAttachment:"/task-attachment/",taskAttachmentById:t=>"/task-attachment/".concat(r(t)),department:"/department/",departmentById:t=>"/department/".concat(r(t)),position:"/position/",positionById:t=>"/position/".concat(r(t)),projects:"/project",projectById:t=>"/project/".concat(r(t)),projectDeliverables:"/project-deliverable",projectDeliverableById:t=>"/project-deliverable/".concat(r(t)),projectImages:"/project-image",projectImageById:t=>"/project-image/".concat(r(t)),stats:"/stats",statById:t=>"/stats/".concat(r(t)),faqs:"/faq",faqById:t=>"/faq/".concat(r(t)),inquiries:"/inquiry",inquiryById:t=>"/inquiry/".concat(r(t)),downloads:"/command-file/",downloadById:t=>"/command-file/".concat(r(t)),news:"/news-post",newsById:t=>"/news-post/".concat(r(t)),testimonials:"/testimonial",testimonialById:t=>"/testimonial/".concat(r(t)),ourWork:"/our-work",ourWorkById:t=>"/our-work/".concat(r(t)),applicationApprovedByID:t=>"/application-approved/".concat(r(t)),limitData:"/limit-data"}},28201:function(t,e,r){var n=r(85893),a=r(67294),o=r(87536),i=r(11163),l=r(60762),s=r(34375),c=r(71919),p=r(68573),d=r(15972),u=r(84166),m=r(73907),y=r(52857),g=r(4952),f=r(7879),h=r(52293),x=r(74538),I=r(86501),j=r(34273),B=r(75673),Z=r(22120);let b={company:0,letter_number:"",responsible_person:0,basis:"",comment:""};e.Z=()=>{let t=(0,i.useRouter)(),{t:e}=(0,Z.$G)(),{id:r}=t.query,S=r?"edit":"create",v=r?Number(r):null,{user:M}=(0,j.a)(),{control:L,handleSubmit:k,reset:w,formState:{isSubmitting:P,errors:C}}=(0,o.cI)({defaultValues:b}),[z,A]=(0,a.useState)([]),[F,q]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{let t=(await h.Do.get(x.Z.company+"?perPage=200")).data;A(t.results||t||[])}catch(t){}try{let t=(await h.Do.get(x.Z.users+"?perPage=200")).data;q(t.results||t||[])}catch(t){}})()},[]),(0,a.useEffect)(()=>{(async()=>{"edit"===S&&v?w((await h.Do.get(x.Z.replyLetterById(v))).data):w(b)})()},[S,v,w]);let D=async r=>{try{let n={...r};if("create"===S){console.log(x.Z.replyLetter);let r=await h.Do.post(x.Z.replyLetter,n);I.ZP.success(String(e("replyLetter.toast.created"))),t.push("/reply-letter/".concat(r.data.id))}else"edit"===S&&v&&(await h.Do.put(x.Z.replyLetterById(v),n),I.ZP.success(String(e("replyLetter.toast.saved"))))}catch(t){console.error(t),I.ZP.error(String(e("replyLetter.toast.saveError")))}},[_,E]=(0,a.useState)([]),[R,W]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if("edit"===S&&v)try{let t=(await h.Do.get(x.Z.replyLetterFile+"?reply_letter=".concat(v))).data,e=(t.results||t||[]).map(t=>({title:t.title,file:null}));E(e)}catch(t){console.error(t)}})()},[S,v]);let T=t=>E(e=>e.filter((e,r)=>r!==t)),N=(t,e)=>E(r=>r.map((r,n)=>n===t?{...r,title:e}:r)),Q=(t,e)=>E(r=>r.map((r,n)=>n===t?{...r,file:e}:r)),O=async()=>{if(!v)return;let t=_.filter(t=>t.file&&t.title.trim().length);if(!t.length)return I.ZP.error(String(e("replyLetter.attachments.validation.fileAndTitleRequired")));try{for(let e of(W(!0),t)){let t=new FormData;t.append("reply_letter",String(v)),t.append("title",e.title),e.file&&t.append("file",e.file),await h.Do.postForm(x.Z.replyLetterFile,t)}I.ZP.success(String(e("replyLetter.attachments.toast.uploaded"))),E([]);let r=(await h.Do.get(x.Z.replyLetterFile+"?reply_letter=".concat(v))).data,n=(r.results||r||[]).map(t=>({title:t.title,file:null}));E(n)}catch(t){console.error(t),I.ZP.error(String(e("replyLetter.attachments.toast.uploadError")))}finally{W(!1)}};return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(s.Z,{title:"create"===S?String(e("replyLetter.create.title")):String(e("replyLetter.edit.title"))}),(0,n.jsxs)("form",{onSubmit:k(D),children:[(0,n.jsx)(c.Z,{children:(0,n.jsxs)(p.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(o.Qr,{name:"company",control:L,render:t=>{let{field:r}=t;return(0,n.jsxs)(f.Z,{select:!0,fullWidth:!0,label:String(e("replyLetter.form.company")),...r,children:[(0,n.jsx)(d.Z,{value:0,children:String(e("common.selectPlaceholder"))}),z.map(t=>(0,n.jsx)(d.Z,{value:t.id,children:t.name},t.id))]})}})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(o.Qr,{name:"letter_number",control:L,render:t=>{let{field:r}=t;return(0,n.jsx)(f.Z,{fullWidth:!0,label:String(e("replyLetter.form.letterNumber")),...r})}})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(o.Qr,{name:"responsible_person",control:L,render:t=>{let{field:r}=t;return(0,n.jsxs)(f.Z,{select:!0,fullWidth:!0,label:String(e("replyLetter.form.responsiblePerson")),...r,children:[(0,n.jsx)(d.Z,{value:0,children:String(e("common.selectPlaceholder"))}),F.map(t=>(0,n.jsx)(d.Z,{value:t.id,children:t.fullname||t.username},t.id))]})}})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Qr,{name:"basis",control:L,render:t=>{let{field:r}=t;return(0,n.jsx)(f.Z,{fullWidth:!0,label:String(e("replyLetter.form.basis")),...r})}})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Qr,{name:"comment",control:L,render:t=>{let{field:r}=t;return(0,n.jsx)(f.Z,{fullWidth:!0,label:String(e("replyLetter.form.comment")),...r,multiline:!0,rows:4})}})})]})}),"edit"===S?(0,n.jsx)(c.Z,{children:(0,n.jsxs)(l.Z,{variant:"outlined",children:[(0,n.jsx)(s.Z,{title:String(e("replyLetter.attachments.title")),subheader:String(e("replyLetter.attachments.subtitle"))}),(0,n.jsx)(c.Z,{children:(0,n.jsxs)(u.Z,{spacing:3,children:[_.map((t,r)=>(0,n.jsx)(l.Z,{variant:"outlined",children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)(p.ZP,{container:!0,spacing:3,alignItems:"end",children:[(0,n.jsx)(p.ZP,{item:!0,xs:12,md:5,children:(0,n.jsx)(f.Z,{fullWidth:!0,label:String(e("replyLetter.attachments.form.title")),value:t.title,onChange:t=>N(r,t.target.value)})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,md:5,children:(0,n.jsxs)(u.Z,{direction:"row",spacing:2,alignItems:"end",children:[(0,n.jsxs)(m.Z,{variant:"outlined",component:"label",startIcon:(0,n.jsx)(B.Z,{icon:"tabler:paperclip"}),children:[String(e("replyLetter.attachments.form.attachFile")),(0,n.jsx)("input",{hidden:!0,type:"file",onChange:t=>{var e;return Q(r,(null===(e=t.target.files)||void 0===e?void 0:e[0])||null)}})]}),(0,n.jsx)("span",{style:{color:"rgba(0,0,0,0.6)"},children:t.file?t.file.name:String(e("replyLetter.attachments.form.noFileSelected"))})]})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,md:2,sx:{textAlign:"right"},children:(0,n.jsx)(y.Z,{"aria-label":"remove",color:"error",onClick:()=>T(r),children:(0,n.jsx)(B.Z,{icon:"tabler:trash"})})})]})})},r)),(0,n.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,n.jsx)(m.Z,{variant:"contained",color:"primary",onClick:()=>E(t=>[...t,{title:"",file:null}]),children:String(e("replyLetter.attachments.addRow"))}),(0,n.jsx)(m.Z,{variant:"outlined",color:"success",onClick:O,disabled:R,children:R?String(e("common.loading")):String(e("replyLetter.attachments.upload"))})]})]})})]})}):null,(0,n.jsx)(g.Z,{children:(0,n.jsxs)(u.Z,{direction:"row",spacing:2,sx:{p:2},children:[(0,n.jsx)(m.Z,{type:"submit",variant:"contained",disabled:P,children:P?String(e("common.saving")):String(e("common.save"))}),(0,n.jsx)(m.Z,{variant:"tonal",onClick:()=>t.push("/reply-letter"),children:String(e("common.cancel"))})]})})]})]})}}}]);
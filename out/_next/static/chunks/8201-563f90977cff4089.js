"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8201],{7879:function(t,e,a){var r=a(85893),n=a(67294),i=a(77527),o=a(40492);let l=(0,i.ZP)(o.Z)(t=>{let{theme:e}=t;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:e.spacing(1),fontSize:e.typography.body2.fontSize,color:"".concat(e.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(e.palette.customColors.main,", 0.2)"),transition:e.transitions.create(["border-color","box-shadow"],{duration:e.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(e.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:e.palette.error.main},"&.Mui-focused":{boxShadow:e.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:e.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:e.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:e.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:e.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:e.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:e.palette.error.main},"&.Mui-error":{borderColor:e.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(e.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:e.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:e.spacing(1,0,0),color:e.palette.text.secondary,fontSize:e.typography.body2.fontSize,"&.Mui-error":{color:e.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),s=(0,n.forwardRef)((t,e)=>{let{size:a="small",InputLabelProps:n,...i}=t;return(0,r.jsx)(l,{size:a,inputRef:e,...i,variant:"filled",InputLabelProps:{...n,shrink:!0}})});e.Z=s},74538:function(t,e){let a=t=>Array.isArray(t)?t[0]:null==t?"":String(t);e.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:t=>"/company-profile/".concat(a(t)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:t=>"/district/".concat(a(t)),region:"/region/",regionById:t=>"/region/".concat(a(t)),countryById:t=>"/country/".concat(a(t)),countryFields:"/country/fields/",command:"/command/",commandById:t=>"/command/".concat(a(t)),industries:"/industry",industryById:t=>"/industry/".concat(a(t)),industryFields:"/industry/fields",users:"/user",userById:t=>"/user/".concat(a(t)),equipmentCategories:"/equipment-category",equipmentCategoryById:t=>"/equipment-category/".concat(a(t)),services:"/service",serviceById:t=>"/service/".concat(a(t)),partners:"/partner",partnerById:t=>"/partner/".concat(a(t)),company:"/company/",companyById:t=>"/company/".concat(a(t)),replyLetter:"/reply-letter/",replyLetterById:t=>"/reply-letter/".concat(a(t)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:t=>"/reply-letter-file/".concat(a(t)),documents:"/documents/",documentById:t=>"/documents/".concat(a(t)),documentForm:"/document-form/",documentFormById:t=>"/document-form/".concat(a(t)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:t=>"/list-of-magazine/".concat(a(t)),task:"/task/",taskById:t=>"/task/".concat(a(t)),taskPart:"/task-part/",taskPartById:t=>"/task-part/".concat(a(t)),taskEvent:"/task-event/",taskEventById:t=>"/task-event/".concat(a(t)),taskComment:"/task-comment/",taskCommentById:t=>"/task-comment/".concat(a(t)),taskAttachment:"/task-attachment/",taskAttachmentById:t=>"/task-attachment/".concat(a(t)),department:"/department/",departmentById:t=>"/department/".concat(a(t)),position:"/position/",positionById:t=>"/position/".concat(a(t)),projects:"/project",projectById:t=>"/project/".concat(a(t)),projectDeliverables:"/project-deliverable",projectDeliverableById:t=>"/project-deliverable/".concat(a(t)),projectImages:"/project-image",projectImageById:t=>"/project-image/".concat(a(t)),stats:"/stats",statById:t=>"/stats/".concat(a(t)),faqs:"/faq",faqById:t=>"/faq/".concat(a(t)),inquiries:"/inquiry",inquiryById:t=>"/inquiry/".concat(a(t)),downloads:"/command-file/",downloadById:t=>"/command-file/".concat(a(t)),news:"/news-post",newsById:t=>"/news-post/".concat(a(t)),testimonials:"/testimonial",testimonialById:t=>"/testimonial/".concat(a(t)),ourWork:"/our-work",ourWorkById:t=>"/our-work/".concat(a(t)),applicationApprovedByID:t=>"/application-approved/".concat(a(t)),limitData:"/limit-data"}},28201:function(t,e,a){var r=a(85893),n=a(67294),i=a(87536),o=a(11163),l=a(60762),s=a(34375),c=a(71919),d=a(68573),p=a(15972),u=a(84166),m=a(73907),y=a(52857),h=a(4952),x=a(7879),f=a(52293),g=a(74538),I=a(86501),j=a(34273),B=a(75673);let b={company:0,letter_number:"",responsible_person:0,basis:"",comment:""};e.Z=()=>{let t=(0,o.useRouter)(),{id:e}=t.query,a=e?"edit":"create",Z=e?Number(e):null,{user:k}=(0,j.a)(),{control:v,handleSubmit:M,reset:S,formState:{isSubmitting:w,errors:C}}=(0,i.cI)({defaultValues:b}),[P,q]=(0,n.useState)([]),[z,L]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let t=(await f.Do.get(g.Z.company+"?perPage=200")).data;q(t.results||t||[])}catch(t){}try{let t=(await f.Do.get(g.Z.users+"?perPage=200")).data;L(t.results||t||[])}catch(t){}})()},[]),(0,n.useEffect)(()=>{(async()=>{"edit"===a&&Z?S((await f.Do.get(g.Z.replyLetterById(Z))).data):S(b)})()},[a,Z,S]);let F=async e=>{try{let r={...e};if("create"===a){console.log(g.Z.replyLetter);let e=await f.Do.post(g.Z.replyLetter,r);I.ZP.success("Javob xati yaratildi"),t.push("/reply-letter/".concat(e.data.id))}else"edit"===a&&Z&&(await f.Do.put(g.Z.replyLetterById(Z),r),I.ZP.success("Saqlandi"))}catch(t){console.error(t),I.ZP.error("Saqlashda xato")}},[A,D]=(0,n.useState)([]),[_,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if("edit"===a&&Z)try{let t=(await f.Do.get(g.Z.replyLetterFile+"?reply_letter=".concat(Z))).data,e=(t.results||t||[]).map(t=>({title:t.title,file:null}));D(e)}catch(t){console.error(t)}})()},[a,Z]);let E=t=>D(e=>e.filter((e,a)=>a!==t)),W=(t,e)=>D(a=>a.map((a,r)=>r===t?{...a,title:e}:a)),R=(t,e)=>D(a=>a.map((a,r)=>r===t?{...a,file:e}:a)),Q=async()=>{if(!Z)return;let t=A.filter(t=>t.file&&t.title.trim().length);if(!t.length)return I.ZP.error("Fayl va title kiriting");try{for(let e of(T(!0),t)){let t=new FormData;t.append("reply_letter",String(Z)),t.append("title",e.title),e.file&&t.append("file",e.file),await f.Do.postForm(g.Z.replyLetterFile,t)}I.ZP.success("Fayllar muvaffaqiyatli yuklandi"),D([]);let e=(await f.Do.get(g.Z.replyLetterFile+"?reply_letter=".concat(Z))).data,a=(e.results||e||[]).map(t=>({title:t.title,file:null}));D(a)}catch(t){console.error(t),I.ZP.error("Yuklashda xato yuz berdi")}finally{T(!1)}};return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(s.Z,{title:"create"===a?"Yangi javob xati":"Javob xatini tahrirlash"}),(0,r.jsxs)("form",{onSubmit:M(F),children:[(0,r.jsx)(c.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(i.Qr,{name:"company",control:v,render:t=>{let{field:e}=t;return(0,r.jsxs)(x.Z,{select:!0,fullWidth:!0,label:"Tashkilot",...e,children:[(0,r.jsx)(p.Z,{value:0,children:"Tanlanmagan"}),P.map(t=>(0,r.jsx)(p.Z,{value:t.id,children:t.name},t.id))]})}})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(i.Qr,{name:"letter_number",control:v,render:t=>{let{field:e}=t;return(0,r.jsx)(x.Z,{fullWidth:!0,label:"Hujojat raqami",...e})}})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(i.Qr,{name:"responsible_person",control:v,render:t=>{let{field:e}=t;return(0,r.jsxs)(x.Z,{select:!0,fullWidth:!0,label:"Mas'ul shaxs",...e,children:[(0,r.jsx)(p.Z,{value:0,children:"Tanlanmagan"}),z.map(t=>(0,r.jsx)(p.Z,{value:t.id,children:t.fullname||t.username},t.id))]})}})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(i.Qr,{name:"basis",control:v,render:t=>{let{field:e}=t;return(0,r.jsx)(x.Z,{fullWidth:!0,label:"Asos",...e})}})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(i.Qr,{name:"comment",control:v,render:t=>{let{field:e}=t;return(0,r.jsx)(x.Z,{fullWidth:!0,label:"Izoh",...e,multiline:!0,rows:4})}})})]})}),"edit"===a?(0,r.jsx)(c.Z,{children:(0,r.jsxs)(l.Z,{variant:"outlined",children:[(0,r.jsx)(s.Z,{title:"Fayllar ",subheader:"Title kiriting va faylni biriktiring. Bir nechta qator qo‘shish mumkin."}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)(u.Z,{spacing:3,children:[A.map((t,e)=>(0,r.jsx)(l.Z,{variant:"outlined",children:(0,r.jsx)(c.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,spacing:3,alignItems:"end",children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:5,children:(0,r.jsx)(x.Z,{fullWidth:!0,label:"Title",value:t.title,onChange:t=>W(e,t.target.value)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:5,children:(0,r.jsxs)(u.Z,{direction:"row",spacing:2,alignItems:"end",children:[(0,r.jsxs)(m.Z,{variant:"outlined",component:"label",startIcon:(0,r.jsx)(B.Z,{icon:"tabler:paperclip"}),children:["Fayl biriktirish",(0,r.jsx)("input",{hidden:!0,type:"file",onChange:t=>{var a;return R(e,(null===(a=t.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,r.jsx)("span",{style:{color:"rgba(0,0,0,0.6)"},children:t.file?t.file.name:"Fayl tanlanmagan"})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:2,sx:{textAlign:"right"},children:(0,r.jsx)(y.Z,{"aria-label":"remove",color:"error",onClick:()=>E(e),children:(0,r.jsx)(B.Z,{icon:"tabler:trash"})})})]})})},e)),(0,r.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(m.Z,{variant:"contained",color:"primary",onClick:()=>D(t=>[...t,{title:"",file:null}]),children:"Qator qo‘shish"}),(0,r.jsx)(m.Z,{variant:"outlined",color:"success",onClick:Q,disabled:_,children:_?"Yuklanmoqda…":"Yuklash"})]})]})})]})}):null,(0,r.jsx)(h.Z,{children:(0,r.jsxs)(u.Z,{direction:"row",spacing:2,sx:{p:2},children:[(0,r.jsx)(m.Z,{type:"submit",variant:"contained",disabled:w,children:"Saqlash"}),(0,r.jsx)(m.Z,{variant:"tonal",onClick:()=>t.push("/reply-letter"),children:"Bekor qilish"})]})})]})]})}}}]);
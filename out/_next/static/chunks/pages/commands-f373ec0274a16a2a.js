(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9941],{51128:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/commands",function(){return a(75406)}])},34375:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var n=a(63366),r=a(87462),o=a(67294),i=a(86010),l=a(94780),d=a(96788),s=a(29567),c=a(77527),m=a(1588),u=a(34867);function h(e){return(0,u.Z)("MuiCardHeader",e)}let g=(0,m.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var v=a(85893);let f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],p=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},h,t)},x=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,r.Z)({["& .".concat(g.title)]:t.title,["& .".concat(g.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var w=o.forwardRef(function(e,t){let a=(0,s.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:l,className:c,component:m="div",disableTypography:u=!1,subheader:h,subheaderTypographyProps:g,title:w,titleTypographyProps:S}=a,j=(0,n.Z)(a,f),C=(0,r.Z)({},a,{component:m,disableTypography:u}),_=p(C),N=w;null==N||N.type===d.Z||u||(N=(0,v.jsx)(d.Z,(0,r.Z)({variant:l?"body2":"h5",className:_.title,component:"span",display:"block"},S,{children:N})));let P=h;return null==P||P.type===d.Z||u||(P=(0,v.jsx)(d.Z,(0,r.Z)({variant:l?"body2":"body1",className:_.subheader,color:"text.secondary",component:"span",display:"block"},g,{children:P}))),(0,v.jsxs)(x,(0,r.Z)({className:(0,i.Z)(_.root,c),as:m,ref:t,ownerState:C},j,{children:[l&&(0,v.jsx)(b,{className:_.avatar,ownerState:C,children:l}),(0,v.jsxs)(y,{className:_.content,ownerState:C,children:[N,P]}),o&&(0,v.jsx)(Z,{className:_.action,ownerState:C,children:o})]}))})},82071:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});let n=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:t=>{let{from:a,to:n,count:r}=t;return"".concat(a,"â€“").concat(n," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==r?r:">".concat(n))}}})},33251:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var n=a(30202),r=a(33934),o=a(52293);let i=function(e){var t,a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],d=(0,n.NL)(),s=["list",e,i],c=Object.fromEntries(Object.entries(i).filter(e=>{let[,t]=e;return void 0!==t})),{data:m,isLoading:u,error:h}=(0,r.a)({queryKey:s,queryFn:async()=>{var t,a,n;let r=(await o.Do.get(e,c)).data,i=Array.isArray(r)?r:null!==(a=null==r?void 0:r.results)&&void 0!==a?a:[],l=Array.isArray(r)?i.length:null!==(n=null==r?void 0:null===(t=r.pagination)||void 0===t?void 0:t.total)&&void 0!==n?n:i.length;return{items:i,total:l}},enabled:l,staleTime:3e4});return{data:null!==(t=null==m?void 0:m.items)&&void 0!==t?t:[],total:null!==(a=null==m?void 0:m.total)&&void 0!==a?a:0,loading:u,error:h,mutate:()=>{d.invalidateQueries({queryKey:s})}}}},75406:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var n=a(85893),r=a(67294),o=a(52857),i=a(60762),l=a(34375),d=a(73907),s=a(16127),c=a(75673),m=a(74538),u=a(33251),h=a(52293),g=a(86501),v=a(33453),f=a(92365),p=a(40110),x=a(96727),b=a(96788),Z=a(22120),y=e=>{let{open:t,onClose:a,onConfirm:r,confirming:o,title:i,description:l}=e,{t:s}=(0,Z.$G)();return(0,n.jsxs)(v.Z,{open:t,onClose:o?void 0:a,fullWidth:!0,maxWidth:"xs",children:[(0,n.jsx)(f.Z,{children:i||String(s("common.deleteConfirmTitle"))}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(b.Z,{variant:"body2",children:l||String(s("common.deleteConfirmDescription"))})}),(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(d.Z,{variant:"tonal",color:"secondary",onClick:a,disabled:!!o,children:String(s("common.cancel"))}),(0,n.jsx)(d.Z,{color:"error",onClick:()=>r(),disabled:!!o,children:o?String(s("common.deleting")):String(s("common.delete"))})]})]})},w=a(11163),S=a(30381),j=a.n(S),C=a(82071),_=a(34273),N=()=>{var e;let t=(0,w.useRouter)(),{t:a}=(0,Z.$G)(),{user:v}=(0,_.a)(),[f,p]=(0,r.useState)({page:0,pageSize:10}),{data:x=[],loading:b,mutate:S,total:N}=(0,u.z)(m.Z.command,{page:f.page+1,limit:f.pageSize}),[P,R]=(0,r.useState)(null),[k,M]=(0,r.useState)(!1),H=e=>{t.push("/commands/".concat(e.id))},T=e=>{R(e),M(!0)},W=async()=>{P&&(await h.Do.delete(m.Z.commandById(P.id)),S(),M(!1),g.ZP.success(String(a("commands.toast.deleted"))))},z=[{field:"command_number",headerName:String(a("commands.table.number")),flex:.18,minWidth:160},{field:"basis",headerName:String(a("commands.table.basis")),flex:.3,minWidth:240},{field:"comment",headerName:String(a("commands.table.comment")),flex:.25,minWidth:200},{field:"company_detail",headerName:String(a("commands.table.company")),flex:.18,minWidth:160,valueGetter:e=>e.row.company_detail?e.row.company_detail.name:""},{field:"created_time",headerName:String(a("commands.table.createdAt")),flex:.2,minWidth:180,valueGetter:e=>e.row.created_time?j()(e.row.created_time).format("YYYY-MM-DD HH:mm"):""},{field:"actions",headerName:String(a("common.actions")),flex:.18,minWidth:160,sortable:!1,renderCell:e=>{var t;let a=e.row;return(0,n.jsx)(n.Fragment,{children:(null==v?void 0:null===(t=v.role_detail)||void 0===t?void 0:t.some(e=>"Performer"!==e.name))&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{size:"small","aria-label":"edit",onClick:()=>H(a),children:(0,n.jsx)(c.Z,{icon:"tabler:edit"})}),(0,n.jsx)(o.Z,{size:"small","aria-label":"delete",color:"error",onClick:()=>T(a),children:(0,n.jsx)(c.Z,{icon:"tabler:trash"})})]})})}}];return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(l.Z,{title:String(a("commands.title")),action:(null==v?void 0:null===(e=v.role_detail)||void 0===e?void 0:e.some(e=>"Performer"!==e.name))&&(0,n.jsx)(d.Z,{variant:"contained",onClick:()=>t.push("/commands/create"),children:String(a("commands.create.title"))})}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s._,{autoHeight:!0,rowHeight:56,rows:x,columns:z,loading:b,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:f,onPaginationModelChange:p,getRowId:e=>e.id,rowCount:N,localeText:(0,C.x)(a)})}),(0,n.jsx)(y,{open:k,onClose:()=>M(!1),onConfirm:W,title:String(a("commands.deleteConfirm.title")),description:P?"ID: ".concat(P.id):void 0})]})};let P=()=>(0,n.jsx)(N,{});P.acl={action:"read",subject:"cms"},P.authGuard=!0;var R=P}},function(e){e.O(0,[4885,2785,6127,2888,9774,179],function(){return e(e.s=51128)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3636],{66242:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var a=r(87462),o=r(63366),n=r(67294),i=r(86010),s=r(94780),l=r(90948),c=r(71657),d=r(90629),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var Z=r(85893);let v=["className","raised"],h=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)},f=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),x=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCard"}),{className:n,raised:s=!1}=r,l=(0,o.Z)(r,v),d=(0,a.Z)({},r,{raised:s}),u=h(d);return(0,Z.jsx)(f,(0,a.Z)({className:(0,i.Z)(u.root,n),elevation:s?8:void 0,ref:t,ownerState:d},l))});var g=x},44267:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var a=r(87462),o=r(63366),n=r(67294),i=r(86010),s=r(94780),l=r(90948),c=r(71657),d=r(1588),u=r(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var p=r(85893);let Z=["className","component"],v=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},m,t)},h=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),f=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:n,component:s="div"}=r,l=(0,o.Z)(r,Z),d=(0,a.Z)({},r,{component:s}),u=v(d);return(0,p.jsx)(h,(0,a.Z)({as:s,className:(0,i.Z)(u.root,n),ownerState:d,ref:t},l))});var x=f},78445:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var a=r(63366),o=r(87462),n=r(67294),i=r(86010),s=r(94780),l=r(15861),c=r(71657),d=r(90948),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiCardHeader",e)}let Z=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var v=r(85893);let h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)},x=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,o.Z)({[`& .${Z.title}`]:t.title,[`& .${Z.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),b=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:s,className:d,component:u="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:Z,title:b,titleTypographyProps:w}=r,C=(0,a.Z)(r,h),S=(0,o.Z)({},r,{component:u,disableTypography:m}),N=f(S),R=b;null==R||R.type===l.Z||m||(R=(0,v.jsx)(l.Z,(0,o.Z)({variant:s?"body2":"h5",className:N.title,component:"span",display:"block"},w,{children:R})));let k=p;return null==k||k.type===l.Z||m||(k=(0,v.jsx)(l.Z,(0,o.Z)({variant:s?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},Z,{children:k}))),(0,v.jsxs)(x,(0,o.Z)({className:(0,i.Z)(N.root,d),as:u,ref:t,ownerState:S},C,{children:[s&&(0,v.jsx)(g,{className:N.avatar,ownerState:S,children:s}),(0,v.jsxs)(j,{className:N.content,ownerState:S,children:[R,k]}),n&&(0,v.jsx)(y,{className:N.action,ownerState:S,children:n})]}))});var w=b},18987:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var a=r(63366),o=r(87462),n=r(67294),i=r(86010),s=r(94780),l=r(59773),c=r(90948),d=r(71657),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiListItemAvatar",e)}(0,u.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var Z=r(85893);let v=["className"],h=e=>{let{alignItems:t,classes:r}=e;return(0,s.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},p,r)},f=(0,c.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})(({ownerState:e})=>(0,o.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8})),x=n.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiListItemAvatar"}),{className:s}=r,c=(0,a.Z)(r,v),u=n.useContext(l.Z),m=(0,o.Z)({},r,{alignItems:u.alignItems}),p=h(m);return(0,Z.jsx)(f,(0,o.Z)({className:(0,i.Z)(p.root,s),ownerState:m,ref:t},c))});var g=x},51233:function(e,t,r){"use strict";r.d(t,{Z:function(){return N}});var a=r(63366),o=r(87462),n=r(67294),i=r(86010),s=r(59766),l=r(94780),c=r(34867),d=r(13264),u=r(29628),m=r(39707),p=r(66500),Z=r(95408),v=r(98700),h=r(85893);let f=["component","direction","spacing","divider","children","className","useFlexGap"],x=(0,p.Z)(),g=(0,d.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function y(e){return(0,u.Z)({props:e,name:"MuiStack",defaultTheme:x})}let j=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],b=({ownerState:e,theme:t})=>{let r=(0,o.Z)({display:"flex",flexDirection:"column"},(0,Z.k9)({theme:t},(0,Z.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let a=(0,v.hB)(t),o=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),n=(0,Z.P$)({values:e.direction,base:o}),i=(0,Z.P$)({values:e.spacing,base:o});"object"==typeof n&&Object.keys(n).forEach((e,t,r)=>{let a=n[e];if(!a){let a=t>0?n[r[t-1]]:"column";n[e]=a}});let l=(t,r)=>e.useFlexGap?{gap:(0,v.NA)(a,t)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${j(r?n[r]:e.direction)}`]:(0,v.NA)(a,t)}};r=(0,s.Z)(r,(0,Z.k9)({theme:t},i,l))}return(0,Z.dt)(t.breakpoints,r)};var w=r(90948),C=r(71657);let S=function(e={}){let{createStyledComponent:t=g,useThemeProps:r=y,componentName:s="MuiStack"}=e,d=()=>(0,l.Z)({root:["root"]},e=>(0,c.Z)(s,e),{}),u=t(b),p=n.forwardRef(function(e,t){let s=r(e),l=(0,m.Z)(s),{component:c="div",direction:p="column",spacing:Z=0,divider:v,children:x,className:g,useFlexGap:y=!1}=l,j=(0,a.Z)(l,f),b=d();return(0,h.jsx)(u,(0,o.Z)({as:c,ownerState:{direction:p,spacing:Z,useFlexGap:y},ref:t,className:(0,i.Z)(b.root,g)},j,{children:v?function(e,t){let r=n.Children.toArray(e).filter(Boolean);return r.reduce((e,a,o)=>(e.push(a),o<r.length-1&&e.push(n.cloneElement(t,{key:`separator-${o}`})),e),[])}(x,v):x}))});return p}({createStyledComponent:(0,w.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,C.Z)({props:e,name:"MuiStack"})});var N=S},13264:function(e,t,r){"use strict";var a=r(70182);let o=(0,a.ZP)();t.Z=o},20510:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/choose-company",function(){return r(37015)}])},37015:function(e,t,r){"use strict";r.r(t);var a=r(85893),o=r(67294),n=r(67218),i=r(11163),s=r(87357),l=r(66242),c=r(78445),d=r(44267),u=r(51233),m=r(15861),p=r(50135),Z=r(87109),v=r(78462),h=r(19294),f=r(11057),x=r(18987),g=r(87952),y=r(59334),j=r(87918),b=r(63730),w=r(98582),C=r(76058);let S=()=>{let{user:e,setUser:t}=(0,n.a)(),r=(0,i.useRouter)(),[S,N]=(0,o.useState)(!1),[R,k]=(0,o.useState)("");console.log(e);let M=(0,o.useMemo)(()=>e?Array.isArray(e.companies_detail)&&e.companies_detail.length>0?e.companies_detail:Array.isArray(e.companies)&&e.companies.length>0?e.companies.map(e=>({id:e,name:"Company ".concat(e)})):[]:[],[e]),_=(0,o.useMemo)(()=>{if(!R)return M;let e=R.toLowerCase();return M.filter(t=>(t.name||"").toLowerCase().includes(e)||(t.code||"").toLowerCase().includes(e)||String(t.id).includes(e))},[M,R]);(0,o.useEffect)(()=>{let r=window.localStorage.getItem(w.Z.storageTokenKeyName);!e&&r&&(N(!0),C.Do.get(w.Z.meEndpoint).then(async e=>{N(!1);let r=e.data;t({...r}),localStorage.getItem("userData")||window.localStorage.setItem("userData",JSON.stringify(r))}).finally(()=>N(!1)))},[e,t]);let I=a=>{let o={...e,company_current:a,company_id:a};t(o),window.localStorage.setItem("userData",JSON.stringify(o)),r.replace("/dashboards")};return(0,a.jsx)(s.Z,{sx:{p:6},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(c.Z,{title:"Select a Company",subheader:"Pick the company you want to work with"}),(0,a.jsx)(d.Z,{children:S?(0,a.jsxs)(u.Z,{alignItems:"center",sx:{py:6},children:[(0,a.jsx)(b.Z,{icon:"tabler:loader-2",fontSize:24,className:"spinner"}),(0,a.jsx)(m.Z,{sx:{mt:2},children:"Loading companiesâ€¦"})]}):0===M.length?(0,a.jsx)(m.Z,{children:"No companies available for your account."}):(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(p.Z,{fullWidth:!0,value:R,onChange:e=>k(e.target.value),placeholder:"Search companies by name, code or ID",InputProps:{startAdornment:(0,a.jsx)(Z.Z,{position:"start",children:(0,a.jsx)(b.Z,{icon:"tabler:search"})})},sx:{mb:4}}),(0,a.jsx)(v.Z,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2},children:_.map(e=>{var t,r;return(0,a.jsxs)(h.ZP,{sx:{border:e=>"1px solid ".concat(e.palette.divider),mb:2,borderRadius:2},secondaryAction:(0,a.jsx)(f.Z,{variant:"contained",onClick:()=>I(e.id),children:"Choose"}),children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(g.Z,{src:e.logo||void 0,children:(0,a.jsx)(b.Z,{icon:"tabler:building"})})}),(0,a.jsx)(y.Z,{primary:(0,a.jsxs)(u.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(m.Z,{variant:"h6",children:e.name||"Company ".concat(e.id)}),!1===e.is_active?(0,a.jsx)(j.Z,{size:"small",color:"warning",label:"Inactive"}):null]}),secondary:(0,a.jsxs)(u.Z,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.code?(0,a.jsxs)(m.Z,{color:"text.secondary",children:["Code: ",e.code]}):null,e.phone?(0,a.jsxs)(m.Z,{color:"text.secondary",children:["Phone: ",e.phone]}):null,(null===(t=e.region_detail)||void 0===t?void 0:t.name)?(0,a.jsxs)(m.Z,{color:"text.secondary",children:["Region: ",e.region_detail.name]}):null,(null===(r=e.district_detail)||void 0===r?void 0:r.name)?(0,a.jsxs)(m.Z,{color:"text.secondary",children:["District: ",e.district_detail.name]}):null,e.address?(0,a.jsx)(m.Z,{color:"text.secondary",children:e.address}):null]})})]},e.id)})})]})})]})})};S.getLayout=e=>e,S.authGuard=!0,S.acl={action:"manage",subject:"all"},t.default=S}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=20510)}),_N_E=e.O()}]);
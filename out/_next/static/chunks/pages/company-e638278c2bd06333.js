(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7639],{49144:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/company",function(){return r(48765)}])},34375:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(63366),a=r(87462),o=r(67294),i=r(86010),d=r(94780),l=r(96788),s=r(29567),c=r(77527),p=r(1588),u=r(34867);function m(e){return(0,u.Z)("MuiCardHeader",e)}let g=(0,p.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var y=r(85893);let h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=e=>{let{classes:t}=e;return(0,d.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,t)},x=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({["& .".concat(g.title)]:t.title,["& .".concat(g.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),v=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),S=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var j=o.forwardRef(function(e,t){let r=(0,s.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:d,className:c,component:p="div",disableTypography:u=!1,subheader:m,subheaderTypographyProps:g,title:j,titleTypographyProps:Z}=r,I=(0,n.Z)(r,h),B=(0,a.Z)({},r,{component:p,disableTypography:u}),M=f(B),w=j;null==w||w.type===l.Z||u||(w=(0,y.jsx)(l.Z,(0,a.Z)({variant:d?"body2":"h5",className:M.title,component:"span",display:"block"},Z,{children:w})));let k=m;return null==k||k.type===l.Z||u||(k=(0,y.jsx)(l.Z,(0,a.Z)({variant:d?"body2":"body1",className:M.subheader,color:"text.secondary",component:"span",display:"block"},g,{children:k}))),(0,y.jsxs)(x,(0,a.Z)({className:(0,i.Z)(M.root,c),as:p,ref:t,ownerState:B},I,{children:[d&&(0,y.jsx)(v,{className:M.avatar,ownerState:B,children:d}),(0,y.jsxs)(S,{className:M.content,ownerState:B,children:[w,k]}),o&&(0,y.jsx)(b,{className:M.action,ownerState:B,children:o})]}))})},7879:function(e,t,r){"use strict";var n=r(85893),a=r(67294),o=r(77527),i=r(40492);let d=(0,o.ZP)(i.Z)(e=>{let{theme:t}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),l=(0,a.forwardRef)((e,t)=>{let{size:r="small",InputLabelProps:a,...o}=e;return(0,n.jsx)(d,{size:r,inputRef:t,...o,variant:"filled",InputLabelProps:{...a,shrink:!0}})});t.Z=l},74538:function(e,t){"use strict";let r=e=>Array.isArray(e)?e[0]:null==e?"":String(e);t.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:e=>"/company-profile/".concat(r(e)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:e=>"/district/".concat(r(e)),region:"/region/",regionById:e=>"/region/".concat(r(e)),countryById:e=>"/country/".concat(r(e)),countryFields:"/country/fields/",command:"/command/",commandById:e=>"/command/".concat(r(e)),industries:"/industry",industryById:e=>"/industry/".concat(r(e)),industryFields:"/industry/fields",users:"/user",userById:e=>"/user/".concat(r(e)),equipmentCategories:"/equipment-category",equipmentCategoryById:e=>"/equipment-category/".concat(r(e)),services:"/service",serviceById:e=>"/service/".concat(r(e)),partners:"/partner",partnerById:e=>"/partner/".concat(r(e)),company:"/company/",companyById:e=>"/company/".concat(r(e)),replyLetter:"/reply-letter/",replyLetterById:e=>"/reply-letter/".concat(r(e)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:e=>"/reply-letter-file/".concat(r(e)),documents:"/documents/",documentById:e=>"/documents/".concat(r(e)),documentForm:"/document-form/",documentFormById:e=>"/document-form/".concat(r(e)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:e=>"/list-of-magazine/".concat(r(e)),task:"/task/",taskById:e=>"/task/".concat(r(e)),taskPart:"/task-part/",taskPartById:e=>"/task-part/".concat(r(e)),taskEvent:"/task-event/",taskEventById:e=>"/task-event/".concat(r(e)),taskComment:"/task-comment/",taskCommentById:e=>"/task-comment/".concat(r(e)),taskAttachment:"/task-attachment/",taskAttachmentById:e=>"/task-attachment/".concat(r(e)),department:"/department/",departmentById:e=>"/department/".concat(r(e)),position:"/position/",positionById:e=>"/position/".concat(r(e)),projects:"/project",projectById:e=>"/project/".concat(r(e)),projectDeliverables:"/project-deliverable",projectDeliverableById:e=>"/project-deliverable/".concat(r(e)),projectImages:"/project-image",projectImageById:e=>"/project-image/".concat(r(e)),stats:"/stats",statById:e=>"/stats/".concat(r(e)),faqs:"/faq",faqById:e=>"/faq/".concat(r(e)),inquiries:"/inquiry",inquiryById:e=>"/inquiry/".concat(r(e)),downloads:"/command-file/",downloadById:e=>"/command-file/".concat(r(e)),news:"/news-post",newsById:e=>"/news-post/".concat(r(e)),testimonials:"/testimonial",testimonialById:e=>"/testimonial/".concat(r(e)),ourWork:"/our-work",ourWorkById:e=>"/our-work/".concat(r(e)),applicationApprovedByID:e=>"/application-approved/".concat(r(e)),limitData:"/limit-data"}},33251:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var n=r(30202),a=r(33934),o=r(52293);let i=function(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,n.NL)(),l=["list",e,i],s=Object.fromEntries(Object.entries(i).filter(e=>{let[,t]=e;return void 0!==t})),{data:c,isLoading:p,error:u}=(0,a.a)({queryKey:l,queryFn:async()=>{var t,r,n;let a=(await o.Do.get(e,s)).data,i=Array.isArray(a)?a:null!==(r=null==a?void 0:a.results)&&void 0!==r?r:[],d=Array.isArray(a)?i.length:null!==(n=null==a?void 0:null===(t=a.pagination)||void 0===t?void 0:t.total)&&void 0!==n?n:i.length;return{items:i,total:d}},staleTime:3e4});return{data:null!==(t=null==c?void 0:c.items)&&void 0!==t?t:[],total:null!==(r=null==c?void 0:c.total)&&void 0!==r?r:0,loading:p,error:u,mutate:()=>{d.invalidateQueries({queryKey:l})}}}},48765:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(85893),a=r(67294),o=r(11163),i=r(33251),d=r(52293),l=r(74538),s=r(52857),c=r(60762),p=r(34375),u=r(73907),m=r(28634),g=r(75673),y=r(87536),h=r(33453),f=r(92365),x=r(40110),v=r(96727),b=r(68573),S=r(15972),j=r(13539),Z=r(65806),I=r(7879),B=r(86501),M=r(22120);let w={code:"",name:"",is_active:!0,phone:"",region:0,district:0,address:"",created_by:0,logo:""};var k=e=>{let{open:t,onClose:r,onSaved:o,mode:s,item:c}=e,{t:p}=(0,M.$G)(),{control:m,handleSubmit:g,reset:k,watch:C,formState:{isSubmitting:P,errors:z}}=(0,y.cI)({defaultValues:w}),[_,N]=(0,a.useState)(null),{data:q=[]}=(0,i.z)(l.Z.region,{perPage:100}),W=C("region"),A=W?"".concat(l.Z.district,"?region=").concat(W):l.Z.district,{data:R=[]}=(0,i.z)(A,{perPage:200});(0,a.useEffect)(()=>{"edit"===s&&c?k(c):k(w)},[s,c,k]);let F=async e=>{try{if("create"===s){if(_){let t=new FormData;t.append("logo",_),t.append("code",e.code),t.append("name",e.name),t.append("phone",e.phone),t.append("region",e.region.toString()),t.append("district",e.district.toString()),t.append("address",e.address),await d.Do.postForm(l.Z.company,t)}else await d.Do.post(l.Z.company,e)}else if("edit"===s&&(null==c?void 0:c.id)&&(await d.Do.put(l.Z.companyById(c.id),e),_)){let t=new FormData;t.append("logo",_),t.append("code",e.code),t.append("name",e.name),t.append("phone",e.phone),t.append("region",e.region.toString()),t.append("district",e.district.toString()),t.append("address",e.address),await d.Do.postForm(l.Z.companyById(c.id),t)}B.ZP.success(String(p("company.toast.saved"))),o(),r()}catch(e){console.error("Failed to save company:",e),B.ZP.error(String(p("company.toast.saveError")))}};return(0,n.jsxs)(h.Z,{open:t,onClose:P?void 0:r,fullWidth:!0,maxWidth:"md",children:[(0,n.jsx)(f.Z,{children:"create"===s?String(p("company.create.title")):String(p("company.edit.title"))}),(0,n.jsxs)("form",{onSubmit:g(F),children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)(b.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(b.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Qr,{name:"is_active",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(Z.Z,{control:(0,n.jsx)(j.Z,{checked:!!t.value,onChange:(e,r)=>t.onChange(r)}),label:String(p("company.form.active"))})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"code",control:m,rules:{required:String(p("errors.required"))},render:e=>{var t;let{field:r}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(p("company.form.code")),...r,error:!!z.code,helperText:null===(t=z.code)||void 0===t?void 0:t.message})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"name",control:m,rules:{required:String(p("errors.required"))},render:e=>{var t;let{field:r}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(p("company.form.name")),...r,error:!!z.name,helperText:null===(t=z.name)||void 0===t?void 0:t.message})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"phone",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(p("company.form.phone")),...t})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"address",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(p("company.form.address")),...t})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"region",control:m,rules:{required:String(p("errors.required"))},render:e=>{var t;let{field:r}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(p("company.form.region")),...r,error:!!z.region,helperText:null===(t=z.region)||void 0===t?void 0:t.message,children:q.map(e=>(0,n.jsx)(S.Z,{value:e.id,children:e.name},e.id))})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(y.Qr,{name:"district",control:m,rules:{required:String(p("errors.required"))},render:e=>{var t;let{field:r}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(p("company.form.district")),...r,error:!!z.district,helperText:null===(t=z.district)||void 0===t?void 0:t.message,children:R.map(e=>(0,n.jsx)(S.Z,{value:e.id,children:e.name},e.id))})}})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,children:(0,n.jsx)("input",{type:"file",onChange:e=>{var t;return N((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})})]})}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(u.Z,{type:"button",variant:"tonal",color:"secondary",onClick:r,disabled:P,children:String(p("common.cancel"))}),(0,n.jsx)(u.Z,{type:"submit",disabled:P,children:P?String(p("common.saving")):String(p("common.save"))})]})]})]})},C=r(90142),P=r(55421),z=()=>{let e=(0,o.useRouter)(),{t}=(0,M.$G)(),[r,y]=(0,a.useState)({page:0,pageSize:10}),{data:h=[],loading:f,mutate:x}=(0,i.z)(l.Z.company,{perPage:r.pageSize,page:r.page+1}),[v,b]=(0,a.useState)(!1),[S,j]=(0,a.useState)(null),Z=e=>{j(e),b(!0)},I=async e=>{await d.Do.delete(l.Z.companyById(e)),x()},B=[{field:"code",headerName:String(t("company.table.code")),flex:.15,minWidth:120},{field:"name",headerName:String(t("company.table.name")),flex:.25,minWidth:180},{field:"is_active",headerName:String(t("company.table.active")),flex:.1,minWidth:100,valueGetter:e=>e.row.is_active?String(t("common.yes")):String(t("common.no"))},{field:"phone",headerName:String(t("company.table.phone")),flex:.2,minWidth:160},{field:"region",headerName:String(t("company.table.region")),flex:.12,minWidth:120,valueGetter:e=>{var t;return(null===(t=e.row.region_detail)||void 0===t?void 0:t.name_uz)||e.row.region}},{field:"district",headerName:String(t("company.table.district")),flex:.12,minWidth:120,valueGetter:e=>{var t;return(null===(t=e.row.district_detail)||void 0===t?void 0:t.name_uz)||e.row.district}},{field:"address",headerName:String(t("company.table.address")),flex:.3,minWidth:220},{field:"logo",headerName:String(t("company.table.logo")),flex:.15,minWidth:140,renderCell:e=>{let t=e.row;return(0,n.jsx)(C.Z,{src:t.logo,variant:"circular",sx:{width:38,height:38,borderRadius:"50%","& img":{width:"100%",height:"100%",objectFit:"cover"}},children:(0,P.Q)(t.name)})}},{field:"actions",headerName:String(t("common.actions")),sortable:!1,flex:.15,minWidth:140,renderCell:t=>{let r=t.row;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{"aria-label":"view",onClick:()=>e.push("/company/view?id=".concat(r.id)),children:(0,n.jsx)(g.Z,{icon:"tabler:eye"})}),(0,n.jsx)(s.Z,{"aria-label":"edit",onClick:()=>Z(r),children:(0,n.jsx)(g.Z,{icon:"tabler:edit"})}),(0,n.jsx)(s.Z,{"aria-label":"delete",color:"error",onClick:()=>I(r.id),children:(0,n.jsx)(g.Z,{icon:"tabler:trash"})})]})}}];return(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(p.Z,{title:String(t("company.title")),action:(0,n.jsx)(u.Z,{variant:"contained",onClick:()=>{j(null),b(!0)},children:String(t("common.create"))})}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m._,{autoHeight:!0,rowHeight:56,rows:h,columns:B,loading:f,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:r,onPaginationModelChange:y,getRowId:e=>e.id})}),v&&(0,n.jsx)(k,{open:v,onClose:()=>b(!1),onSaved:x,mode:S?"edit":"create",item:S||void 0})]})},_=()=>(0,n.jsx)(z,{})}},function(e){e.O(0,[7536,2712,1440,8634,2888,9774,179],function(){return e(e.s=49144)}),_N_E=e.O()}]);
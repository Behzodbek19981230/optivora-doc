(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2892],{66249:function(e,r,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return i(69644)}])},82071:function(e,r,i){"use strict";i.d(r,{x:function(){return n}});let n=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:r=>{let{from:i,to:n,count:t}=r;return"".concat(i,"–").concat(n," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==t?t:">".concat(n))}}})},69644:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return X}});var n=i(85893),t=i(67294),s=i(21038),l=i(81873),a=i(52857),o=i(60762),d=i(34375),c=i(73907),m=i(33453),u=i(92365),x=i(40110),h=i(96727),g=i(16127),j=i(90142),p=i(75673),f=i(33251),Z=i(74538),v=i(52293),b=i(9198),y=i.n(b);i(5843);var S=i(87536),w=i(68573),_=i(12467),W=i(15903),P=i(6897),C=i(85533),z=i(12283),k=i(15972),D=i(13539),R=i(65806),I=i(7879),N=i(86501),Q=i(81342),q=i(34273),E=i(55421),F=i(22120),M=i(20788);let T={username:"",fullname:"",is_active:!0,date_of_birthday:"",gender:"",phone_number:"",avatar:"",email:"",role:[],password:"",region:0,district:0,address:"",companies:[],roles_detail:[]};var Y=e=>{let{open:r,onClose:i,onSaved:s,mode:l,item:a}=e,{t:o}=(0,F.$G)(),{control:d,handleSubmit:g,reset:p,watch:b,formState:{isSubmitting:Y,errors:O}}=(0,S.cI)({defaultValues:T});(0,q.a)();let{data:V=[]}=(0,f.z)(Z.Z.region,{limit:100}),L=b("region"),U=L?"".concat(Z.Z.district,"?region=").concat(L):Z.Z.district,{data:A=[]}=(0,f.z)(U,{limit:200}),{data:G=[]}=(0,f.z)(Z.Z.company,{limit:200}),[H,B]=(0,t.useState)(null),$=(0,t.useRef)(null),[X,J]=(0,t.useState)("");(0,t.useEffect)(()=>{if("edit"===l&&a){var e;p({...a,password:"",role:(null===(e=a.roles_detail)||void 0===e?void 0:e.map(e=>String(e.id)))||[]}),J(a.avatar||"")}else p(T),J("")},[l,a,p]),(0,t.useEffect)(()=>{if(H){let e=URL.createObjectURL(H);return J(e),()=>URL.revokeObjectURL(e)}},[H]);let K=async e=>{try{let r={...e};if(r.password||delete r.password,"create"===l){let r=new FormData;H&&r.append("avatar",H),Object.keys(e).forEach(i=>{if("roles"!=i){if("role"==i){var n;null===(n=e.role)||void 0===n||n.forEach(e=>{r.append("roles",String(e))});return}"companies"==i?e.companies.forEach(e=>{r.append("companies",e.toString())}):r.append(i,e[i])}}),await v.Do.postForm(Z.Z.users,r)}else if("edit"===l&&(null==a?void 0:a.id)){if(H){let r=new FormData;Object.keys(e).forEach(i=>{if("roles"!=i){if("role"==i){var n;null===(n=e.role)||void 0===n||n.forEach(e=>{r.append("roles",String(e))});return}if("companies"==i)e.companies.forEach(e=>{r.append("companies",e.toString())});else{if("avatar"==i)return;r.append(i,e[i])}}}),r.append("avatar",H),await v.Do.putForm(Z.Z.userById(a.id),r)}else{let r={...e};delete r.role,delete r.roles_detail,delete r.avatar,r.roles=(e.role||[]).map(e=>Number(e)),await v.Do.put(Z.Z.userById(a.id),r)}}N.ZP.success(String(o("users.toast.saved"))),s(),i()}catch(e){console.error("Failed to save user:",e),N.ZP.error(String(o("users.toast.saveError")))}};return(0,n.jsxs)(m.Z,{open:r,onClose:Y?void 0:i,fullWidth:!0,maxWidth:"md",children:[(0,n.jsx)(u.Z,{children:"create"===l?String(o("users.create.title")):String(o("users.edit.title"))}),(0,n.jsxs)("form",{onSubmit:g(K),children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(Q.Z,{children:(0,n.jsxs)(w.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"fullname",control:d,rules:{required:String(o("errors.required"))},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(o("users.form.fullname")),...i,error:!!O.fullname,helperText:null===(r=O.fullname)||void 0===r?void 0:r.message})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"email",control:d,rules:{required:String(o("errors.required"))},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,type:"email",label:String(o("users.form.email")),...i,error:!!O.email,helperText:null===(r=O.email)||void 0===r?void 0:r.message})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"phone_number",control:d,render:e=>{let{field:r}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(o("users.form.phone")),...r})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"date_of_birthday",control:d,render:e=>{let{field:r}=e,i=r.value?new Date(r.value):null;return(0,n.jsx)("div",{children:(0,n.jsx)(y(),{selected:i,onChange:e=>r.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"scroll",yearDropdownItemNumber:100,scrollableYearDropdown:!0,customInput:(0,n.jsx)(I.Z,{label:String(o("users.form.birthDate")),fullWidth:!0}),showPopperArrow:!0,isClearable:!0})})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"gender",control:d,rules:{required:String(o("errors.required"))},render:e=>{let{field:r}=e;return(0,n.jsxs)(P.Z,{error:!!O.gender,children:[(0,n.jsx)(C.Z,{children:String(o("users.form.gender"))}),(0,n.jsxs)(W.Z,{row:!0,...r,children:[(0,n.jsx)(R.Z,{value:"male",control:(0,n.jsx)(_.Z,{}),label:String(o("users.gender.male"))}),(0,n.jsx)(R.Z,{value:"female",control:(0,n.jsx)(_.Z,{}),label:String(o("users.gender.female"))})]}),O.gender&&(0,n.jsx)(z.Z,{children:O.gender.message})]})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"role",control:d,rules:"create"===l?{required:String(o("errors.required"))}:{},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(o("users.form.role")),SelectProps:{multiple:!0},value:Array.isArray(i.value)?i.value:i.value?[i.value]:[],onChange:e=>{let r=e.target.value;i.onChange("string"==typeof r?r.split(","):r)},error:!!O.role,helperText:null===(r=O.role)||void 0===r?void 0:r.message,children:M.e.map(e=>(0,n.jsx)(k.Z,{value:e.value,children:o("users.roles.".concat(e.label.toLowerCase()))},e.value))})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"username",control:d,rules:{required:String(o("errors.required"))},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(o("users.form.username")),...i,error:!!O.username,helperText:null===(r=O.username)||void 0===r?void 0:r.message})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"password",control:d,render:e=>{let{field:r}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,type:"password",label:String(o("users.form.password")),...r,autoComplete:"new-password"})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"region",control:d,rules:{required:String(o("errors.required"))},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(o("users.form.region")),...i,error:!!O.region,helperText:null===(r=O.region)||void 0===r?void 0:r.message,children:V.map(e=>(0,n.jsx)(k.Z,{value:e.id,children:e.name_uz||e.name},e.id))})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(S.Qr,{name:"district",control:d,rules:{required:String(o("errors.required"))},render:e=>{var r;let{field:i}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(o("users.form.district")),...i,error:!!O.district,helperText:null===(r=O.district)||void 0===r?void 0:r.message,children:A.map(e=>(0,n.jsx)(k.Z,{value:e.id,children:e.name_uz||e.name},e.id))})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Qr,{name:"address",control:d,render:e=>{let{field:r}=e;return(0,n.jsx)(I.Z,{fullWidth:!0,label:String(o("users.form.address")),...r})}})}),(0,n.jsx)(w.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Qr,{name:"companies",control:d,render:e=>{let{field:r}=e;return(0,n.jsx)(I.Z,{select:!0,fullWidth:!0,label:String(o("users.form.companies")),...r,SelectProps:{multiple:!0},children:G.map(e=>(0,n.jsx)(k.Z,{value:e.id,children:e.name},e.id))})}})}),(0,n.jsxs)(w.ZP,{item:!0,xs:6,children:[(0,n.jsx)("input",{ref:$,hidden:!0,type:"file",accept:"image/*",onChange:e=>{var r;return B((null===(r=e.target.files)||void 0===r?void 0:r[0])||null)}}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,n.jsx)(j.Z,{src:X||void 0,variant:"circular",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},sx:{width:96,height:96,cursor:"pointer",borderRadius:"50%","& img":{width:"100%",height:"100%",objectFit:"cover"}},children:(0,E.Q)(b("fullname")||b("username")||"U")}),(0,n.jsx)(c.Z,{variant:"outlined",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},children:String(o("users.form.uploadAvatar"))})]})]}),(0,n.jsx)(w.ZP,{item:!0,xs:6,children:(0,n.jsx)(S.Qr,{name:"is_active",control:d,render:e=>{let{field:r}=e;return(0,n.jsx)(R.Z,{control:(0,n.jsx)(D.Z,{checked:!!r.value,onChange:(e,i)=>r.onChange(i)}),label:String(o("users.form.active"))})}})})]})})}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(c.Z,{type:"button",variant:"tonal",color:"secondary",onClick:i,disabled:Y,children:String(o("common.cancel"))}),(0,n.jsx)(c.Z,{type:"submit",disabled:Y,children:Y?String(o("common.saving")):String(o("common.save"))})]})]})]})},O=i(96788),V=i(90642),L=i(30381),U=i.n(L),A=i(56912),G=i(84166),H=e=>{var r,i,t,o;let{open:d,onClose:g,user:f}=e,{t:Z,i18n:v}=(0,F.$G)(),b=e=>{if(!e)return"—";let r=v.language;return r.startsWith("uz")?e.name_uz||e.name||"—":r.startsWith("ru")?e.name_ru||e.name||"—":r.startsWith("en")?e.name_en||e.name||"—":e.name||e.name_uz||e.name_ru||e.name_en||"—"},y=e=>{if(null==e)return"—";let r=String(e).trim();return r.length?r:"—"};return(0,n.jsxs)(m.Z,{open:d,onClose:g,maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(u.Z,{sx:{pr:12},children:(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[(0,n.jsx)(O.Z,{variant:"h6",children:String(Z("users.view.title",{defaultValue:"User details"}))}),(0,n.jsx)(s.Z,{title:String(Z("common.close")),children:(0,n.jsx)(a.Z,{onClick:g,"aria-label":"close",children:(0,n.jsx)(p.Z,{icon:"tabler:x"})})})]})}),(0,n.jsx)(x.Z,{children:f?(0,n.jsxs)(V.Z,{sx:{pb:2},children:[(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",gap:4,flexDirection:{xs:"column",sm:"row"}},children:[(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:"center",gap:3,minWidth:0},children:[(0,n.jsx)(j.Z,{src:f.avatar,variant:"circular",sx:{width:88,height:88,borderRadius:"50%","& img":{width:"100%",height:"100%",objectFit:"cover"}}}),(0,n.jsxs)(V.Z,{sx:{minWidth:0},children:[(0,n.jsx)(O.Z,{variant:"h6",sx:{fontWeight:700},noWrap:!0,children:y(f.fullname||f.username)}),(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:y(f.email)}),(0,n.jsxs)(O.Z,{variant:"caption",color:"text.secondary",noWrap:!0,children:["@",y(f.username)]})]})]}),(0,n.jsxs)(G.Z,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:[(0,n.jsx)(l.Z,{size:"small",color:f.is_active?"success":"default",variant:f.is_active?"filled":"outlined",label:f.is_active?String(Z("common.yes")):String(Z("common.no"))}),null===(r=f.roles_detail)||void 0===r?void 0:r.slice(0,4).map(e=>(0,n.jsx)(l.Z,{label:e.name,size:"small",variant:"outlined"},e.id)),f.roles_detail&&f.roles_detail.length>4?(0,n.jsx)(l.Z,{size:"small",variant:"outlined",label:"+".concat(f.roles_detail.length-4),"aria-label":"more roles"}):null]})]}),(0,n.jsx)(A.Z,{sx:{my:4}}),(0,n.jsxs)(w.ZP,{container:!0,spacing:4,children:[(0,n.jsxs)(w.ZP,{item:!0,xs:12,md:6,children:[(0,n.jsx)(O.Z,{variant:"subtitle1",sx:{fontWeight:700,mb:2},children:String(Z("users.view.sections.contact",{defaultValue:"Contact"}))}),(0,n.jsxs)(G.Z,{spacing:2,children:[(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,n.jsx)(p.Z,{icon:"tabler:mail",fontSize:"1.25rem"}),(0,n.jsxs)(V.Z,{sx:{minWidth:0},children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.email"))}),(0,n.jsx)(O.Z,{variant:"body1",noWrap:!0,children:y(f.email)})]})]}),(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,n.jsx)(p.Z,{icon:"tabler:phone",fontSize:"1.25rem"}),(0,n.jsxs)(V.Z,{sx:{minWidth:0},children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.phone"))}),(0,n.jsx)(O.Z,{variant:"body1",noWrap:!0,children:y(f.phone_number)})]})]}),(0,n.jsxs)(V.Z,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,n.jsx)(p.Z,{icon:"tabler:map-pin",fontSize:"1.25rem"}),(0,n.jsxs)(V.Z,{sx:{minWidth:0},children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.address"))}),(0,n.jsx)(O.Z,{variant:"body1",children:y(f.address)})]})]})]})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,md:6,children:[(0,n.jsx)(O.Z,{variant:"subtitle1",sx:{fontWeight:700,mb:2},children:String(Z("users.view.sections.meta",{defaultValue:"Details"}))}),(0,n.jsxs)(w.ZP,{container:!0,spacing:2,children:[(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.fullname"))}),(0,n.jsx)(O.Z,{variant:"body1",children:y(f.fullname)})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.username"))}),(0,n.jsx)(O.Z,{variant:"body1",children:y(f.username)})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.gender"))}),(0,n.jsx)(O.Z,{variant:"body1",children:"male"===(o=f.gender)?String(Z("users.gender.male",{defaultValue:"Male"})):"female"===o?String(Z("users.gender.female",{defaultValue:"Female"})):o||"—"})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.birthDate"))}),(0,n.jsx)(O.Z,{variant:"body1",children:f.date_of_birthday?U()(f.date_of_birthday).format("DD.MM.YYYY"):"—"})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.region"))}),(0,n.jsx)(O.Z,{variant:"body1",children:b(f.region_detail)})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,sm:6,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("users.form.district"))}),(0,n.jsx)(O.Z,{variant:"body1",children:b(f.district_detail)})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,children:[(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:String(Z("common.createdAt"))}),(0,n.jsx)(O.Z,{variant:"body1",children:U()(f.date_joined).format("DD.MM.YYYY HH:mm")})]})]})]}),(0,n.jsx)(w.ZP,{item:!0,xs:12,children:(0,n.jsx)(A.Z,{sx:{my:1}})}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,md:6,children:[(0,n.jsx)(O.Z,{variant:"subtitle1",sx:{fontWeight:700,mb:2},children:String(Z("users.form.role"))}),(0,n.jsx)(V.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(null===(i=f.roles_detail)||void 0===i?void 0:i.length)?f.roles_detail.map(e=>(0,n.jsx)(l.Z,{label:e.name,size:"small"},e.id)):(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:"—"})})]}),(0,n.jsxs)(w.ZP,{item:!0,xs:12,md:6,children:[(0,n.jsx)(O.Z,{variant:"subtitle1",sx:{fontWeight:700,mb:2},children:String(Z("users.form.companies"))}),(0,n.jsx)(V.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(null===(t=f.companies_detail)||void 0===t?void 0:t.length)?f.companies_detail.map(e=>(0,n.jsx)(l.Z,{label:e.name,size:"small"},e.id)):(0,n.jsx)(O.Z,{variant:"body2",color:"text.secondary",children:"—"})})]})]})]}):(0,n.jsx)(O.Z,{color:"text.secondary",children:String(Z("common.notFound"))})}),(0,n.jsx)(h.Z,{children:(0,n.jsx)(c.Z,{onClick:g,children:String(Z("common.close"))})})]})},B=i(82071),$=()=>{let{t:e}=(0,F.$G)(),[r,i]=(0,t.useState)({page:0,pageSize:10}),{data:b=[],loading:y,total:S,mutate:w}=(0,f.z)(Z.Z.users,{limit:r.pageSize,page:r.page+1});console.log(S);let[_,W]=(0,t.useState)(!1),[P,C]=(0,t.useState)(null),[z,k]=(0,t.useState)(!1),[D,R]=(0,t.useState)(null),[I,N]=(0,t.useState)(!1),[Q,q]=(0,t.useState)(null),M=e=>{C(e),W(!0)},T=async e=>{await v.Do.delete(Z.Z.userById(e)),w()},O=e=>e.avatar?(0,n.jsx)(j.Z,{src:e.avatar,variant:"circular",sx:{mr:2.5,width:38,height:38,borderRadius:"50%","& img":{width:"100%",height:"100%",objectFit:"cover"},cursor:"pointer"},onClick:()=>{R(e.avatar),k(!0)}}):(0,n.jsx)(j.Z,{skin:"light",color:"primary",sx:{mr:2.5,width:38,height:38,fontWeight:500},children:(0,E.Q)(e.fullname||e.username)}),V=[{field:"fullname",headerName:String(e("users.table.fullname")),flex:.35,minWidth:300,renderCell:e=>{let r=e.row;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[O(r),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,n.jsx)("span",{style:{flexWrap:"wrap",fontWeight:500},children:r.fullname||r.username}),(0,n.jsx)("span",{style:{color:"gray",fontSize:12},children:r.email})]})]})}},{field:"username",headerName:String(e("users.table.username")),flex:.15,minWidth:140},{field:"role",headerName:String(e("users.table.role")),flex:.12,minWidth:200,valueGetter:r=>{let i=r.row.roles_detail||[];return 0===i.length?"":i.map(r=>e("users.roles.".concat(r.name.toLowerCase()))).join(", ")}},{field:"phone_number",headerName:String(e("users.table.phone")),flex:.18,minWidth:160},{field:"is_active",headerName:String(e("users.table.active")),flex:.1,minWidth:100,valueGetter:r=>r.row.is_active?String(e("common.yes")):String(e("common.no"))},{field:"companies_detail",headerName:String(e("users.table.companies")),flex:.35,minWidth:260,sortable:!1,renderCell:e=>{let r=e.row.companies_detail||[];if(!r.length)return(0,n.jsx)("span",{style:{color:"gray"},children:"—"});let i=r.slice(0,3).map((e,r)=>{let i,t=r;if("string"==typeof e)i=e;else if("number"==typeof e)i=String(e);else{var a;t=null!==(a=e.id)&&void 0!==a?a:r,i=e.name||e.company_name||e.title||"#".concat(e.id)}return(0,n.jsx)(s.Z,{title:i,arrow:!0,children:(0,n.jsx)(l.Z,{size:"small",label:i.length>18?i.slice(0,15)+"…":i,sx:{fontWeight:500,fontSize:12,borderRadius:2,textTransform:"capitalize",color:"#1976d2"}})},t)}),t=r.length-3;return(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"4px",padding:"2px 0"},children:[i,t>0&&(0,n.jsx)(s.Z,{title:r.slice(3).map(e=>"string"==typeof e||"number"==typeof e?String(e):e.name||e.company_name||e.title||"#".concat(e.id)).join(", "),arrow:!0,children:(0,n.jsx)(l.Z,{size:"small",label:"+".concat(t),sx:{mb:1,fontWeight:500,fontSize:13,borderRadius:2}})})]})}},{field:"actions",headerName:String(e("common.actions")),flex:.18,minWidth:160,sortable:!1,renderCell:e=>{let r=e.row;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{"aria-label":"view",onClick:()=>{q(r),N(!0)},children:(0,n.jsx)(p.Z,{icon:"tabler:eye"})}),(0,n.jsx)(a.Z,{"aria-label":"edit",onClick:()=>M(r),children:(0,n.jsx)(p.Z,{icon:"tabler:edit"})}),(0,n.jsx)(a.Z,{"aria-label":"delete",color:"error",onClick:()=>T(r.id),children:(0,n.jsx)(p.Z,{icon:"tabler:trash"})})]})}}];return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(d.Z,{title:String(e("users.title")),action:(0,n.jsx)(c.Z,{variant:"contained",onClick:()=>{C(null),W(!0)},children:String(e("common.create"))})}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g._,{autoHeight:!0,rowHeight:56,rows:b,columns:V,loading:y,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:r,onPaginationModelChange:i,getRowId:e=>e.id,paginationMode:"server",rowCount:S||0,localeText:(0,B.x)(e)})}),_&&(0,n.jsx)(Y,{open:_,onClose:()=>W(!1),onSaved:w,mode:P?"edit":"create",item:P?{...P,companies:(P.companies||[]).map(e=>"string"==typeof e?Number(e):e)}:void 0}),(0,n.jsxs)(m.Z,{open:z,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(u.Z,{children:String(e("users.avatar.title"))}),(0,n.jsx)(x.Z,{children:D&&(0,n.jsx)("img",{src:D,alt:"User Avatar",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),(0,n.jsx)(h.Z,{children:(0,n.jsx)(c.Z,{onClick:()=>k(!1),children:String(e("common.close"))})})]}),(0,n.jsx)(H,{open:I,onClose:()=>N(!1),user:Q})]})},X=()=>(0,n.jsx)($,{})}},function(e){e.O(0,[4885,2785,7536,7605,1980,6949,2888,9774,179],function(){return e(e.s=66249)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3689],{89032:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return a(90337)}])},58898:function(t,e,a){"use strict";var n=a(18745),i=a(86501);e.Z=()=>{let t=(0,n.Z)();return{success:(e,a)=>i.ZP.success(e,{style:{paddingInline:"10px",paddingBlock:"6px",color:t.palette.success.main,border:"1px solid ".concat(t.palette.success.main)},iconTheme:{primary:t.palette.success.main,secondary:t.palette.success.contrastText},...a}),error:(e,a)=>i.ZP.error(e,{style:{paddingInline:"10px",paddingBlock:"6px",color:t.palette.error.main,border:"1px solid ".concat(t.palette.error.main)},iconTheme:{primary:t.palette.error.main,secondary:t.palette.getContrastText(t.palette.error.main)},...a}),info:(e,a)=>(0,i.ZP)(e,{style:{padding:"16px",color:t.palette.info.main,border:"1px solid ".concat(t.palette.info.main)},iconTheme:{primary:t.palette.info.main,secondary:t.palette.getContrastText(t.palette.info.main)},...a})}}},82071:function(t,e,a){"use strict";a.d(e,{x:function(){return n}});let n=t=>({noRowsLabel:String(t("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(t("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:e=>{let{from:a,to:n,count:i}=e;return"".concat(a,"–").concat(n," ").concat(String(t("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==i?i:">".concat(n))}}})},74538:function(t,e){"use strict";let a=t=>Array.isArray(t)?t[0]:null==t?"":String(t);e.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:t=>"/company-profile/".concat(a(t)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:t=>"/district/".concat(a(t),"/"),region:"/region/",regionById:t=>"/region/".concat(a(t),"/"),countryById:t=>"/country/".concat(a(t),"/"),countryFields:"/country/fields/",command:"/command/",commandById:t=>"/command/".concat(a(t)),industries:"/industry",industryById:t=>"/industry/".concat(a(t)),industryFields:"/industry/fields",users:"/user",userById:t=>"/user/".concat(a(t)),equipmentCategories:"/equipment-category",equipmentCategoryById:t=>"/equipment-category/".concat(a(t)),services:"/service",serviceById:t=>"/service/".concat(a(t)),partners:"/partner",partnerById:t=>"/partner/".concat(a(t)),company:"/company/",companyById:t=>"/company/".concat(a(t)),replyLetter:"/reply-letter/",replyLetterById:t=>"/reply-letter/".concat(a(t)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:t=>"/reply-letter-file/".concat(a(t)),documents:"/documents/",documentById:t=>"/documents/".concat(a(t)),documentForm:"/document-form/",documentFormById:t=>"/document-form/".concat(a(t)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:t=>"/list-of-magazine/".concat(a(t)),task:"/task/",taskById:t=>"/task/".concat(a(t)),taskPart:"/task-part/",taskPartById:t=>"/task-part/".concat(a(t)),taskEvent:"/task-event/",taskEventById:t=>"/task-event/".concat(a(t)),taskComment:"/task-comment/",taskCommentById:t=>"/task-comment/".concat(a(t)),taskAttachment:"/task-attachment/",taskAttachmentById:t=>"/task-attachment/".concat(a(t)),department:"/department/",departmentById:t=>"/department/".concat(a(t)),position:"/position/",positionById:t=>"/position/".concat(a(t)),projects:"/project",projectById:t=>"/project/".concat(a(t)),projectDeliverables:"/project-deliverable",projectDeliverableById:t=>"/project-deliverable/".concat(a(t)),projectImages:"/project-image",projectImageById:t=>"/project-image/".concat(a(t)),stats:"/stats",statById:t=>"/stats/".concat(a(t)),faqs:"/faq",faqById:t=>"/faq/".concat(a(t)),inquiries:"/inquiry",inquiryById:t=>"/inquiry/".concat(a(t)),downloads:"/command-file/",downloadById:t=>"/command-file/".concat(a(t)),news:"/news-post",newsById:t=>"/news-post/".concat(a(t)),testimonials:"/testimonial",testimonialById:t=>"/testimonial/".concat(a(t)),ourWork:"/our-work",ourWorkById:t=>"/our-work/".concat(a(t)),applicationApprovedByID:t=>"/application-approved/".concat(a(t)),limitData:"/limit-data"}},33251:function(t,e,a){"use strict";a.d(e,{z:function(){return o}});var n=a(30202),i=a(33934),r=a(52293);let o=function(t){var e,a;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,n.NL)(),c=["list",t,o],l=Object.fromEntries(Object.entries(o).filter(t=>{let[,e]=t;return void 0!==e})),{data:d,isLoading:m,error:p}=(0,i.a)({queryKey:c,queryFn:async()=>{var e,a,n;let i=(await r.Do.get(t,l)).data,o=Array.isArray(i)?i:null!==(a=null==i?void 0:i.results)&&void 0!==a?a:[],s=Array.isArray(i)?o.length:null!==(n=null==i?void 0:null===(e=i.pagination)||void 0===e?void 0:e.total)&&void 0!==n?n:o.length;return{items:o,total:s}},staleTime:3e4});return{data:null!==(e=null==d?void 0:d.items)&&void 0!==e?e:[],total:null!==(a=null==d?void 0:d.total)&&void 0!==a?a:0,loading:m,error:p,mutate:()=>{s.invalidateQueries({queryKey:c})}}}},90337:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return A}});var n=a(85893),i=a(60762),r=a(34375),o=a(71919),s=a(67294),c=a(84166),l=a(21038),d=a(52857),m=a(51015),p=a(33453),u=a(92365),y=a(40110),g=a(96788),h=a(68573),x=a(81359),f=a(90642),k=a(96727),v=a(28634),j=a(74538),Z=a(33251),b=a(75673),I=a(41664),w=a.n(I),B=a(11163),S=a(22120),C=a(52293),P=a(58898),_=a(34273),N=a(82071),q=a(30381),z=a.n(q);let T=t=>{if(!t)return"—";let e=z()(t);return e.isValid()?e.format("DD.MM.YYYY HH:mm"):String(t)};var W=()=>{var t;let[e,a]=(0,s.useState)({page:0,pageSize:10}),r=(0,B.useRouter)(),{t:I}=(0,S.$G)(),q=(0,P.Z)(),{user:z}=(0,_.a)(),[W,A]=(0,s.useState)(!1),[D,E]=(0,s.useState)("task"),[F,M]=(0,s.useState)(!1),{data:O=[],total:R,loading:H}=(0,Z.z)(j.Z.task,{page:e.page+1,limit:e.pageSize}),L=[{field:"id",headerName:String(I("common.id")),width:90},{field:"name",headerName:String(I("tasks.table.name")),flex:.3,minWidth:180},{field:"status",headerName:String(I("tasks.table.status")),flex:.2,minWidth:140},{field:"type",headerName:String(I("tasks.table.type")),flex:.15,minWidth:120},{field:"priority",headerName:String(I("tasks.table.priority")),flex:.15,minWidth:120},{field:"start_date",headerName:String(I("tasks.table.start")),flex:.15,minWidth:160,renderCell:t=>T(t.row.start_date)},{field:"end_date",headerName:String(I("tasks.table.end")),flex:.15,minWidth:160,renderCell:t=>T(t.row.end_date)},{field:"actions",headerName:String(I("common.actions")),width:120,sortable:!1,renderCell:t=>{let e=t.row.id;return(0,n.jsxs)(c.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(l.Z,{title:String(I("common.view")),children:(0,n.jsx)(d.Z,{size:"small",component:w(),href:"/tasks/view/".concat(e),children:(0,n.jsx)(b.Z,{icon:"tabler:eye"})})}),(0,n.jsx)(l.Z,{title:String(I("common.edit")),children:(0,n.jsx)(d.Z,{size:"small",component:w(),href:"/tasks/update/".concat(e),children:(0,n.jsx)(b.Z,{icon:"tabler:pencil"})})})]})}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{direction:"row",justifyContent:"flex-end",sx:{mb:2},children:(null==z?void 0:null===(t=z.role_detail)||void 0===t?void 0:t.some(t=>"Performer"!==t.name))&&(0,n.jsx)(m.Z,{variant:"contained",startIcon:(0,n.jsx)(b.Z,{icon:"tabler:plus"}),onClick:()=>A(!0),children:String(I("tasks.create.title"))})}),(0,n.jsxs)(p.Z,{open:W,onClose:F?void 0:()=>A(!1),fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(u.Z,{children:String(I("tasks.create.modal.title"))}),(0,n.jsxs)(y.Z,{children:[(0,n.jsx)(g.Z,{variant:"body2",sx:{color:"text.secondary",mb:4},children:String(I("tasks.create.modal.subtitle"))}),(0,n.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(i.Z,{variant:"outlined",sx:{borderColor:"task"===D?"primary.main":"divider",bgcolor:"task"===D?"primary.lighter":"background.paper"},children:(0,n.jsx)(x.Z,{onClick:()=>E("task"),children:(0,n.jsxs)(o.Z,{sx:{height:100},children:[(0,n.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,n.jsx)(b.Z,{icon:"tabler:clipboard-list"}),(0,n.jsx)(g.Z,{variant:"h6",children:String(I("tasks.type.task"))})]}),(0,n.jsx)(g.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(I("tasks.create.modal.taskHint"))})]})})})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(i.Z,{variant:"outlined",sx:{borderColor:"application"===D?"primary.main":"divider",bgcolor:"application"===D?"primary.lighter":"background.paper"},children:(0,n.jsx)(x.Z,{onClick:()=>E("application"),children:(0,n.jsxs)(o.Z,{sx:{height:100},children:[(0,n.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,n.jsx)(b.Z,{icon:"tabler:file-text"}),(0,n.jsx)(g.Z,{variant:"h6",children:String(I("tasks.type.application"))})]}),(0,n.jsx)(g.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(I("tasks.create.modal.applicationHint"))})]})})})})]})]}),(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(m.Z,{variant:"tonal",color:"secondary",onClick:()=>A(!1),disabled:F,children:String(I("common.cancel"))}),(0,n.jsx)(m.Z,{variant:"contained",onClick:async()=>{try{var t;M(!0);let e=await C.Do.post(j.Z.task,{type:D,status:"new",company:null==z?void 0:z.company_id}),a=null===(t=e.data)||void 0===t?void 0:t.id;q.success(String(I("tasks.toast.created"))),A(!1),a&&r.push("/tasks/update/".concat(a))}catch(t){q.error((null==t?void 0:t.message)||String(I("tasks.toast.createError")))}finally{M(!1)}},disabled:F,children:F?String(I("common.creating")):String(I("common.create"))})]})]}),(0,n.jsx)(v._,{autoHeight:!0,rowHeight:56,rows:O,columns:L,loading:H,rowCount:R,paginationMode:"server",disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:e,onPaginationModelChange:a,getRowId:t=>t.id,localeText:(0,N.x)(I)})]})},A=()=>{let{t}=(0,S.$G)();return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(r.Z,{title:String(t("tasks.title"))}),(0,n.jsx)(o.Z,{children:(0,n.jsx)(W,{})})]})}}},function(t){t.O(0,[4885,2785,9084,8634,1594,2888,9774,179],function(){return t(t.s=89032)}),_N_E=t.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{66243:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/create",function(){return t(90600)}])},71919:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var n=t(87462),i=t(63366),o=t(67294),a=t(86010),s=t(94780),l=t(77527),d=t(29567),u=t(1588),c=t(34867);function m(e){return(0,c.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var p=t(85893);let g=["className","component"],x=e=>{let{classes:r}=e;return(0,s.Z)({root:["root"]},m,r)},h=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var v=o.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:o,component:s="div"}=t,l=(0,i.Z)(t,g),u=(0,n.Z)({},t,{component:s}),c=x(u);return(0,p.jsx)(h,(0,n.Z)({as:s,className:(0,a.Z)(c.root,o),ownerState:u,ref:r},l))})},34375:function(e,r,t){"use strict";t.d(r,{Z:function(){return S}});var n=t(63366),i=t(87462),o=t(67294),a=t(86010),s=t(94780),l=t(96788),d=t(29567),u=t(77527),c=t(1588),m=t(34867);function p(e){return(0,m.Z)("MuiCardHeader",e)}let g=(0,c.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var x=t(85893);let h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=e=>{let{classes:r}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,r)},Z=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,i.Z)({["& .".concat(g.title)]:r.title,["& .".concat(g.subheader)]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),f=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"});var S=o.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:s,className:u,component:c="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:g,title:S,titleTypographyProps:b}=t,k=(0,n.Z)(t,h),_=(0,i.Z)({},t,{component:c,disableTypography:m}),q=v(_),P=S;null==P||P.type===l.Z||m||(P=(0,x.jsx)(l.Z,(0,i.Z)({variant:s?"body2":"h5",className:q.title,component:"span",display:"block"},b,{children:P})));let C=p;return null==C||C.type===l.Z||m||(C=(0,x.jsx)(l.Z,(0,i.Z)({variant:s?"body2":"body1",className:q.subheader,color:"text.secondary",component:"span",display:"block"},g,{children:C}))),(0,x.jsxs)(Z,(0,i.Z)({className:(0,a.Z)(q.root,u),as:c,ref:r,ownerState:_},k,{children:[s&&(0,x.jsx)(f,{className:q.avatar,ownerState:_,children:s}),(0,x.jsxs)(y,{className:q.content,ownerState:_,children:[P,C]}),o&&(0,x.jsx)(j,{className:q.action,ownerState:_,children:o})]}))})},84166:function(e,r,t){"use strict";t.d(r,{Z:function(){return _}});var n=t(63366),i=t(87462),o=t(67294),a=t(86010),s=t(59766),l=t(94780),d=t(34867),u=t(13264),c=t(29628),m=t(39707),p=t(66500),g=t(95408),x=t(98700),h=t(85893);let v=["component","direction","spacing","divider","children","className","useFlexGap"],Z=(0,p.Z)(),f=(0,u.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root});function j(e){return(0,c.Z)({props:e,name:"MuiStack",defaultTheme:Z})}let y=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],S=({ownerState:e,theme:r})=>{let t=(0,i.Z)({display:"flex",flexDirection:"column"},(0,g.k9)({theme:r},(0,g.P$)({values:e.direction,breakpoints:r.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,x.hB)(r),i=Object.keys(r.breakpoints.values).reduce((r,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(r[t]=!0),r),{}),o=(0,g.P$)({values:e.direction,base:i}),a=(0,g.P$)({values:e.spacing,base:i});"object"==typeof o&&Object.keys(o).forEach((e,r,t)=>{if(!o[e]){let n=r>0?o[t[r-1]]:"column";o[e]=n}}),t=(0,s.Z)(t,(0,g.k9)({theme:r},a,(r,t)=>e.useFlexGap?{gap:(0,x.NA)(n,r)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${y(t?o[t]:e.direction)}`]:(0,x.NA)(n,r)}}))}return(0,g.dt)(r.breakpoints,t)};var b=t(77527),k=t(29567),_=function(e={}){let{createStyledComponent:r=f,useThemeProps:t=j,componentName:s="MuiStack"}=e,u=()=>(0,l.Z)({root:["root"]},e=>(0,d.Z)(s,e),{}),c=r(S);return o.forwardRef(function(e,r){let s=t(e),l=(0,m.Z)(s),{component:d="div",direction:p="column",spacing:g=0,divider:x,children:Z,className:f,useFlexGap:j=!1}=l,y=(0,n.Z)(l,v),S=u();return(0,h.jsx)(c,(0,i.Z)({as:d,ownerState:{direction:p,spacing:g,useFlexGap:j},ref:r,className:(0,a.Z)(S.root,f)},y,{children:x?function(e,r){let t=o.Children.toArray(e).filter(Boolean);return t.reduce((e,n,i)=>(e.push(n),i<t.length-1&&e.push(o.cloneElement(r,{key:`separator-${i}`})),e),[])}(Z,x):Z}))})}({createStyledComponent:(0,b.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root}),useThemeProps:e=>(0,k.Z)({props:e,name:"MuiStack"})})},58898:function(e,r,t){"use strict";var n=t(18745),i=t(86501);r.Z=()=>{let e=(0,n.Z)();return{success:(r,t)=>i.ZP.success(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.success.main,border:"1px solid ".concat(e.palette.success.main)},iconTheme:{primary:e.palette.success.main,secondary:e.palette.success.contrastText},...t}),error:(r,t)=>i.ZP.error(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.error.main,border:"1px solid ".concat(e.palette.error.main)},iconTheme:{primary:e.palette.error.main,secondary:e.palette.getContrastText(e.palette.error.main)},...t}),info:(r,t)=>(0,i.ZP)(r,{style:{padding:"16px",color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main)},iconTheme:{primary:e.palette.info.main,secondary:e.palette.getContrastText(e.palette.info.main)},...t})}}},90600:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return C}});var n=t(85893),i=t(60762),o=t(34375),a=t(71919),s=t(68573),l=t(15972),d=t(84166),u=t(73907),c=t(87536),m=t(47533),p=t(16310),g=t(7879),x=t(74538),h=t(52293),v=t(58898),Z=t(11163);t(5843);var f=t(81342),j=t(33251),y=t(9198),S=t.n(y),b=t(34273),k=t(22120);let _={status:"new",type:"task",name:"",task_form:void 0,sending_org:void 0,input_doc_number:"",output_doc_number:"",start_date:"",end_date:"",priority:"ordinary",department:void 0,signed_by:void 0,note:"",list_of_magazine:void 0},q=e=>p.Ry({type:p.Z_().oneOf(["task","application"]).required(String(e("errors.required"))),name:p.Z_().min(2,String(e("errors.minChars",{count:2}))).required(String(e("errors.required"))),task_form:p.Rx().typeError(String(e("errors.select"))).required(String(e("errors.required"))),sending_org:p.Rx().required(String(e("errors.required"))),input_doc_number:p.Z_().required(String(e("errors.required"))),output_doc_number:p.Z_().required(String(e("errors.required"))),start_date:p.Z_().required(String(e("errors.required"))),end_date:p.Z_().optional().default("").test("end-after-start",String(e("errors.endAfterStart")),function(e){let{start_date:r}=this.parent;return!r||!e||new Date(e)>=new Date(r)}),priority:p.Z_().oneOf(["ordinary","orgently"]).required(String(e("errors.required"))),department:p.Rx().required(String(e("errors.required"))),note:p.Z_().required(String(e("errors.required"))),list_of_magazine:p.Rx().required(String(e("errors.required"))),signed_by:p.Rx().required(String(e("errors.required")))});var P=()=>{let{t:e}=(0,k.$G)(),r=q(e),{control:t,handleSubmit:o}=(0,c.cI)({defaultValues:_,resolver:(0,m.X)(r)}),p=(0,v.Z)(),y=(0,Z.useRouter)(),{user:P}=(0,b.a)(),{data:C}=(0,j.z)(x.Z.department,{page:1,perPage:100}),{data:w}=(0,j.z)(x.Z.users,{page:1,perPage:100}),{data:T}=(0,j.z)(x.Z.company,{page:1,perPage:100}),{data:R}=(0,j.z)(x.Z.documentForm,{page:1,perPage:100}),M=R||[],{data:N}=(0,j.z)(x.Z.listOfMagazine,{page:1,perPage:100}),Q=e=>"string"==typeof e?e:void 0,W=async r=>{try{var t;let n=await h.Do.post(x.Z.task,{...r,company:null==P?void 0:P.company_id}),i=null===(t=n.data)||void 0===t?void 0:t.id;p.success(String(e("tasks.toast.created"))),i?y.push("/tasks/update/".concat(i)):y.push("/tasks")}catch(r){p.error((null==r?void 0:r.message)||String(e("tasks.toast.createError")))}};return(0,n.jsx)(i.Z,{children:(0,n.jsx)(a.Z,{children:(0,n.jsx)(f.Z,{children:(0,n.jsx)("form",{onSubmit:o(W),children:(0,n.jsxs)(s.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"type",control:t,render:r=>{let{field:t}=r;return(0,n.jsxs)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.type")),...t,children:[(0,n.jsx)(l.Z,{value:"task",children:String(e("tasks.type.task"))}),(0,n.jsx)(l.Z,{value:"application",children:String(e("tasks.type.application"))})]})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"priority",control:t,render:r=>{let{field:t}=r;return(0,n.jsxs)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.priority")),...t,children:[(0,n.jsx)(l.Z,{value:"ordinary",children:String(e("tasks.priority.ordinary"))}),(0,n.jsx)(l.Z,{value:"orgently",children:String(e("tasks.priority.urgently"))})]})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(c.Qr,{name:"name",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{fullWidth:!0,label:String(e("tasks.form.name")),...i,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"task_form",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsxs)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.taskForm")),...i,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message),children:[(0,n.jsx)(l.Z,{value:0,children:String(e("common.selectPlaceholder"))}),(M||[]).map(e=>(0,n.jsx)(l.Z,{value:e.id,children:e.name},e.id))]})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"sending_org",control:t,rules:{required:!0},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{fullWidth:!0,select:!0,label:String(e("tasks.form.sendingOrg")),...i,error:!!o.error,helperText:null===(t=o.error)||void 0===t?void 0:t.message,children:(T||[]).map(e=>(0,n.jsx)(l.Z,{value:e.id,children:e.name},e.id))})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"input_doc_number",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{fullWidth:!0,label:String(e("tasks.form.inputDocNumber")),...i,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"output_doc_number",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{fullWidth:!0,label:String(e("tasks.form.outputDocNumber")),...i,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"start_date",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r,a=i.value?new Date(i.value):null;return(0,n.jsx)("div",{children:(0,n.jsx)(S(),{selected:a,onChange:e=>i.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,n.jsx)(g.Z,{label:String(e("tasks.form.startDate")),fullWidth:!0,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"end_date",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r,a=i.value?new Date(i.value):null;return(0,n.jsx)("div",{children:(0,n.jsx)(S(),{selected:a,onChange:e=>i.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,n.jsx)(g.Z,{label:String(e("tasks.form.endDate")),fullWidth:!0,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"department",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.department")),...i,error:!!o.error,helperText:null===(t=o.error)||void 0===t?void 0:t.message,children:(C||[]).map(e=>(0,n.jsx)(l.Z,{value:e.id,children:e.name},e.id))})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"signed_by",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.signedBy")),...i,error:!!o.error,helperText:null===(t=o.error)||void 0===t?void 0:t.message,children:(w||[]).map(e=>(0,n.jsx)(l.Z,{value:e.id,children:e.fullname},e.id))})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(c.Qr,{name:"note",control:t,render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsx)(g.Z,{fullWidth:!0,multiline:!0,rows:3,label:String(e("tasks.form.note")),...i,error:!!o.error,helperText:Q(null===(t=o.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"list_of_magazine",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:i,fieldState:o}=r;return(0,n.jsxs)(g.Z,{select:!0,fullWidth:!0,label:String(e("tasks.form.magazine")),...i,error:!!o.error,helperText:null===(t=o.error)||void 0===t?void 0:t.message,children:[(0,n.jsx)(l.Z,{value:0,children:String(e("common.selectPlaceholder"))}),(N||[]).map(e=>(0,n.jsx)(l.Z,{value:e.id,children:e.name},e.id))]})}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsxs)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(u.Z,{type:"button",variant:"outlined",onClick:()=>y.back(),children:String(e("common.cancel"))}),(0,n.jsx)(u.Z,{type:"submit",variant:"contained",children:String(e("common.save"))})]})})]})})})})})},C=()=>{let{t:e}=(0,k.$G)();return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(o.Z,{title:String(e("tasks.create.title"))}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(P,{})})]})}}},function(e){e.O(0,[7536,2712,4021,2216,1863,2888,9774,179],function(){return e(e.s=66243)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{13264:function(e,r,t){"use strict";let n=(0,t(70182).ZP)();r.Z=n},66243:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/create",function(){return t(90600)}])},71919:function(e,r,t){"use strict";t.d(r,{Z:function(){return h}});var n=t(87462),o=t(63366),i=t(67294),a=t(86010),l=t(94780),s=t(77527),d=t(29567),u=t(1588),c=t(34867);function p(e){return(0,c.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var m=t(85893);let v=["className","component"],g=e=>{let{classes:r}=e;return(0,l.Z)({root:["root"]},p,r)},x=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var h=i.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=t,s=(0,o.Z)(t,v),u=(0,n.Z)({},t,{component:l}),c=g(u);return(0,m.jsx)(x,(0,n.Z)({as:l,className:(0,a.Z)(c.root,i),ownerState:u,ref:r},s))})},34375:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var n=t(63366),o=t(87462),i=t(67294),a=t(86010),l=t(94780),s=t(96788),d=t(29567),u=t(77527),c=t(1588),p=t(34867);function m(e){return(0,p.Z)("MuiCardHeader",e)}let v=(0,c.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=t(85893);let x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],h=e=>{let{classes:r}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,r)},f=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,o.Z)({["& .".concat(v.title)]:r.title,["& .".concat(v.subheader)]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),Z=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"});var b=i.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:i,avatar:l,className:u,component:c="div",disableTypography:p=!1,subheader:m,subheaderTypographyProps:v,title:b,titleTypographyProps:S}=t,k=(0,n.Z)(t,x),_=(0,o.Z)({},t,{component:c,disableTypography:p}),q=h(_),C=b;null==C||C.type===s.Z||p||(C=(0,g.jsx)(s.Z,(0,o.Z)({variant:l?"body2":"h5",className:q.title,component:"span",display:"block"},S,{children:C})));let P=m;return null==P||P.type===s.Z||p||(P=(0,g.jsx)(s.Z,(0,o.Z)({variant:l?"body2":"body1",className:q.subheader,color:"text.secondary",component:"span",display:"block"},v,{children:P}))),(0,g.jsxs)(f,(0,o.Z)({className:(0,a.Z)(q.root,u),as:c,ref:r,ownerState:_},k,{children:[l&&(0,g.jsx)(Z,{className:q.avatar,ownerState:_,children:l}),(0,g.jsxs)(j,{className:q.content,ownerState:_,children:[C,P]}),i&&(0,g.jsx)(y,{className:q.action,ownerState:_,children:i})]}))})},84166:function(e,r,t){"use strict";t.d(r,{Z:function(){return _}});var n=t(63366),o=t(87462),i=t(67294),a=t(86010),l=t(59766),s=t(94780),d=t(34867),u=t(13264),c=t(29628),p=t(39707),m=t(66500),v=t(95408),g=t(98700),x=t(85893);let h=["component","direction","spacing","divider","children","className","useFlexGap"],f=(0,m.Z)(),Z=(0,u.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root});function y(e){return(0,c.Z)({props:e,name:"MuiStack",defaultTheme:f})}let j=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],b=({ownerState:e,theme:r})=>{let t=(0,o.Z)({display:"flex",flexDirection:"column"},(0,v.k9)({theme:r},(0,v.P$)({values:e.direction,breakpoints:r.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,g.hB)(r),o=Object.keys(r.breakpoints.values).reduce((r,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(r[t]=!0),r),{}),i=(0,v.P$)({values:e.direction,base:o}),a=(0,v.P$)({values:e.spacing,base:o});"object"==typeof i&&Object.keys(i).forEach((e,r,t)=>{if(!i[e]){let n=r>0?i[t[r-1]]:"column";i[e]=n}}),t=(0,l.Z)(t,(0,v.k9)({theme:r},a,(r,t)=>e.useFlexGap?{gap:(0,g.NA)(n,r)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${j(t?i[t]:e.direction)}`]:(0,g.NA)(n,r)}}))}return(0,v.dt)(r.breakpoints,t)};var S=t(77527),k=t(29567),_=function(e={}){let{createStyledComponent:r=Z,useThemeProps:t=y,componentName:l="MuiStack"}=e,u=()=>(0,s.Z)({root:["root"]},e=>(0,d.Z)(l,e),{}),c=r(b);return i.forwardRef(function(e,r){let l=t(e),s=(0,p.Z)(l),{component:d="div",direction:m="column",spacing:v=0,divider:g,children:f,className:Z,useFlexGap:y=!1}=s,j=(0,n.Z)(s,h),b=u();return(0,x.jsx)(c,(0,o.Z)({as:d,ownerState:{direction:m,spacing:v,useFlexGap:y},ref:r,className:(0,a.Z)(b.root,Z)},j,{children:g?function(e,r){let t=i.Children.toArray(e).filter(Boolean);return t.reduce((e,n,o)=>(e.push(n),o<t.length-1&&e.push(i.cloneElement(r,{key:`separator-${o}`})),e),[])}(f,g):f}))})}({createStyledComponent:(0,S.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root}),useThemeProps:e=>(0,k.Z)({props:e,name:"MuiStack"})})},58898:function(e,r,t){"use strict";var n=t(18745),o=t(86501);r.Z=()=>{let e=(0,n.Z)();return{success:(r,t)=>o.ZP.success(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.success.main,border:"1px solid ".concat(e.palette.success.main)},iconTheme:{primary:e.palette.success.main,secondary:e.palette.success.contrastText},...t}),error:(r,t)=>o.ZP.error(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.error.main,border:"1px solid ".concat(e.palette.error.main)},iconTheme:{primary:e.palette.error.main,secondary:e.palette.getContrastText(e.palette.error.main)},...t}),info:(r,t)=>(0,o.ZP)(r,{style:{padding:"16px",color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main)},iconTheme:{primary:e.palette.info.main,secondary:e.palette.getContrastText(e.palette.info.main)},...t})}}},90600:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var n=t(85893),o=t(60762),i=t(34375),a=t(71919),l=t(68573),s=t(14823),d=t(84166),u=t(51015),c=t(87536),p=t(47533),m=t(16310),v=t(7879),g=t(74538),x=t(52293),h=t(58898),f=t(11163);t(5843);var Z=t(81342),y=t(33251),j=t(9198),b=t.n(j),S=t(34273),k=t(22120);let _={status:"new",type:"task",name:"",task_form:void 0,sending_org:void 0,input_doc_number:"",output_doc_number:"",start_date:"",end_date:"",priority:"ordinary",department:void 0,signed_by:void 0,note:"",list_of_magazine:void 0},q=e=>m.Ry({type:m.Z_().oneOf(["task","application"]).required(String(e("errors.required"))),name:m.Z_().min(2,String(e("errors.minChars",{count:2}))).required(String(e("errors.required"))),task_form:m.Rx().typeError(String(e("errors.select"))).required(String(e("errors.required"))),sending_org:m.Rx().required(String(e("errors.required"))),input_doc_number:m.Z_().required(String(e("errors.required"))),output_doc_number:m.Z_().required(String(e("errors.required"))),start_date:m.Z_().required(String(e("errors.required"))),end_date:m.Z_().optional().default("").test("end-after-start",String(e("errors.endAfterStart")),function(e){let{start_date:r}=this.parent;return!r||!e||new Date(e)>=new Date(r)}),priority:m.Z_().oneOf(["ordinary","orgently"]).required(String(e("errors.required"))),department:m.Rx().required(String(e("errors.required"))),note:m.Z_().required(String(e("errors.required"))),list_of_magazine:m.Rx().required(String(e("errors.required"))),signed_by:m.Rx().required(String(e("errors.required")))});var C=()=>{let{t:e}=(0,k.$G)(),r=q(e),{control:t,handleSubmit:i}=(0,c.cI)({defaultValues:_,resolver:(0,p.X)(r)}),m=(0,h.Z)(),j=(0,f.useRouter)(),{user:C}=(0,S.a)(),{data:P}=(0,y.z)(g.Z.department,{page:1,perPage:100}),{data:T}=(0,y.z)(g.Z.users,{page:1,perPage:100}),{data:w}=(0,y.z)(g.Z.documentForm,{page:1,perPage:100}),R=w||[],{data:O}=(0,y.z)(g.Z.listOfMagazine,{page:1,perPage:100}),M=e=>"string"==typeof e?e:void 0,N=async r=>{try{var t;let n=await x.Do.post(g.Z.task,{...r,company:null==C?void 0:C.company_id}),o=null===(t=n.data)||void 0===t?void 0:t.id;m.success(String(e("tasks.toast.created"))),o?j.push("/tasks/update/".concat(o)):j.push("/tasks")}catch(r){m.error((null==r?void 0:r.message)||String(e("tasks.toast.createError")))}};return(0,n.jsx)(o.Z,{children:(0,n.jsx)(a.Z,{children:(0,n.jsx)(Z.Z,{children:(0,n.jsx)("form",{onSubmit:i(N),children:(0,n.jsxs)(l.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"type",control:t,render:r=>{let{field:t,fieldState:o}=r,i=[{value:"task",label:String(e("tasks.type.task"))},{value:"application",label:String(e("tasks.type.application"))}];return(0,n.jsx)(s.Z,{options:i,value:i.find(e=>e.value===t.value)||null,onChange:(e,r)=>t.onChange((null==r?void 0:r.value)||""),isOptionEqualToValue:(e,r)=>e.value===r.value,getOptionLabel:e=>e.label,renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.type")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"priority",control:t,render:r=>{let{field:t,fieldState:o}=r,i=[{value:"ordinary",label:String(e("tasks.priority.ordinary"))},{value:"orgently",label:String(e("tasks.priority.orgently"))}];return(0,n.jsx)(s.Z,{options:i,value:i.find(e=>e.value===t.value)||null,onChange:(e,r)=>t.onChange((null==r?void 0:r.value)||""),isOptionEqualToValue:(e,r)=>e.value===r.value,getOptionLabel:e=>e.label,renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.priority")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(c.Qr,{name:"name",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:o,fieldState:i}=r;return(0,n.jsx)(v.Z,{fullWidth:!0,label:String(e("tasks.form.name")),...o,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"task_form",control:t,rules:{required:String(e("errors.required"))},render:r=>{let{field:t,fieldState:o}=r;return(0,n.jsx)(s.Z,{options:R||[],value:(R||[]).find(e=>e.id===t.value)||null,onChange:(e,r)=>{var n;return t.onChange(null!==(n=null==r?void 0:r.id)&&void 0!==n?n:void 0)},isOptionEqualToValue:(e,r)=>e.id===r.id,getOptionLabel:e=>(null==e?void 0:e.name)||"",renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.taskForm")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"sending_org",control:t,rules:{required:!0},render:r=>{var t;let{field:o,fieldState:i}=r;return(0,n.jsx)(v.Z,{fullWidth:!0,label:String(e("tasks.form.sendingOrg")),...o,error:!!i.error,helperText:null===(t=i.error)||void 0===t?void 0:t.message})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"input_doc_number",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:o,fieldState:i}=r;return(0,n.jsx)(v.Z,{fullWidth:!0,label:String(e("tasks.form.inputDocNumber")),...o,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"output_doc_number",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:o,fieldState:i}=r;return(0,n.jsx)(v.Z,{fullWidth:!0,label:String(e("tasks.form.outputDocNumber")),...o,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"start_date",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:o,fieldState:i}=r,a=o.value?new Date(o.value):null;return(0,n.jsx)("div",{children:(0,n.jsx)(b(),{selected:a,onChange:e=>o.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,n.jsx)(v.Z,{label:String(e("tasks.form.startDate")),fullWidth:!0,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"end_date",control:t,rules:{required:String(e("errors.required"))},render:r=>{var t;let{field:o,fieldState:i}=r,a=o.value?new Date(o.value):null;return(0,n.jsx)("div",{children:(0,n.jsx)(b(),{selected:a,onChange:e=>o.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,n.jsx)(v.Z,{label:String(e("tasks.form.endDate")),fullWidth:!0,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"department",control:t,rules:{required:String(e("errors.required"))},render:r=>{let{field:t,fieldState:o}=r;return(0,n.jsx)(s.Z,{options:P||[],value:(P||[]).find(e=>e.id===t.value)||null,onChange:(e,r)=>{var n;return t.onChange(null!==(n=null==r?void 0:r.id)&&void 0!==n?n:void 0)},isOptionEqualToValue:(e,r)=>e.id===r.id,getOptionLabel:e=>(null==e?void 0:e.name)||"",renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.department")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"signed_by",control:t,rules:{required:String(e("errors.required"))},render:r=>{let{field:t,fieldState:o}=r;return(0,n.jsx)(s.Z,{options:T||[],value:(T||[]).find(e=>e.id===t.value)||null,onChange:(e,r)=>{var n;return t.onChange(null!==(n=null==r?void 0:r.id)&&void 0!==n?n:void 0)},isOptionEqualToValue:(e,r)=>e.id===r.id,getOptionLabel:e=>(null==e?void 0:e.fullname)||"",renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.signedBy")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(c.Qr,{name:"note",control:t,render:r=>{var t;let{field:o,fieldState:i}=r;return(0,n.jsx)(v.Z,{fullWidth:!0,multiline:!0,rows:3,label:String(e("tasks.form.note")),...o,error:!!i.error,helperText:M(null===(t=i.error)||void 0===t?void 0:t.message)})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(c.Qr,{name:"list_of_magazine",control:t,rules:{required:String(e("errors.required"))},render:r=>{let{field:t,fieldState:o}=r;return(0,n.jsx)(s.Z,{options:O||[],value:(O||[]).find(e=>e.id===t.value)||null,onChange:(e,r)=>{var n;return t.onChange(null!==(n=null==r?void 0:r.id)&&void 0!==n?n:void 0)},isOptionEqualToValue:(e,r)=>e.id===r.id,getOptionLabel:e=>(null==e?void 0:e.name)||"",renderInput:r=>{var t;return(0,n.jsx)(v.Z,{...r,fullWidth:!0,label:String(e("tasks.form.magazine")),error:!!o.error,helperText:M(null===(t=o.error)||void 0===t?void 0:t.message)})}})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsxs)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(u.Z,{type:"button",variant:"outlined",onClick:()=>j.back(),children:String(e("common.cancel"))}),(0,n.jsx)(u.Z,{type:"submit",variant:"contained",children:String(e("common.save"))})]})})]})})})})})},P=()=>{let{t:e}=(0,k.$G)();return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(i.Z,{title:String(e("tasks.create.title"))}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(C,{})})]})}}},function(e){e.O(0,[2785,7536,4021,2216,1863,2888,9774,179],function(){return e(e.s=66243)}),_N_E=e.O()}]);
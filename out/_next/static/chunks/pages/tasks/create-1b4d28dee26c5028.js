(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{66243:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/create",function(){return t(90600)}])},71919:function(e,r,t){"use strict";t.d(r,{Z:function(){return y}});var a=t(87462),n=t(63366),i=t(67294),o=t(86010),l=t(94780),s=t(77527),d=t(29567),u=t(1588),c=t(34867);function m(e){return(0,c.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var p=t(85893);let h=["className","component"],x=e=>{let{classes:r}=e;return(0,l.Z)({root:["root"]},m,r)},v=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var y=i.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=t,s=(0,n.Z)(t,h),u=(0,a.Z)({},t,{component:l}),c=x(u);return(0,p.jsx)(v,(0,a.Z)({as:l,className:(0,o.Z)(c.root,i),ownerState:u,ref:r},s))})},34375:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var a=t(63366),n=t(87462),i=t(67294),o=t(86010),l=t(94780),s=t(96788),d=t(29567),u=t(77527),c=t(1588),m=t(34867);function p(e){return(0,m.Z)("MuiCardHeader",e)}let h=(0,c.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var x=t(85893);let v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],y=e=>{let{classes:r}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,r)},Z=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,n.Z)({["& .".concat(h.title)]:r.title,["& .".concat(h.subheader)]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),j=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"});var b=i.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:i,avatar:l,className:u,component:c="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:h,title:b,titleTypographyProps:_}=t,M=(0,a.Z)(t,v),k=(0,n.Z)({},t,{component:c,disableTypography:m}),P=y(k),T=b;null==T||T.type===s.Z||m||(T=(0,x.jsx)(s.Z,(0,n.Z)({variant:l?"body2":"h5",className:P.title,component:"span",display:"block"},_,{children:T})));let C=p;return null==C||C.type===s.Z||m||(C=(0,x.jsx)(s.Z,(0,n.Z)({variant:l?"body2":"body1",className:P.subheader,color:"text.secondary",component:"span",display:"block"},h,{children:C}))),(0,x.jsxs)(Z,(0,n.Z)({className:(0,o.Z)(P.root,u),as:c,ref:r,ownerState:k},M,{children:[l&&(0,x.jsx)(j,{className:P.avatar,ownerState:k,children:l}),(0,x.jsxs)(g,{className:P.content,ownerState:k,children:[T,C]}),i&&(0,x.jsx)(f,{className:P.action,ownerState:k,children:i})]}))})},84166:function(e,r,t){"use strict";t.d(r,{Z:function(){return k}});var a=t(63366),n=t(87462),i=t(67294),o=t(86010),l=t(59766),s=t(94780),d=t(34867),u=t(13264),c=t(29628),m=t(39707),p=t(66500),h=t(95408),x=t(98700),v=t(85893);let y=["component","direction","spacing","divider","children","className","useFlexGap"],Z=(0,p.Z)(),j=(0,u.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root});function f(e){return(0,c.Z)({props:e,name:"MuiStack",defaultTheme:Z})}let g=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],b=({ownerState:e,theme:r})=>{let t=(0,n.Z)({display:"flex",flexDirection:"column"},(0,h.k9)({theme:r},(0,h.P$)({values:e.direction,breakpoints:r.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let a=(0,x.hB)(r),n=Object.keys(r.breakpoints.values).reduce((r,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(r[t]=!0),r),{}),i=(0,h.P$)({values:e.direction,base:n}),o=(0,h.P$)({values:e.spacing,base:n});"object"==typeof i&&Object.keys(i).forEach((e,r,t)=>{if(!i[e]){let a=r>0?i[t[r-1]]:"column";i[e]=a}}),t=(0,l.Z)(t,(0,h.k9)({theme:r},o,(r,t)=>e.useFlexGap?{gap:(0,x.NA)(a,r)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${g(t?i[t]:e.direction)}`]:(0,x.NA)(a,r)}}))}return(0,h.dt)(r.breakpoints,t)};var _=t(77527),M=t(29567),k=function(e={}){let{createStyledComponent:r=j,useThemeProps:t=f,componentName:l="MuiStack"}=e,u=()=>(0,s.Z)({root:["root"]},e=>(0,d.Z)(l,e),{}),c=r(b);return i.forwardRef(function(e,r){let l=t(e),s=(0,m.Z)(l),{component:d="div",direction:p="column",spacing:h=0,divider:x,children:Z,className:j,useFlexGap:f=!1}=s,g=(0,a.Z)(s,y),b=u();return(0,v.jsx)(c,(0,n.Z)({as:d,ownerState:{direction:p,spacing:h,useFlexGap:f},ref:r,className:(0,o.Z)(b.root,j)},g,{children:x?function(e,r){let t=i.Children.toArray(e).filter(Boolean);return t.reduce((e,a,n)=>(e.push(a),n<t.length-1&&e.push(i.cloneElement(r,{key:`separator-${n}`})),e),[])}(Z,x):Z}))})}({createStyledComponent:(0,_.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>r.root}),useThemeProps:e=>(0,M.Z)({props:e,name:"MuiStack"})})},58898:function(e,r,t){"use strict";var a=t(18745),n=t(86501);r.Z=()=>{let e=(0,a.Z)();return{success:(r,t)=>n.ZP.success(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.success.main,border:"1px solid ".concat(e.palette.success.main)},iconTheme:{primary:e.palette.success.main,secondary:e.palette.success.contrastText},...t}),error:(r,t)=>n.ZP.error(r,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.error.main,border:"1px solid ".concat(e.palette.error.main)},iconTheme:{primary:e.palette.error.main,secondary:e.palette.getContrastText(e.palette.error.main)},...t}),info:(r,t)=>(0,n.ZP)(r,{style:{padding:"16px",color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main)},iconTheme:{primary:e.palette.info.main,secondary:e.palette.getContrastText(e.palette.info.main)},...t})}}},90600:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return C}});var a=t(85893),n=t(60762),i=t(34375),o=t(71919),l=t(68573),s=t(15972),d=t(84166),u=t(73907),c=t(87536),m=t(47533),p=t(16310),h=t(7879),x=t(74538),v=t(52293),y=t(58898),Z=t(11163);t(5843);var j=t(81342),f=t(33251),g=t(9198),b=t.n(g),_=t(34273);let M={status:"new",type:"task",name:"",task_form:void 0,sending_org:void 0,input_doc_number:"",output_doc_number:"",start_date:"",end_date:"",priority:"ordinary",department:void 0,signed_by:void 0,note:"",list_of_magazine:void 0},k=p.Ry({type:p.Z_().oneOf(["task","application"]).required("Majburiy maydon"),name:p.Z_().min(2,"Kamida 2 ta belgi").required("Majburiy maydon"),task_form:p.Rx().typeError("Tanlang").required("Majburiy maydon"),sending_org:p.Rx().required("Majburiy maydon"),input_doc_number:p.Z_().required("Majburiy maydon"),output_doc_number:p.Z_().required("Majburiy maydon"),start_date:p.Z_().required("Majburiy maydon"),end_date:p.Z_().optional().default("").test("end-after-start","Tugash sanasi boshlanishdan keyin boâ€˜lsin",function(e){let{start_date:r}=this.parent;return!r||!e||new Date(e)>=new Date(r)}),priority:p.Z_().oneOf(["ordinary","orgently"]).required("Majburiy maydon"),department:p.Rx().required("Majburiy maydon"),note:p.Z_().required("Majburiy maydon"),list_of_magazine:p.Rx().required("Majburiy maydon"),signed_by:p.Rx().required("Majburiy maydon")});var P=()=>{let{control:e,handleSubmit:r}=(0,c.cI)({defaultValues:M,resolver:(0,m.X)(k)}),t=(0,y.Z)(),i=(0,Z.useRouter)(),{user:p}=(0,_.a)(),{data:g}=(0,f.z)(x.Z.department,{page:1,perPage:100}),{data:P}=(0,f.z)(x.Z.users,{page:1,perPage:100}),{data:T}=(0,f.z)(x.Z.company,{page:1,perPage:100}),{data:C}=(0,f.z)(x.Z.documentForm,{page:1,perPage:100}),w=C||[],{data:q}=(0,f.z)(x.Z.listOfMagazine,{page:1,perPage:100}),R=e=>"string"==typeof e?e:void 0,S=async e=>{try{var r;let a=await v.Do.post(x.Z.task,{...e,company:null==p?void 0:p.company_id}),n=null===(r=a.data)||void 0===r?void 0:r.id;t.success("Task created"),n?i.push("/tasks/update/".concat(n)):i.push("/tasks")}catch(e){t.error((null==e?void 0:e.message)||"Error creating task")}};return(0,a.jsx)(n.Z,{children:(0,a.jsx)(o.Z,{children:(0,a.jsx)(j.Z,{children:(0,a.jsx)("form",{onSubmit:r(S),children:(0,a.jsxs)(l.ZP,{container:!0,spacing:4,children:[(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"type",control:e,render:e=>{let{field:r}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Tip (Type)",...r,children:[(0,a.jsx)(s.Z,{value:"task",children:"Task"}),(0,a.jsx)(s.Z,{value:"application",children:"Application"})]})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"priority",control:e,render:e=>{let{field:r}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Prioritet (Priority)",...r,children:[(0,a.jsx)(s.Z,{value:"ordinary",children:"Ordinary"}),(0,a.jsx)(s.Z,{value:"orgently",children:"Urgently"})]})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Qr,{name:"name",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Task raqami/nomi",...t,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"task_form",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Hujjat shakli",...t,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message),children:[(0,a.jsx)(s.Z,{value:0,children:"---"}),(w||[]).map(e=>(0,a.jsx)(s.Z,{value:e.id,children:e.name},e.id))]})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"sending_org",control:e,rules:{required:!0},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,select:!0,label:"Yuboruvchi (sending_org)",...t,error:!!n.error,helperText:null===(r=n.error)||void 0===r?void 0:r.message,children:(T||[]).map(e=>(0,a.jsx)(s.Z,{value:e.id,children:e.name},e.id))})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"input_doc_number",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Kirish raqami (input_doc_number)",...t,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"output_doc_number",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,label:"Chiqish raqami (output_doc_number)",...t,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"start_date",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e,i=t.value?new Date(t.value):null;return(0,a.jsx)("div",{children:(0,a.jsx)(b(),{selected:i,onChange:e=>t.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,a.jsx)(h.Z,{label:"Boshlanish sanasi",fullWidth:!0,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"end_date",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e,i=t.value?new Date(t.value):null;return(0,a.jsx)("div",{children:(0,a.jsx)(b(),{selected:i,onChange:e=>t.onChange(e?e.toISOString().slice(0,10):""),dateFormat:"yyyy-MM-dd",customInput:(0,a.jsx)(h.Z,{label:"Tugash sanasi",fullWidth:!0,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)}),showPopperArrow:!0,isClearable:!0})})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"department",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{select:!0,fullWidth:!0,label:"Bo'lim (department)",...t,error:!!n.error,helperText:null===(r=n.error)||void 0===r?void 0:r.message,children:(g||[]).map(e=>(0,a.jsx)(s.Z,{value:e.id,children:e.name},e.id))})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"signed_by",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{select:!0,fullWidth:!0,label:"Imzolovchi (signed_by)",...t,error:!!n.error,helperText:null===(r=n.error)||void 0===r?void 0:r.message,children:(P||[]).map(e=>(0,a.jsx)(s.Z,{value:e.id,children:e.fullname},e.id))})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Qr,{name:"note",control:e,render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsx)(h.Z,{fullWidth:!0,multiline:!0,rows:3,label:"Izoh (note)",...t,error:!!n.error,helperText:R(null===(r=n.error)||void 0===r?void 0:r.message)})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(c.Qr,{name:"list_of_magazine",control:e,rules:{required:"Majburiy maydon"},render:e=>{var r;let{field:t,fieldState:n}=e;return(0,a.jsxs)(h.Z,{select:!0,fullWidth:!0,label:"Jurnal (List of Magazine)",...t,error:!!n.error,helperText:null===(r=n.error)||void 0===r?void 0:r.message,children:[(0,a.jsx)(s.Z,{value:0,children:"---"}),(q||[]).map(e=>(0,a.jsx)(s.Z,{value:e.id,children:e.name},e.id))]})}})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsxs)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,a.jsx)(u.Z,{type:"button",variant:"outlined",onClick:()=>i.back(),children:"Bekor qilish"}),(0,a.jsx)(u.Z,{type:"submit",variant:"contained",children:"Saqlash"})]})})]})})})})})},T=t(22120),C=()=>{let{t:e}=(0,T.$G)();return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(i.Z,{title:String(e("tasks.create.title"))}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(P,{})})]})}}},function(e){e.O(0,[7536,2712,4021,2216,1863,2888,9774,179],function(){return e(e.s=66243)}),_N_E=e.O()}]);
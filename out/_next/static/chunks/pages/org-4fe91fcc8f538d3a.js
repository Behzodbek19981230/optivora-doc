(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{67873:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/org",function(){return n(24961)}])},34375:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(63366),i=n(87462),a=n(67294),o=n(86010),l=n(94780),s=n(96788),d=n(29567),c=n(77527),m=n(1588),u=n(34867);function g(e){return(0,u.Z)("MuiCardHeader",e)}let x=(0,m.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=n(85893);let p=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Z=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},g,t)},f=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,i.Z)({["& .".concat(x.title)]:t.title,["& .".concat(x.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),S=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),v=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var b=a.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:a,avatar:l,className:c,component:m="div",disableTypography:u=!1,subheader:g,subheaderTypographyProps:x,title:b,titleTypographyProps:y}=n,C=(0,r.Z)(n,p),w=(0,i.Z)({},n,{component:m,disableTypography:u}),_=Z(w),P=b;null==P||P.type===s.Z||u||(P=(0,h.jsx)(s.Z,(0,i.Z)({variant:l?"body2":"h5",className:_.title,component:"span",display:"block"},y,{children:P})));let z=g;return null==z||z.type===s.Z||u||(z=(0,h.jsx)(s.Z,(0,i.Z)({variant:l?"body2":"body1",className:_.subheader,color:"text.secondary",component:"span",display:"block"},x,{children:z}))),(0,h.jsxs)(f,(0,i.Z)({className:(0,o.Z)(_.root,c),as:m,ref:t,ownerState:w},C,{children:[l&&(0,h.jsx)(j,{className:_.avatar,ownerState:w,children:l}),(0,h.jsxs)(v,{className:_.content,ownerState:w,children:[P,z]}),a&&(0,h.jsx)(S,{className:_.action,ownerState:w,children:a})]}))})},82071:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:t=>{let{from:n,to:r,count:i}=t;return"".concat(n,"â€“").concat(r," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==i?i:">".concat(r))}}})},33251:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(30202),i=n(33934),a=n(52293);let o=function(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=(0,r.NL)(),d=["list",e,o],c=Object.fromEntries(Object.entries(o).filter(e=>{let[,t]=e;return void 0!==t})),{data:m,isLoading:u,error:g}=(0,i.a)({queryKey:d,queryFn:async()=>{var t,n,r;let i=(await a.Do.get(e,c)).data,o=Array.isArray(i)?i:null!==(n=null==i?void 0:i.results)&&void 0!==n?n:[],l=Array.isArray(i)?o.length:null!==(r=null==i?void 0:null===(t=i.pagination)||void 0===t?void 0:t.total)&&void 0!==r?r:o.length;return{items:o,total:l}},enabled:l,staleTime:3e4});return{data:null!==(t=null==m?void 0:m.items)&&void 0!==t?t:[],total:null!==(n=null==m?void 0:m.total)&&void 0!==n?n:0,loading:u,error:g,mutate:()=>{s.invalidateQueries({queryKey:d})}}}},24961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(85893),i=n(67294),a=n(60762),o=n(43374),l=n(28907),s=n(90642),d=n(34375),c=n(52857),m=n(51015),u=n(16127),g=n(83727),x=n(75673),h=n(74538),p=n(33251),Z=n(52293),f=n(86501),j=n(87536),S=n(33453),v=n(92365),b=n(40110),y=n(96727),C=n(68573),w=n(7879),_=n(22120);let P={name:"",name_en:"",name_uz:"",name_ru:""};var z=e=>{let{open:t,onClose:n,onSaved:a,mode:o,item:l}=e,{t:s}=(0,_.$G)(),{control:d,handleSubmit:c,reset:u,formState:{isSubmitting:g}}=(0,j.cI)({defaultValues:P});(0,i.useEffect)(()=>{"edit"===o&&l?u(l):"create"===o&&u(P)},[o,l,u]);let x=async e=>{try{"create"===o?await Z.Do.post(h.Z.department,e):"edit"===o&&l&&await Z.Do.put(h.Z.departmentById(l.id),e),a(),n(),f.ZP.success(String(s("org.departments.toast.saved")))}catch(e){console.error("Failed to save department:",e)}};return(0,r.jsxs)(S.Z,{open:t,onClose:g?void 0:n,fullWidth:!0,maxWidth:"sm",children:[(0,r.jsx)(v.Z,{children:"create"===o?String(s("org.departments.create.title")):String(s("org.departments.edit.title"))}),(0,r.jsxs)("form",{onSubmit:c(x),children:[(0,r.jsx)(b.Z,{children:(0,r.jsxs)(C.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.departments.form.name")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_en",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameEn")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_uz",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameUz")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_ru",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameRu")),...t})}})})]})}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(m.Z,{type:"button",variant:"tonal",color:"secondary",onClick:n,disabled:g,children:String(s("common.cancel"))}),(0,r.jsx)(m.Z,{type:"submit",disabled:g,children:g?String(s("common.saving")):String(s("common.save"))})]})]})]})},W=n(82071),N=()=>{let{t:e}=(0,_.$G)(),[t,n]=(0,i.useState)({page:0,pageSize:10}),[a,o]=(0,i.useState)(""),{data:l=[],total:s,loading:j,mutate:S}=(0,p.z)(h.Z.department,{page:t.page+1,limit:t.pageSize,search:a}),[v,b]=(0,i.useState)(!1),[y,C]=(0,i.useState)("create"),[w,P]=(0,i.useState)(null),[N,R]=(0,i.useState)(!1),k=e=>{C("edit"),P(e),b(!0)},E=e=>{P(e),R(!0)},M=async()=>{w&&(await Z.Do.delete(h.Z.departmentById(w.id)),S(),R(!1),f.ZP.success(String(e("org.departments.toast.deleted"))))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:String(e("org.departments.title")),action:(0,r.jsx)(m.Z,{variant:"contained",startIcon:(0,r.jsx)(x.Z,{icon:"tabler:plus"}),onClick:()=>{C("create"),P(null),b(!0)},children:String(e("org.departments.create.title"))})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u._,{autoHeight:!0,rowHeight:56,rows:l,columns:[{field:"name",headerName:String(e("org.departments.table.name")),flex:.25,minWidth:200},{field:"name_en",headerName:String(e("org.common.nameEn")),flex:.2,minWidth:160},{field:"name_uz",headerName:String(e("org.common.nameUz")),flex:.2,minWidth:160},{field:"name_ru",headerName:String(e("org.common.nameRu")),flex:.2,minWidth:160},{field:"actions",headerName:String(e("common.actions")),flex:.15,minWidth:140,sortable:!1,renderCell:e=>{let t=e.row;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{size:"small",onClick:()=>k(t),children:(0,r.jsx)(x.Z,{icon:"tabler:edit"})}),(0,r.jsx)(c.Z,{size:"small",color:"error",onClick:()=>E(t),children:(0,r.jsx)(x.Z,{icon:"tabler:trash"})})]})}}],loading:j,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:t,onPaginationModelChange:n,getRowId:e=>e.id,localeText:(0,W.x)(e),rowCount:s})}),(0,r.jsx)(z,{open:v,onClose:()=>b(!1),onSaved:S,mode:y,item:w}),(0,r.jsx)(g.Z,{open:N,onClose:()=>R(!1),onConfirm:M,title:String(e("org.departments.deleteConfirm.title")),description:w?String(e("org.departments.deleteConfirm.description",{name:w.name_uz||w.name,id:w.id})):void 0})]})},R=n(15972);let k={name:"",name_en:"",name_uz:"",name_ru:"",department:0};var E=e=>{let{open:t,onClose:n,onSaved:a,mode:o,item:l}=e,{t:s}=(0,_.$G)(),{control:d,handleSubmit:c,reset:u,formState:{isSubmitting:g}}=(0,j.cI)({defaultValues:k}),[x,p]=(0,i.useState)([]),[P,z]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(t){z(!0);try{var e;let t=await Z.Do.get("".concat(h.Z.department,"?perPage=100")),n=Array.isArray(t.data)?t.data:Array.isArray(null===(e=t.data)||void 0===e?void 0:e.results)?t.data.results:[];p(n)}finally{z(!1)}}})()},[t]),(0,i.useEffect)(()=>{"edit"===o&&l?u(l):"create"===o&&u(k)},[o,l,u]);let W=async e=>{try{"create"===o?await Z.Do.post(h.Z.position,e):"edit"===o&&l&&await Z.Do.put(h.Z.positionById(l.id),e),a(),n(),f.ZP.success(String(s("org.positions.toast.saved")))}catch(e){console.error("Failed to save position:",e)}};return(0,r.jsxs)(S.Z,{open:t,onClose:g?void 0:n,fullWidth:!0,maxWidth:"sm",children:[(0,r.jsx)(v.Z,{children:"create"===o?String(s("org.positions.create.title")):String(s("org.positions.edit.title"))}),(0,r.jsxs)("form",{onSubmit:c(W),children:[(0,r.jsx)(b.Z,{children:(0,r.jsxs)(C.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.positions.form.name")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_en",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameEn")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_uz",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameUz")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"name_ru",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameRu")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(j.Qr,{name:"department",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{select:!0,fullWidth:!0,label:String(s("org.positions.form.department")),...t,value:t.value||"",children:P?(0,r.jsx)(R.Z,{value:"",disabled:!0,children:String(s("common.loading"))}):x.length>0?x.map(e=>(0,r.jsx)(R.Z,{value:e.id,children:e.name_uz||e.name},e.id)):(0,r.jsx)(R.Z,{value:"",disabled:!0,children:String(s("org.positions.form.noDepartments"))})})}})})]})}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(m.Z,{type:"button",variant:"tonal",color:"secondary",onClick:n,disabled:g,children:String(s("common.cancel"))}),(0,r.jsx)(m.Z,{type:"submit",disabled:g,children:g?String(s("common.saving")):String(s("common.save"))})]})]})]})},M=()=>{let{t:e}=(0,_.$G)(),[t,n]=(0,i.useState)({page:0,pageSize:10}),[a,o]=(0,i.useState)(""),{data:l=[],total:s,loading:j,mutate:S}=(0,p.z)(h.Z.position,{page:t.page+1,limit:t.pageSize,search:a}),[v,b]=(0,i.useState)(!1),[y,C]=(0,i.useState)("create"),[w,P]=(0,i.useState)(null),[z,N]=(0,i.useState)(!1),R=e=>{C("edit"),P(e),b(!0)},k=e=>{P(e),N(!0)},M=async()=>{w&&(await Z.Do.delete(h.Z.positionById(w.id)),S(),N(!1),f.ZP.success(String(e("org.positions.toast.deleted"))))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:String(e("org.positions.title")),action:(0,r.jsx)(m.Z,{variant:"contained",startIcon:(0,r.jsx)(x.Z,{icon:"tabler:plus"}),onClick:()=>{C("create"),P(null),b(!0)},children:String(e("org.positions.create.title"))})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u._,{autoHeight:!0,rowHeight:56,rows:l,columns:[{field:"name",headerName:String(e("org.positions.table.name")),flex:.22,minWidth:180},{field:"name_en",headerName:String(e("org.common.nameEn")),flex:.18,minWidth:140},{field:"name_uz",headerName:String(e("org.common.nameUz")),flex:.18,minWidth:140},{field:"name_ru",headerName:String(e("org.common.nameRu")),flex:.18,minWidth:140},{field:"department",headerName:String(e("org.positions.table.department")),flex:.2,minWidth:160,valueGetter:e=>{var t;return(null===(t=e.row.department_detail)||void 0===t?void 0:t.name_uz)||e.row.department}},{field:"actions",headerName:String(e("common.actions")),flex:.16,minWidth:140,sortable:!1,renderCell:e=>{let t=e.row;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{size:"small",onClick:()=>R(t),children:(0,r.jsx)(x.Z,{icon:"tabler:edit"})}),(0,r.jsx)(c.Z,{size:"small",color:"error",onClick:()=>k(t),children:(0,r.jsx)(x.Z,{icon:"tabler:trash"})})]})}}],loading:j,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:t,onPaginationModelChange:n,getRowId:e=>e.id,localeText:(0,W.x)(e),rowCount:s})}),(0,r.jsx)(E,{open:v,onClose:()=>b(!1),onSaved:S,mode:y,item:w}),(0,r.jsx)(g.Z,{open:z,onClose:()=>N(!1),onConfirm:M,title:String(e("org.positions.deleteConfirm.title")),description:w?String(e("org.positions.deleteConfirm.description",{name:w.name_uz||w.name,id:w.id})):void 0})]})},H=()=>{let[e,t]=(0,i.useState)(0),{t:n}=(0,_.$G)();return(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(o.Z,{value:e,onChange:(e,n)=>t(n),children:[(0,r.jsx)(l.Z,{label:String(n("org.tabs.departments"))}),(0,r.jsx)(l.Z,{label:String(n("org.tabs.positions"))})]}),(0,r.jsxs)(s.Z,{sx:{p:2},children:[0===e&&(0,r.jsx)(N,{},"tab-".concat(e)),1===e&&(0,r.jsx)(M,{},"tab-".concat(e))]})]})},I=()=>(0,r.jsx)(H,{})},83727:function(e,t,n){"use strict";var r=n(85893),i=n(33453),a=n(92365),o=n(40110),l=n(96727),s=n(51015),d=n(96788),c=n(22120);t.Z=e=>{let{open:t,onClose:n,onConfirm:m,confirming:u,title:g,description:x}=e,{t:h}=(0,c.$G)();return(0,r.jsxs)(i.Z,{open:t,onClose:u?void 0:n,fullWidth:!0,maxWidth:"xs",children:[(0,r.jsx)(a.Z,{children:g||String(h("common.deleteConfirm.title"))}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(d.Z,{variant:"body2",children:x||String(h("common.deleteConfirm.description"))})}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(s.Z,{variant:"tonal",color:"secondary",onClick:n,disabled:!!u,children:String(h("common.cancel"))}),(0,r.jsx)(s.Z,{color:"error",onClick:()=>m(),disabled:!!u,children:u?String(h("common.deleting")):String(h("common.delete"))})]})]})}}},function(e){e.O(0,[2785,7536,6127,3035,2888,9774,179],function(){return e(e.s=67873)}),_N_E=e.O()}]);
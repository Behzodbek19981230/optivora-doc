(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9941],{51128:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/commands",function(){return t(75406)}])},82071:function(e,n,t){"use strict";t.d(n,{x:function(){return i}});let i=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:n=>{let{from:t,to:i,count:a}=n;return"".concat(t,"â€“").concat(i," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==a?a:">".concat(i))}}})},33251:function(e,n,t){"use strict";t.d(n,{z:function(){return l}});var i=t(30202),a=t(33934),o=t(52293);let l=function(e){var n,t;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],d=(0,i.NL)(),c=["list",e,l],s=Object.fromEntries(Object.entries(l).filter(e=>{let[,n]=e;return void 0!==n})),{data:m,isLoading:u,error:g}=(0,a.a)({queryKey:c,queryFn:async()=>{var n,t,i;let a=(await o.Do.get(e,s)).data,l=Array.isArray(a)?a:null!==(t=null==a?void 0:a.results)&&void 0!==t?t:[],r=Array.isArray(a)?l.length:null!==(i=null==a?void 0:null===(n=a.pagination)||void 0===n?void 0:n.total)&&void 0!==i?i:l.length;return{items:l,total:r}},enabled:r,staleTime:3e4});return{data:null!==(n=null==m?void 0:m.items)&&void 0!==n?n:[],total:null!==(t=null==m?void 0:m.total)&&void 0!==t?t:0,loading:u,error:g,mutate:()=>{d.invalidateQueries({queryKey:c})}}}},75406:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var i=t(85893),a=t(67294),o=t(52857),l=t(60762),r=t(34375),d=t(73907),c=t(16127),s=t(75673),m=t(74538),u=t(33251),g=t(52293),h=t(86501),f=t(33453),v=t(92365),x=t(40110),b=t(96727),p=t(96788),w=t(22120),S=e=>{let{open:n,onClose:t,onConfirm:a,confirming:o,title:l,description:r}=e,{t:c}=(0,w.$G)();return(0,i.jsxs)(f.Z,{open:n,onClose:o?void 0:t,fullWidth:!0,maxWidth:"xs",children:[(0,i.jsx)(v.Z,{children:l||String(c("common.deleteConfirmTitle"))}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(p.Z,{variant:"body2",children:r||String(c("common.deleteConfirmDescription"))})}),(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(d.Z,{variant:"tonal",color:"secondary",onClick:t,disabled:!!o,children:String(c("common.cancel"))}),(0,i.jsx)(d.Z,{color:"error",onClick:()=>a(),disabled:!!o,children:o?String(c("common.deleting")):String(c("common.delete"))})]})]})},j=t(11163),_=t(30381),C=t.n(_),Z=t(82071),y=t(34273),N=()=>{var e;let n=(0,j.useRouter)(),{t}=(0,w.$G)(),{user:f}=(0,y.a)(),[v,x]=(0,a.useState)({page:0,pageSize:10}),{data:b=[],loading:p,mutate:_,total:N}=(0,u.z)(m.Z.command,{page:v.page+1,limit:v.pageSize}),[P,k]=(0,a.useState)(null),[R,W]=(0,a.useState)(!1),z=e=>{n.push("/commands/".concat(e.id))},D=e=>{k(e),W(!0)},E=async()=>{P&&(await g.Do.delete(m.Z.commandById(P.id)),_(),W(!1),h.ZP.success(String(t("commands.toast.deleted"))))},O=[{field:"command_number",headerName:String(t("commands.table.number")),flex:.18,minWidth:160},{field:"basis",headerName:String(t("commands.table.basis")),flex:.3,minWidth:240},{field:"comment",headerName:String(t("commands.table.comment")),flex:.25,minWidth:200},{field:"company_detail",headerName:String(t("commands.table.company")),flex:.18,minWidth:160,valueGetter:e=>e.row.company_detail?e.row.company_detail.name:""},{field:"created_time",headerName:String(t("commands.table.createdAt")),flex:.2,minWidth:180,valueGetter:e=>e.row.created_time?C()(e.row.created_time).format("YYYY-MM-DD HH:mm"):""},{field:"actions",headerName:String(t("common.actions")),flex:.18,minWidth:160,sortable:!1,renderCell:e=>{var n;let t=e.row;return(0,i.jsx)(i.Fragment,{children:(null==f?void 0:null===(n=f.role_detail)||void 0===n?void 0:n.some(e=>"Performer"!==e.name))&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{size:"small","aria-label":"edit",onClick:()=>z(t),children:(0,i.jsx)(s.Z,{icon:"tabler:edit"})}),(0,i.jsx)(o.Z,{size:"small","aria-label":"delete",color:"error",onClick:()=>D(t),children:(0,i.jsx)(s.Z,{icon:"tabler:trash"})})]})})}}];return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(r.Z,{title:String(t("commands.title")),action:(null==f?void 0:null===(e=f.role_detail)||void 0===e?void 0:e.some(e=>"Performer"!==e.name))&&(0,i.jsx)(d.Z,{variant:"contained",onClick:()=>n.push("/commands/create"),children:String(t("commands.create.title"))})}),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c._,{autoHeight:!0,rowHeight:56,rows:b,columns:O,loading:p,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:v,onPaginationModelChange:x,getRowId:e=>e.id,rowCount:N,localeText:(0,Z.x)(t)})}),(0,i.jsx)(S,{open:R,onClose:()=>W(!1),onConfirm:E,title:String(t("commands.deleteConfirm.title")),description:P?"ID: ".concat(P.id):void 0})]})};let P=()=>(0,i.jsx)(N,{});P.acl={action:"read",subject:"cms"},P.authGuard=!0;var k=P}},function(e){e.O(0,[4885,2785,7605,2888,9774,179],function(){return e(e.s=51128)}),_N_E=e.O()}]);
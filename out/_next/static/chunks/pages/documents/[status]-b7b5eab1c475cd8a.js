(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9083],{62036:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents/[status]",function(){return n(13407)}])},58898:function(e,t,n){"use strict";var a=n(18745),r=n(86501);t.Z=()=>{let e=(0,a.Z)();return{success:(t,n)=>r.ZP.success(t,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.success.main,border:"1px solid ".concat(e.palette.success.main)},iconTheme:{primary:e.palette.success.main,secondary:e.palette.success.contrastText},...n}),error:(t,n)=>r.ZP.error(t,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.error.main,border:"1px solid ".concat(e.palette.error.main)},iconTheme:{primary:e.palette.error.main,secondary:e.palette.getContrastText(e.palette.error.main)},...n}),info:(t,n)=>(0,r.ZP)(t,{style:{padding:"16px",color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main)},iconTheme:{primary:e.palette.info.main,secondary:e.palette.getContrastText(e.palette.info.main)},...n})}}},82071:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});let a=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:t=>{let{from:n,to:a,count:r}=t;return"".concat(n,"â€“").concat(a," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==r?r:">".concat(a))}}})},74538:function(e,t){"use strict";let n=e=>Array.isArray(e)?e[0]:null==e?"":String(e);t.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:e=>"/company-profile/".concat(n(e)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:e=>"/district/".concat(n(e),"/"),region:"/region/",regionById:e=>"/region/".concat(n(e),"/"),countryById:e=>"/country/".concat(n(e),"/"),countryFields:"/country/fields/",command:"/command/",commandById:e=>"/command/".concat(n(e)),industries:"/industry",industryById:e=>"/industry/".concat(n(e)),industryFields:"/industry/fields",users:"/user",userById:e=>"/user/".concat(n(e)),equipmentCategories:"/equipment-category",equipmentCategoryById:e=>"/equipment-category/".concat(n(e)),services:"/service",serviceById:e=>"/service/".concat(n(e)),partners:"/partner",partnerById:e=>"/partner/".concat(n(e)),company:"/company/",companyById:e=>"/company/".concat(n(e)),replyLetter:"/reply-letter/",replyLetterById:e=>"/reply-letter/".concat(n(e)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:e=>"/reply-letter-file/".concat(n(e)),documents:"/documents/",documentById:e=>"/documents/".concat(n(e)),documentForm:"/document-form/",documentFormById:e=>"/document-form/".concat(n(e)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:e=>"/list-of-magazine/".concat(n(e)),task:"/task/",taskById:e=>"/task/".concat(n(e)),taskPart:"/task-part/",taskPartById:e=>"/task-part/".concat(n(e)),taskEvent:"/task-event/",taskEventById:e=>"/task-event/".concat(n(e)),taskComment:"/task-comment/",taskCommentById:e=>"/task-comment/".concat(n(e)),taskAttachment:"/task-attachment/",taskAttachmentById:e=>"/task-attachment/".concat(n(e)),department:"/department/",departmentById:e=>"/department/".concat(n(e)),position:"/position/",positionById:e=>"/position/".concat(n(e)),projects:"/project",projectById:e=>"/project/".concat(n(e)),projectDeliverables:"/project-deliverable",projectDeliverableById:e=>"/project-deliverable/".concat(n(e)),projectImages:"/project-image",projectImageById:e=>"/project-image/".concat(n(e)),stats:"/stats",statById:e=>"/stats/".concat(n(e)),faqs:"/faq",faqById:e=>"/faq/".concat(n(e)),inquiries:"/inquiry",inquiryById:e=>"/inquiry/".concat(n(e)),downloads:"/command-file/",downloadById:e=>"/command-file/".concat(n(e)),news:"/news-post",newsById:e=>"/news-post/".concat(n(e)),testimonials:"/testimonial",testimonialById:e=>"/testimonial/".concat(n(e)),ourWork:"/our-work",ourWorkById:e=>"/our-work/".concat(n(e)),applicationApprovedByID:e=>"/application-approved/".concat(n(e)),limitData:"/limit-data"}},33251:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var a=n(30202),r=n(33934),o=n(52293);let i=function(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,a.NL)(),c=["list",e,i],l=Object.fromEntries(Object.entries(i).filter(e=>{let[,t]=e;return void 0!==t})),{data:d,isLoading:u,error:m}=(0,r.a)({queryKey:c,queryFn:async()=>{var t,n,a;let r=(await o.Do.get(e,l)).data,i=Array.isArray(r)?r:null!==(n=null==r?void 0:r.results)&&void 0!==n?n:[],s=Array.isArray(r)?i.length:null!==(a=null==r?void 0:null===(t=r.pagination)||void 0===t?void 0:t.total)&&void 0!==a?a:i.length;return{items:i,total:s}},staleTime:3e4});return{data:null!==(t=null==d?void 0:d.items)&&void 0!==t?t:[],total:null!==(n=null==d?void 0:d.total)&&void 0!==n?n:0,loading:u,error:m,mutate:()=>{s.invalidateQueries({queryKey:c})}}}},13407:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return M},default:function(){return K}});var a,r,o=n(85893),i=n(60762),s=n(34375),c=n(71919),l=n(67294),d=n(90642),u=n(43374),m=n(28907),p=n(84166),y=n(81873),g=n(11163),x=n(21038),h=n(52857),f=n(51015),k=n(33453),v=n(92365),j=n(40110),w=n(96788),Z=n(68573),b=n(81359),I=n(96727),S=n(28634),B=n(75673),_=n(33251),P=n(74538),C=n(41664),z=n.n(C),N=n(22120),q=n(52293),R=n(58898),T=n(34273),E=n(82071);let W=e=>{switch(e){case"new":return"info";case"in_progress":return"primary";case"on_review":case"returned":return"warning";case"done":return"success";case"cancelled":return"error";default:return"default"}};var A=e=>{let{status:t}=e,n=(0,g.useRouter)(),{t:a}=(0,N.$G)(),[r,s]=(0,l.useState)({page:0,pageSize:10}),u=(0,R.Z)(),{user:m}=(0,T.a)(),[C,A]=(0,l.useState)(!1),[F,O]=(0,l.useState)("task"),[D,M]=(0,l.useState)(!1),{data:K=[],total:L,loading:G}=(0,_.z)(P.Z.task,{page:r.page+1,perPage:r.pageSize,status:t}),H=[{field:"id",headerName:String(a("common.id")),width:90},{field:"name",headerName:String(a("documents.table.name")),flex:.3,minWidth:180},{field:"status",headerName:String(a("documents.table.status")),flex:.2,minWidth:140,renderCell:e=>{let t=e.row.status;return(0,o.jsx)(y.Z,{label:a("documents.status.".concat(t)),color:W(t),size:"small",variant:"outlined"})}},{field:"type",headerName:String(a("documents.table.type")),flex:.15,minWidth:120,renderCell:e=>{let t=e.row.type;return a("tasks.type.".concat(t))}},{field:"priority",headerName:String(a("documents.table.priority")),flex:.15,minWidth:120,renderCell:e=>{let t=e.row.priority;return(0,o.jsx)(y.Z,{label:a("tasks.priority.".concat(t)),color:"ordinary"===t?"primary":"warning",size:"small"})}},{field:"start_date",headerName:String(a("documents.table.start")),flex:.15,minWidth:130},{field:"end_date",headerName:String(a("documents.table.end")),flex:.15,minWidth:130},{field:"actions",headerName:String(a("common.actions")),width:120,sortable:!1,renderCell:e=>{let t=e.row.id;return(0,o.jsxs)(p.Z,{direction:"row",spacing:1,children:[(0,o.jsx)(x.Z,{title:String(a("common.view")),children:(0,o.jsx)(h.Z,{size:"small",component:z(),href:"/tasks/view/".concat(t),children:(0,o.jsx)(B.Z,{icon:"tabler:eye"})})}),(0,o.jsx)(x.Z,{title:String(a("common.edit")),children:(0,o.jsx)(h.Z,{size:"small",component:z(),href:"/tasks/update/".concat(t),children:(0,o.jsx)(B.Z,{icon:"tabler:pencil"})})})]})}}];return(0,o.jsx)(i.Z,{variant:"outlined",children:(0,o.jsxs)(c.Z,{sx:{pb:0},children:[(0,o.jsx)(p.Z,{direction:"row",justifyContent:"flex-end",sx:{mb:2},children:(0,o.jsx)(f.Z,{variant:"contained",onClick:()=>A(!0),children:String(a("tasks.create.title"))})}),(0,o.jsxs)(k.Z,{open:C,onClose:D?void 0:()=>A(!1),fullWidth:!0,maxWidth:"sm",children:[(0,o.jsx)(v.Z,{children:String(a("tasks.create.modal.title"))}),(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(w.Z,{variant:"body2",sx:{color:"text.secondary",mb:4},children:String(a("tasks.create.modal.subtitle"))}),(0,o.jsxs)(Z.ZP,{container:!0,spacing:3,children:[(0,o.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,o.jsx)(i.Z,{variant:"outlined",sx:{borderColor:"task"===F?"primary.main":"divider",bgcolor:"task"===F?"primary.lighter":"background.paper"},children:(0,o.jsx)(b.Z,{onClick:()=>O("task"),children:(0,o.jsxs)(c.Z,{sx:{height:100},children:[(0,o.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,o.jsx)(B.Z,{icon:"tabler:clipboard-list"}),(0,o.jsx)(w.Z,{variant:"h6",children:String(a("tasks.type.task"))})]}),(0,o.jsx)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(a("tasks.create.modal.taskHint"))})]})})})}),(0,o.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,o.jsx)(i.Z,{variant:"outlined",sx:{borderColor:"application"===F?"primary.main":"divider",bgcolor:"application"===F?"primary.lighter":"background.paper"},children:(0,o.jsx)(b.Z,{onClick:()=>O("application"),children:(0,o.jsxs)(c.Z,{sx:{height:100},children:[(0,o.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,o.jsx)(B.Z,{icon:"tabler:file-text"}),(0,o.jsx)(w.Z,{variant:"h6",children:String(a("tasks.type.application"))})]}),(0,o.jsx)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(a("tasks.create.modal.applicationHint"))})]})})})})]})]}),(0,o.jsxs)(I.Z,{children:[(0,o.jsx)(f.Z,{variant:"tonal",color:"secondary",onClick:()=>A(!1),disabled:D,children:String(a("common.cancel"))}),(0,o.jsx)(f.Z,{variant:"contained",onClick:async()=>{try{var e;M(!0);let t=await q.Do.post(P.Z.task,{type:F,status:"new",company:null==m?void 0:m.company_id}),r=null===(e=t.data)||void 0===e?void 0:e.id;u.success(String(a("tasks.toast.created"))),A(!1),r&&n.push("/tasks/update/".concat(r))}catch(e){u.error((null==e?void 0:e.message)||String(a("tasks.toast.createError")))}finally{M(!1)}},disabled:D,children:D?String(a("common.creating")):String(a("common.create"))})]})]}),(0,o.jsx)(S._,{autoHeight:!0,rowHeight:56,rows:K,columns:H,loading:G,rowCount:L,paginationMode:"server",disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:r,onPaginationModelChange:s,getRowId:e=>e.id,localeText:{...(0,E.x)(a),noRowsLabel:String(a("documents.table.emptyForStatus",{status:t}))}})]})})};(a=r||(r={})).New="new",a.InProgress="in_progress",a.OnReview="on_review",a.Cancelled="cancelled",a.Done="done",a.Returned="returned";let F=[{key:"new",labelKey:"documents.status.new"},{key:"in_progress",labelKey:"documents.status.inProgress"},{key:"on_review",labelKey:"documents.status.onReview"},{key:"cancelled",labelKey:"documents.status.cancelled"},{key:"done",labelKey:"documents.status.done"},{key:"returned",labelKey:"documents.status.returned"}],O=e=>e||"new";var D=e=>{let{currentStatus:t}=e,n=(0,g.useRouter)(),a=(0,l.useMemo)(()=>O(t),[t]),{t:r}=(0,N.$G)();(0,l.useEffect)(()=>{t||n.replace("/documents/new")},[t,n]);let i={new:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"new"}).total,in_progress:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"in_progress"}).total,on_review:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"on_review"}).total,cancelled:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"cancelled"}).total,done:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"done"}).total,returned:(0,_.z)(P.Z.task,{page:1,perPage:1,status:"returned"}).total};return(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(u.Z,{value:a,onChange:(e,t)=>{n.push("/documents/".concat(t))},variant:"scrollable",allowScrollButtonsMobile:!0,children:F.map(e=>{var t;return(0,o.jsx)(m.Z,{value:e.key,label:(0,o.jsxs)(p.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,o.jsx)("span",{children:String(r(e.labelKey))}),(0,o.jsx)(y.Z,{size:"small",color:"error",label:null!==(t=i[e.key])&&void 0!==t?t:0,sx:{height:20}})]})},e.key)})}),(0,o.jsx)(d.Z,{sx:{mt:4},children:(0,o.jsx)(A,{status:a})})]})},M=!0,K=e=>{let{status:t}=e,{t:n}=(0,N.$G)();return(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(s.Z,{title:String(n("documents.title"))}),(0,o.jsx)(c.Z,{children:(0,o.jsx)(D,{currentStatus:t||r.New})})]})}}},function(e){e.O(0,[2785,9084,8634,3035,1594,2888,9774,179],function(){return e(e.s=62036)}),_N_E=e.O()}]);
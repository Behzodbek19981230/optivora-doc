(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9083],{62036:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documents/[status]",function(){return n(13407)}])},58898:function(e,t,n){"use strict";var a=n(18745),r=n(86501);t.Z=()=>{let e=(0,a.Z)();return{success:(t,n)=>r.ZP.success(t,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.success.main,border:"1px solid ".concat(e.palette.success.main)},iconTheme:{primary:e.palette.success.main,secondary:e.palette.success.contrastText},...n}),error:(t,n)=>r.ZP.error(t,{style:{paddingInline:"10px",paddingBlock:"6px",color:e.palette.error.main,border:"1px solid ".concat(e.palette.error.main)},iconTheme:{primary:e.palette.error.main,secondary:e.palette.getContrastText(e.palette.error.main)},...n}),info:(t,n)=>(0,r.ZP)(t,{style:{padding:"16px",color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main)},iconTheme:{primary:e.palette.info.main,secondary:e.palette.getContrastText(e.palette.info.main)},...n})}}},74538:function(e,t){"use strict";let n=e=>Array.isArray(e)?e[0]:null==e?"":String(e);t.Z={login:"/auth/token",logout:"/auth/logout",me:"/user-view",companyProfile:"/company-profile",companyProfileById:e=>"/company-profile/".concat(n(e)),companyProfileFields:"/company-profile/fields",country:"/country/",district:"/district",districtById:e=>"/district/".concat(n(e)),region:"/region/",regionById:e=>"/region/".concat(n(e)),countryById:e=>"/country/".concat(n(e)),countryFields:"/country/fields/",command:"/command/",commandById:e=>"/command/".concat(n(e)),industries:"/industry",industryById:e=>"/industry/".concat(n(e)),industryFields:"/industry/fields",users:"/user",userById:e=>"/user/".concat(n(e)),equipmentCategories:"/equipment-category",equipmentCategoryById:e=>"/equipment-category/".concat(n(e)),services:"/service",serviceById:e=>"/service/".concat(n(e)),partners:"/partner",partnerById:e=>"/partner/".concat(n(e)),company:"/company/",companyById:e=>"/company/".concat(n(e)),replyLetter:"/reply-letter/",replyLetterById:e=>"/reply-letter/".concat(n(e)),replyLetterFile:"/reply-letter-file/",replyLetterFileById:e=>"/reply-letter-file/".concat(n(e)),documents:"/documents/",documentById:e=>"/documents/".concat(n(e)),documentForm:"/document-form/",documentFormById:e=>"/document-form/".concat(n(e)),listOfMagazine:"/list-of-magazine/",listOfMagazineById:e=>"/list-of-magazine/".concat(n(e)),task:"/task/",taskById:e=>"/task/".concat(n(e)),taskPart:"/task-part/",taskPartById:e=>"/task-part/".concat(n(e)),taskEvent:"/task-event/",taskEventById:e=>"/task-event/".concat(n(e)),taskComment:"/task-comment/",taskCommentById:e=>"/task-comment/".concat(n(e)),taskAttachment:"/task-attachment/",taskAttachmentById:e=>"/task-attachment/".concat(n(e)),department:"/department/",departmentById:e=>"/department/".concat(n(e)),position:"/position/",positionById:e=>"/position/".concat(n(e)),projects:"/project",projectById:e=>"/project/".concat(n(e)),projectDeliverables:"/project-deliverable",projectDeliverableById:e=>"/project-deliverable/".concat(n(e)),projectImages:"/project-image",projectImageById:e=>"/project-image/".concat(n(e)),stats:"/stats",statById:e=>"/stats/".concat(n(e)),faqs:"/faq",faqById:e=>"/faq/".concat(n(e)),inquiries:"/inquiry",inquiryById:e=>"/inquiry/".concat(n(e)),downloads:"/command-file/",downloadById:e=>"/command-file/".concat(n(e)),news:"/news-post",newsById:e=>"/news-post/".concat(n(e)),testimonials:"/testimonial",testimonialById:e=>"/testimonial/".concat(n(e)),ourWork:"/our-work",ourWorkById:e=>"/our-work/".concat(n(e)),applicationApprovedByID:e=>"/application-approved/".concat(n(e)),limitData:"/limit-data"}},33251:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var a=n(30202),r=n(33934),i=n(52293);let o=function(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,a.NL)(),c=["list",e,o],l=Object.fromEntries(Object.entries(o).filter(e=>{let[,t]=e;return void 0!==t})),{data:d,isLoading:u,error:p}=(0,r.a)({queryKey:c,queryFn:async()=>{var t,n,a;let r=(await i.Do.get(e,l)).data,o=Array.isArray(r)?r:null!==(n=null==r?void 0:r.results)&&void 0!==n?n:[],s=Array.isArray(r)?o.length:null!==(a=null==r?void 0:null===(t=r.pagination)||void 0===t?void 0:t.total)&&void 0!==a?a:o.length;return{items:o,total:s}},staleTime:3e4});return{data:null!==(t=null==d?void 0:d.items)&&void 0!==t?t:[],total:null!==(n=null==d?void 0:d.total)&&void 0!==n?n:0,loading:u,error:p,mutate:()=>{s.invalidateQueries({queryKey:c})}}}},13407:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var a,r,i=n(85893),o=n(67294),s=n(11163),c=n(60762),l=n(34375),d=n(71919),u=n(90642),p=n(43374),m=n(28907),y=n(84166),g=n(81873),h=n(21038),x=n(52857),k=n(73907),f=n(33453),v=n(92365),j=n(40110),Z=n(96788),b=n(68573),w=n(81359),I=n(96727),B=n(28634),S=n(75673),_=n(33251),C=n(74538),P=n(41664),z=n.n(P),N=n(22120),q=n(52293),E=n(58898),O=n(34273),T=e=>{let{status:t}=e,n=(0,s.useRouter)(),{t:a}=(0,N.$G)(),[r,l]=(0,o.useState)({page:0,pageSize:10}),p=(0,E.Z)(),{user:m}=(0,O.a)(),[g,P]=(0,o.useState)(!1),[T,W]=(0,o.useState)("task"),[A,F]=(0,o.useState)(!1),{data:R=[],total:D,loading:K}=(0,_.z)(C.Z.task,{page:r.page+1,perPage:r.pageSize,status:t}),M=[{field:"id",headerName:String(a("common.id")),width:90},{field:"name",headerName:String(a("documents.table.name")),flex:.3,minWidth:180},{field:"status",headerName:String(a("documents.table.status")),flex:.2,minWidth:140},{field:"type",headerName:String(a("documents.table.type")),flex:.15,minWidth:120},{field:"priority",headerName:String(a("documents.table.priority")),flex:.15,minWidth:120},{field:"start_date",headerName:String(a("documents.table.start")),flex:.15,minWidth:130},{field:"end_date",headerName:String(a("documents.table.end")),flex:.15,minWidth:130},{field:"actions",headerName:String(a("common.actions")),width:120,sortable:!1,renderCell:e=>{let t=e.row.id;return(0,i.jsxs)(y.Z,{direction:"row",spacing:1,children:[(0,i.jsx)(h.Z,{title:String(a("common.view")),children:(0,i.jsx)(x.Z,{size:"small",component:z(),href:"/tasks/view/".concat(t),children:(0,i.jsx)(S.Z,{icon:"tabler:eye"})})}),(0,i.jsx)(h.Z,{title:String(a("common.edit")),children:(0,i.jsx)(x.Z,{size:"small",component:z(),href:"/tasks/update/".concat(t),children:(0,i.jsx)(S.Z,{icon:"tabler:pencil"})})})]})}}];return(0,i.jsx)(c.Z,{variant:"outlined",children:(0,i.jsxs)(d.Z,{sx:{pb:0},children:[(0,i.jsx)(y.Z,{direction:"row",justifyContent:"flex-end",sx:{mb:2},children:(0,i.jsx)(k.Z,{variant:"contained",onClick:()=>P(!0),children:String(a("tasks.create.title"))})}),(0,i.jsxs)(f.Z,{open:g,onClose:A?void 0:()=>P(!1),fullWidth:!0,maxWidth:"sm",children:[(0,i.jsx)(v.Z,{children:String(a("tasks.create.modal.title"))}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(Z.Z,{variant:"body2",sx:{color:"text.secondary",mb:4},children:String(a("tasks.create.modal.subtitle"))}),(0,i.jsxs)(b.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{variant:"outlined",sx:{borderColor:"task"===T?"primary.main":"divider",bgcolor:"task"===T?"primary.lighter":"background.paper"},children:(0,i.jsx)(w.Z,{onClick:()=>W("task"),children:(0,i.jsxs)(d.Z,{sx:{height:100},children:[(0,i.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,i.jsx)(S.Z,{icon:"tabler:clipboard-list"}),(0,i.jsx)(Z.Z,{variant:"h6",children:String(a("tasks.type.task"))})]}),(0,i.jsx)(Z.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(a("tasks.create.modal.taskHint"))})]})})})}),(0,i.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{variant:"outlined",sx:{borderColor:"application"===T?"primary.main":"divider",bgcolor:"application"===T?"primary.lighter":"background.paper"},children:(0,i.jsx)(w.Z,{onClick:()=>W("application"),children:(0,i.jsxs)(d.Z,{sx:{height:100},children:[(0,i.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,i.jsx)(S.Z,{icon:"tabler:file-text"}),(0,i.jsx)(Z.Z,{variant:"h6",children:String(a("tasks.type.application"))})]}),(0,i.jsx)(Z.Z,{variant:"body2",sx:{color:"text.secondary"},children:String(a("tasks.create.modal.applicationHint"))})]})})})})]})]}),(0,i.jsxs)(I.Z,{children:[(0,i.jsx)(k.Z,{variant:"tonal",color:"secondary",onClick:()=>P(!1),disabled:A,children:String(a("common.cancel"))}),(0,i.jsx)(k.Z,{variant:"contained",onClick:async()=>{try{var e;F(!0);let t=await q.Do.post(C.Z.task,{type:T,status:"new",company:null==m?void 0:m.company_id}),r=null===(e=t.data)||void 0===e?void 0:e.id;p.success(String(a("tasks.toast.created"))),P(!1),r&&n.push("/tasks/update/".concat(r))}catch(e){p.error((null==e?void 0:e.message)||String(a("tasks.toast.createError")))}finally{F(!1)}},disabled:A,children:A?String(a("common.creating")):String(a("common.create"))})]})]}),(0,i.jsx)(B._,{autoHeight:!0,rowHeight:56,rows:R,columns:M,loading:K,rowCount:D,paginationMode:"server",disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:r,onPaginationModelChange:l,getRowId:e=>e.id,localeText:{noRowsLabel:String(a("documents.table.emptyForStatus",{status:t}))}})]})})};(a=r||(r={})).New="new",a.InProgress="in_progress",a.OnReview="on_review",a.Cancelled="cancelled",a.Done="done",a.Returned="returned";let W=[{key:"new",labelKey:"documents.status.new"},{key:"in_progress",labelKey:"documents.status.inProgress"},{key:"on_review",labelKey:"documents.status.onReview"},{key:"cancelled",labelKey:"documents.status.cancelled"},{key:"done",labelKey:"documents.status.done"},{key:"returned",labelKey:"documents.status.returned"}],A=e=>e||"new";var F=e=>{let{currentStatus:t}=e,n=(0,s.useRouter)(),a=(0,o.useMemo)(()=>A(t),[t]),{t:r}=(0,N.$G)();(0,o.useEffect)(()=>{t||n.replace("/documents/new")},[t,n]);let c={new:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"new"}).total,in_progress:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"in_progress"}).total,on_review:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"on_review"}).total,cancelled:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"cancelled"}).total,done:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"done"}).total,returned:(0,_.z)(C.Z.task,{page:1,perPage:1,status:"returned"}).total};return(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(p.Z,{value:a,onChange:(e,t)=>{n.push("/documents/".concat(t))},variant:"scrollable",allowScrollButtonsMobile:!0,children:W.map(e=>{var t;return(0,i.jsx)(m.Z,{value:e.key,label:(0,i.jsxs)(y.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)("span",{children:String(r(e.labelKey))}),(0,i.jsx)(g.Z,{size:"small",color:"error",label:null!==(t=c[e.key])&&void 0!==t?t:0,sx:{height:20}})]})},e.key)})}),(0,i.jsx)(u.Z,{sx:{mt:4},children:(0,i.jsx)(T,{status:a})})]})},R=()=>{let e=(0,s.useRouter)(),{status:t}=e.query,{t:n}=(0,N.$G)();return(0,o.useEffect)(()=>{t&&(Object.values(r).includes(t)||e.replace("/404"))},[t,e]),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(l.Z,{title:String(n("documents.title"))}),(0,i.jsx)(d.Z,{children:(0,i.jsx)(F,{currentStatus:t||r.New})})]})}}},function(e){e.O(0,[2712,1440,8634,3035,1594,2888,9774,179],function(){return e(e.s=62036)}),_N_E=e.O()}]);
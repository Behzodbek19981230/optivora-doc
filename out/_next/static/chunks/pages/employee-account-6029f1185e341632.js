(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5654],{90671:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee-account",function(){return n(4289)}])},33251:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var l=n(30202),r=n(33934),o=n(52293);let i=function(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=(0,l.NL)(),d=["list",e,i],c=Object.fromEntries(Object.entries(i).filter(e=>{let[,t]=e;return void 0!==t})),{data:u,isLoading:m,error:p}=(0,r.a)({queryKey:d,queryFn:async()=>{var t,n,l;let r=(await o.Do.get(e,c)).data,i=Array.isArray(r)?r:null!==(n=null==r?void 0:r.results)&&void 0!==n?n:[],a=Array.isArray(r)?i.length:null!==(l=null==r?void 0:null===(t=r.pagination)||void 0===t?void 0:t.total)&&void 0!==l?l:i.length;return{items:i,total:a}},enabled:a,staleTime:3e4});return{data:null!==(t=null==u?void 0:u.items)&&void 0!==t?t:[],total:null!==(n=null==u?void 0:u.total)&&void 0!==n?n:0,loading:m,error:p,mutate:()=>{s.invalidateQueries({queryKey:d})}}}},4289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var l=n(85893),r=n(68573),o=n(67294),i=n(60762),a=n(34375),s=n(71919),d=n(90642),c=n(51015),u=n(97182),m=n(96788),p=n(84166),x=n(81873),h=n(56912),g=n(35570),j=n(75673),b=n(74538),y=n(33251),f=n(30381),Z=n.n(f),v=n(22120),S=n(46070),w=n(7879),D=n(9198),k=n.n(D);n(5843);var A=n(15972),C=()=>{let{t:e}=(0,v.$G)(),[t,n]=(0,o.useState)(1),[f,D]=(0,o.useState)(null),[C,_]=(0,o.useState)(null),[Y,M]=(0,o.useState)(null),[P,T]=(0,o.useState)(""),{data:E=[]}=(0,y.z)(b.Z.users,{page:1,limit:100}),I={page:t,limit:10};f&&(I.employee=f.id),C&&(I.date_from=Z()(C).format("YYYY-MM-DD")),Y&&(I.date_to=Z()(Y).format("YYYY-MM-DD")),P&&(I.type=P);let{data:W=[],loading:z,total:N}=(0,y.z)(b.Z.employeeAccount,I),O=f||C||Y||P;return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(a.Z,{title:String(e("employeeAccount.title")||"Employee Account"),avatar:(0,l.jsx)(j.Z,{icon:"tabler:clock-hour-4",fontSize:"1.5rem"})}),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(d.Z,{sx:{mb:4,p:3,borderRadius:1,border:e=>"1px solid ".concat(e.palette.divider),bgcolor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.02)":"rgba(0, 0, 0, 0.01)"},children:(0,l.jsxs)(r.ZP,{container:!0,spacing:3,alignItems:"flex-end",children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(S.Z,{options:E,value:f,onChange:(e,t)=>{D(t),n(1)},isOptionEqualToValue:(e,t)=>e.id===t.id,getOptionLabel:e=>(null==e?void 0:e.fullname)||(null==e?void 0:e.username)||"",renderInput:t=>(0,l.jsx)(w.Z,{...t,fullWidth:!0,label:String(e("employeeAccount.filter.employee")||"Xodim"),placeholder:String(e("common.search")||"Qidirish...")})})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:2,children:(0,l.jsxs)(w.Z,{select:!0,fullWidth:!0,label:String(e("employeeAccount.filter.type")||"Turi"),value:P,SelectProps:{displayEmpty:!0,value:P,onChange:e=>{T(e.target.value),n(1)}},children:[(0,l.jsx)(A.Z,{value:"",children:String(e("employeeAccount.filter.all")||"Barchasi")}),(0,l.jsx)(A.Z,{value:"input",children:String(e("attendance.input")||"Keldi")}),(0,l.jsx)(A.Z,{value:"output",children:String(e("attendance.output")||"Ketdi")})]})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:2.5,children:(0,l.jsx)(k(),{selected:C,onChange:e=>{_(e),n(1)},selectsStart:!0,startDate:C,endDate:Y,placeholderText:String(e("employeeAccount.filter.dateFrom")||"Dan"),showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"scroll",customInput:(0,l.jsx)(w.Z,{fullWidth:!0,label:String(e("employeeAccount.filter.dateFrom")||"Dan")})})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(k(),{selected:Y,onChange:e=>{M(e),n(1)},selectsEnd:!0,startDate:C,endDate:Y,minDate:C,placeholderText:String(e("employeeAccount.filter.dateTo")||"Gacha"),showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"scroll",customInput:(0,l.jsx)(w.Z,{fullWidth:!0,label:String(e("employeeAccount.filter.dateTo")||"Gacha")})})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:2.5,children:(0,l.jsx)(c.Z,{fullWidth:!0,variant:"outlined",onClick:()=>{D(null),_(null),M(null),T(""),n(1)},disabled:!O,startIcon:(0,l.jsx)(j.Z,{icon:"tabler:x"}),children:String(e("common.clear")||"Tozalash")})})]})}),z?(0,l.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",py:6},children:(0,l.jsx)(u.Z,{})}):0===W.length?(0,l.jsx)(d.Z,{sx:{textAlign:"center",py:6},children:(0,l.jsx)(m.Z,{variant:"body2",color:"text.secondary",children:String(e("employeeAccount.empty")||"Ma'lumot topilmadi")})}):(0,l.jsx)(p.Z,{spacing:2,children:W.map((t,n)=>{var r,o;let i="input"===t.type,a=t.date?Z()(t.date).format("DD.MM.YYYY HH:mm"):"—",s=(null===(r=t.employee_detail)||void 0===r?void 0:r.fullname)||(null===(o=t.employee_detail)||void 0===o?void 0:o.username)||"—";return(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(d.Z,{sx:{p:3,borderRadius:1,border:e=>"1px solid ".concat(e.palette.divider),backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.02)":"rgba(0, 0, 0, 0.01)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:e=>e.palette.primary.main,backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",boxShadow:e=>"0 2px 8px ".concat("dark"===e.palette.mode?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.1)")}},children:(0,l.jsxs)(p.Z,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,l.jsx)(d.Z,{sx:{width:48,height:48,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=>i?"".concat(e.palette.success.main,"15"):"".concat(e.palette.error.main,"15"),color:e=>i?e.palette.success.main:e.palette.error.main,flexShrink:0},children:(0,l.jsx)(j.Z,{icon:i?"tabler:login":"tabler:logout",fontSize:"1.5rem"})}),(0,l.jsxs)(d.Z,{sx:{flex:1,minWidth:0},children:[(0,l.jsx)(p.Z,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1.5},children:(0,l.jsx)(m.Z,{variant:"body1",sx:{fontWeight:500},children:s})}),(0,l.jsxs)(p.Z,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,l.jsx)(x.Z,{label:i?String(e("attendance.input")||"Keldi"):String(e("attendance.output")||"Ketdi"),color:i?"success":"error",size:"small",sx:{fontWeight:600}}),(0,l.jsx)(m.Z,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:a})]}),t.comment&&(0,l.jsx)(d.Z,{sx:{mt:1.5,p:2,borderRadius:1,backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)"},children:(0,l.jsx)(m.Z,{variant:"body2",color:"text.secondary",children:t.comment})})]})]})}),n<W.length-1&&(0,l.jsx)(h.Z,{sx:{my:0}})]},t.id)})}),!z&&N>0&&(0,l.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:4,pt:3,borderTop:e=>"1px solid ".concat(e.palette.divider)},children:[(0,l.jsxs)(m.Z,{variant:"body2",color:"text.secondary",children:[String(e("common.showing")||"Ko'rsatilmoqda")," ",(t-1)*10+1," -"," ",Math.min(10*t,N)," ",String(e("common.of")||"dan")," ",N]}),(0,l.jsx)(g.Z,{count:Math.ceil(N/10),page:t,onChange:(e,t)=>n(t),color:"primary",size:"medium",showFirstButton:!0,showLastButton:!0})]})]})]})};let _=()=>(0,l.jsx)(r.ZP,{container:!0,spacing:6,children:(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(C,{})})});_.acl={action:"read",subject:"employee-account"},_.authGuard=!0;var Y=_}},function(e){e.O(0,[4885,2785,1980,3272,2888,9774,179],function(){return e(e.s=90671)}),_N_E=e.O()}]);
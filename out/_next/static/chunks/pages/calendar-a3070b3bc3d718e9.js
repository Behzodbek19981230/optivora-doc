(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4844],{45670:function(e,t,r){"use strict";r.d(t,{ZP:function(){return i},_i:function(){return l},pQ:function(){return s},uU:function(){return d}});var o=r(67294),n=r(85893);let a=o.createContext(null);function i(e){let{children:t,value:r}=e,i=function(){let[e,t]=o.useState(null);return o.useEffect(()=>{t(`mui-p-${Math.round(1e5*Math.random())}`)},[]),e}(),l=o.useMemo(()=>({idPrefix:i,value:r}),[i,r]);return(0,n.jsx)(a.Provider,{value:l,children:t})}function l(){return o.useContext(a)}function d(e,t){let{idPrefix:r}=e;return null===r?null:`${e.idPrefix}-P-${t}`}function s(e,t){let{idPrefix:r}=e;return null===r?null:`${e.idPrefix}-T-${t}`}},66568:function(e,t,r){"use strict";var o=r(87462),n=r(63366),a=r(67294),i=r(43374),l=r(45670),d=r(85893);let s=["children"],c=a.forwardRef(function(e,t){let{children:r}=e,c=(0,n.Z)(e,s),u=(0,l._i)();if(null===u)throw TypeError("No TabContext provided");let p=a.Children.map(r,e=>a.isValidElement(e)?a.cloneElement(e,{"aria-controls":(0,l.uU)(u,e.props.value),id:(0,l.pQ)(u,e.props.value)}):null);return(0,d.jsx)(i.Z,(0,o.Z)({},c,{ref:t,value:u.value,children:p}))});t.Z=c},63577:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return r(33062)}])},60762:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var o=r(87462),n=r(63366),a=r(67294),i=r(86010),l=r(94780),d=r(77527),s=r(29567),c=r(93454),u=r(1588),p=r(34867);function f(e){return(0,p.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var m=r(85893);let g=["className","raised"],b=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},f,t)},h=(0,d.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"}));var v=a.forwardRef(function(e,t){let r=(0,s.Z)({props:e,name:"MuiCard"}),{className:a,raised:l=!1}=r,d=(0,n.Z)(r,g),c=(0,o.Z)({},r,{raised:l}),u=b(c);return(0,m.jsx)(h,(0,o.Z)({className:(0,i.Z)(u.root,a),elevation:l?8:void 0,ref:t,ownerState:c},d))})},71919:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var o=r(87462),n=r(63366),a=r(67294),i=r(86010),l=r(94780),d=r(77527),s=r(29567),c=r(1588),u=r(34867);function p(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var f=r(85893);let m=["className","component"],g=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},p,t)},b=(0,d.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var h=a.forwardRef(function(e,t){let r=(0,s.Z)({props:e,name:"MuiCardContent"}),{className:a,component:l="div"}=r,d=(0,n.Z)(r,m),c=(0,o.Z)({},r,{component:l}),u=g(c);return(0,f.jsx)(b,(0,o.Z)({as:l,className:(0,i.Z)(u.root,a),ownerState:c,ref:t},d))})},84166:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var o=r(63366),n=r(87462),a=r(67294),i=r(86010),l=r(59766),d=r(94780),s=r(34867),c=r(13264),u=r(29628),p=r(39707),f=r(66500),m=r(95408),g=r(98700),b=r(85893);let h=["component","direction","spacing","divider","children","className","useFlexGap"],v=(0,f.Z)(),y=(0,c.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function x(e){return(0,u.Z)({props:e,name:"MuiStack",defaultTheme:v})}let C=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],w=({ownerState:e,theme:t})=>{let r=(0,n.Z)({display:"flex",flexDirection:"column"},(0,m.k9)({theme:t},(0,m.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let o=(0,g.hB)(t),n=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),a=(0,m.P$)({values:e.direction,base:n}),i=(0,m.P$)({values:e.spacing,base:n});"object"==typeof a&&Object.keys(a).forEach((e,t,r)=>{if(!a[e]){let o=t>0?a[r[t-1]]:"column";a[e]=o}}),r=(0,l.Z)(r,(0,m.k9)({theme:t},i,(t,r)=>e.useFlexGap?{gap:(0,g.NA)(o,t)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${C(r?a[r]:e.direction)}`]:(0,g.NA)(o,t)}}))}return(0,m.dt)(t.breakpoints,r)};var Z=r(77527),S=r(29567),k=function(e={}){let{createStyledComponent:t=y,useThemeProps:r=x,componentName:l="MuiStack"}=e,c=()=>(0,d.Z)({root:["root"]},e=>(0,s.Z)(l,e),{}),u=t(w);return a.forwardRef(function(e,t){let l=r(e),d=(0,p.Z)(l),{component:s="div",direction:f="column",spacing:m=0,divider:g,children:v,className:y,useFlexGap:x=!1}=d,C=(0,o.Z)(d,h),w=c();return(0,b.jsx)(u,(0,n.Z)({as:s,ownerState:{direction:f,spacing:m,useFlexGap:x},ref:t,className:(0,i.Z)(w.root,y)},C,{children:g?function(e,t){let r=a.Children.toArray(e).filter(Boolean);return r.reduce((e,o,n)=>(e.push(o),n<r.length-1&&e.push(a.cloneElement(t,{key:`separator-${n}`})),e),[])}(v,g):v}))})}({createStyledComponent:(0,Z.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,S.Z)({props:e,name:"MuiStack"})})},82071:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});let o=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:t=>{let{from:r,to:o,count:n}=t;return"".concat(r,"–").concat(o," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==n?n:">".concat(o))}}})},33062:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return en}});var o=r(85893),n=r(67294),a=r(90642),i=r(60762),l=r(34375),d=r(71919),s=r(28907),c=r(89540),u=r(77527),p=r(66568),f=r(45670),m=r(54560),g=r(34273),b=r(22120),h=r(20788),v=r(2339),y=r(17643);let x=(0,u.ZP)(a.Z)(e=>{let{theme:t}=e,r=(0,v.Z)();return{display:"flex",position:"relative",borderRadius:t.shape.borderRadius,"& .fc":{zIndex:1,".fc-col-header, .fc-daygrid-body, .fc-scrollgrid-sync-table, .fc-timegrid-body, .fc-timegrid-body table":{width:"100% !important"},"& .fc-toolbar":{flexWrap:"wrap",flexDirection:"row !important","&.fc-header-toolbar":{marginBottom:t.spacing(6)},".fc-prev-button, & .fc-next-button":{display:"inline-block",borderColor:"transparent",backgroundColor:"transparent","& .fc-icon":{color:t.palette.text.secondary,fontSize:t.typography.h4.fontSize},"&:hover, &:active, &:focus":{boxShadow:"none !important",borderColor:"transparent !important",backgroundColor:"transparent !important"}},"& .fc-prev-button":{paddingLeft:"0 !important",marginRight:t.spacing(1.5)},"& .fc-toolbar-chunk:first-of-type":{display:"flex",flexWrap:"wrap",alignItems:"center",[t.breakpoints.down("md")]:{"& div:first-of-type":{display:"flex",alignItems:"center"}}},"& .fc-button":{padding:t.spacing(),"&:active, .&:focus":{boxShadow:"none"}},"& .fc-button-group":{"& .fc-button":{textTransform:"capitalize","&:focus":{boxShadow:"none"}},"& .fc-button-primary":{"&:not(.fc-prev-button):not(.fc-next-button):not(.fc-sidebarToggle-button)":{border:0,color:t.palette.primary.main,padding:t.spacing(1.94,5.08),backgroundColor:(0,y.E)(t.palette.primary.main,.16),"&.fc-button-active, &:hover":{backgroundColor:(0,y.E)(t.palette.primary.main,.24)}}},"& .fc-sidebarToggle-button":{border:0,lineHeight:.8,borderColor:"transparent",paddingBottom:"0 !important",backgroundColor:"transparent",color:t.palette.text.secondary,marginLeft:"".concat(t.spacing(-2)," !important"),padding:"".concat(t.spacing(1.275,2)," !important"),"&:focus":{outline:0,boxShadow:"none"},"&:not(.fc-prev-button):not(.fc-next-button):hover":{backgroundColor:"transparent !important"},"& + div":{marginLeft:0}},".fc-dayGridMonth-button, .fc-timeGridWeek-button, .fc-timeGridDay-button, & .fc-listMonth-button":{padding:t.spacing(2.2,6),"&:last-of-type, &:first-of-type":{borderRadius:t.shape.borderRadius},"&:first-of-type":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-of-type":{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},"& > * > :not(:first-of-type)":{marginLeft:0},"& .fc-toolbar-title":{...t.typography.h5,marginRight:t.spacing(4),marginLeft:t.spacing(2.5)},".fc-button:empty:not(.fc-sidebarToggle-button), & .fc-toolbar-chunk:empty":{display:"none"}},"& tbody td, & thead th":{borderColor:t.palette.divider,"&.fc-col-header-cell":{borderLeft:0},'&[role="presentation"]':{borderRightWidth:0}},"& .fc-event":{"&:not(.fc-list-event)":{"&.bg-primary":{borderColor:"transparent",color:t.palette.primary.main,backgroundColor:r.primaryLight.backgroundColor,"& .fc-event-title, & .fc-event-time":{color:t.palette.primary.main}},"&.bg-success":{borderColor:"transparent",color:t.palette.success.main,backgroundColor:r.successLight.backgroundColor,"& .fc-event-title, & .fc-event-time":{color:t.palette.success.main}},"&.bg-error":{borderColor:"transparent",color:t.palette.error.main,backgroundColor:r.errorLight.backgroundColor,"& .fc-event-title, & .fc-event-time":{color:t.palette.error.main}},"&.bg-warning":{borderColor:"transparent",color:t.palette.warning.main,backgroundColor:r.warningLight.backgroundColor,"& .fc-event-title, & .fc-event-time":{color:t.palette.warning.main}},"&.bg-info":{borderColor:"transparent",color:t.palette.info.main,backgroundColor:r.infoLight.backgroundColor,"& .fc-event-title, & .fc-event-time":{color:t.palette.info.main}}},"&.bg-primary":{"& .fc-list-event-dot":{borderColor:t.palette.primary.main,backgroundColor:t.palette.primary.main},"&:hover td":{backgroundColor:(0,y.E)(t.palette.primary.light,.1)}},"&.bg-success":{"& .fc-list-event-dot":{borderColor:t.palette.success.main,backgroundColor:t.palette.success.main},"&:hover td":{backgroundColor:(0,y.E)(t.palette.success.light,.1)}},"&.bg-error":{"& .fc-list-event-dot":{borderColor:t.palette.error.main,backgroundColor:t.palette.error.main},"&:hover td":{backgroundColor:(0,y.E)(t.palette.error.light,.1)}},"&.bg-warning":{"& .fc-list-event-dot":{borderColor:t.palette.warning.main,backgroundColor:t.palette.warning.main},"&:hover td":{backgroundColor:(0,y.E)(t.palette.warning.light,.1)}},"&.bg-info":{"& .fc-list-event-dot":{borderColor:t.palette.info.main,backgroundColor:t.palette.info.main},"&:hover td":{backgroundColor:(0,y.E)(t.palette.info.light,.1)}},"&.fc-daygrid-event":{marginLeft:"4px",marginRight:"4px"}},"& .fc-col-header":{"& .fc-col-header-cell":{fontWeight:500,color:t.palette.text.secondary,fontSize:t.typography.body1.fontSize,"& .fc-col-header-cell-cushion":{padding:t.spacing(.5,2),textDecoration:"none !important"}}},"& .fc-scrollgrid-section-liquid > td":{borderBottom:0},"& .fc-daygrid-event-harness":{"& .fc-event":{marginTop:0,fontWeight:500,marginBottom:0,borderRadius:4,padding:t.spacing(.4,2),fontSize:t.typography.body2.fontSize},"&:not(:last-of-type)":{marginBottom:t.spacing(2)}},"& .fc-daygrid-day-bottom":{marginTop:t.spacing(1.2)},"& .fc-daygrid-day":{padding:"5px","& .fc-daygrid-day-top":{flexDirection:"row"}},"& .fc-scrollgrid":{borderLeftWidth:0,borderColor:t.palette.divider},"& .fc-day-past, & .fc-day-future":{"&.fc-daygrid-day-number":{color:t.palette.text.disabled}},"& .fc-daygrid-day-number":{marginBottom:t.spacing(1.5),padding:t.spacing(0,1.5)},"& .fc-daygrid-day-number, & .fc-timegrid-slot-label-cushion, & .fc-list-event-time":{textDecoration:"none !important",color:"".concat(t.palette.text.secondary," !important")},"& .fc-day-today:not(.fc-popover):not(.fc-col-header-cell)":{backgroundColor:t.palette.action.selected},"& .fc-timegrid":{"& .fc-scrollgrid-section":{height:0,"& .fc-col-header-cell, & .fc-timegrid-axis":{borderLeft:0,borderColor:t.palette.divider},"& .fc-timegrid-axis":{borderColor:t.palette.divider}},"& .fc-timegrid-axis":{"&.fc-scrollgrid-shrink":{"& .fc-timegrid-axis-cushion":{textTransform:"lowercase",color:t.palette.text.disabled,fontSize:t.typography.h6.fontSize}}},"& .fc-timegrid-slots":{"& .fc-timegrid-slot":{height:"3rem",borderColor:t.palette.divider,"&.fc-timegrid-slot-label":{borderRight:0},"&.fc-timegrid-slot-lane":{borderLeft:0},"& .fc-timegrid-slot-label-frame":{textAlign:"center","& .fc-timegrid-slot-label-cushion":{textTransform:"lowercase",fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.secondary," !important")}}}},"& .fc-timegrid-divider":{display:"none"},"& .fc-timegrid-event":{boxShadow:"none"}},"& .fc-list":{border:"none",'& th[colspan="3"]':{position:"relative"},"& .fc-list-table":{borderBottom:"1px solid ".concat(t.palette.divider),"& tr":{borderBottom:"1px solid ".concat(t.palette.divider),"&:first-of-type":{borderTop:"1px solid ".concat(t.palette.divider)},"& > *":{border:0}}},"& .fc-list-day-cushion":{background:t.palette.action.hover},".fc-list-event":{cursor:"pointer","&:hover":{"& td":{backgroundColor:t.palette.action.hover}},"& td":{borderColor:t.palette.divider}},"& .fc-list-day":{backgroundColor:t.palette.action.hover,"& .fc-list-day-text, & .fc-list-day-side-text":{textDecoration:"none",...t.typography.h6},"&  >  *":{background:"none",borderColor:t.palette.divider}},"& .fc-list-event-title":{display:"flex",paddingLeft:t.spacing(2.5),color:t.palette.text.secondary,fontSize:t.typography.body1.fontSize},"& .fc-list-event-time":{color:t.palette.text.disabled,fontSize:t.typography.body1.fontSize}},"& .fc-popover":{zIndex:20,boxShadow:1,borderColor:t.palette.divider,background:t.palette.background.paper,"& .fc-popover-header":{padding:t.spacing(2),background:t.palette.action.hover,"& .fc-popover-title, & .fc-popover-close":{color:t.palette.text.primary}},"& .fc-popover-body":{"& *:not(.fc-event-main):not(:last-of-type)":{marginBottom:t.spacing(1.2)}}},[t.breakpoints.up("md")]:{"& .fc-sidebarToggle-button":{display:"none"},"& .fc-toolbar-title":{marginLeft:0}},"@media (max-width:610px)":{"& .fc-header-toolbar .fc-toolbar-chunk:last-of-type":{marginTop:t.spacing(4)}}}}});var C=r(20281),w=r(73907),Z=r(52857),S=r(15972),k=r(93454),j=r(29346),N=r(84166),M=r(96788),R=r(18745),D=r(41796),_=r(52293),z=r(74538),T=r(75673),W=r(30381),E=r.n(W);let F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[];for(let o=e-t;o<=e+t;o++)r.push(o);return r},A={en:["January","February","March","April","May","June","July","August","September","October","November","December"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],uz:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"]},L=["new","in_progress","on_review","returned","done","cancelled"],P={new:"#EA5455",in_progress:"#00CFE8",on_review:"#7367F0",returned:"#EA5455",done:"#28C76F",cancelled:"#82868B"},B=e=>String(e).padStart(2,"0"),Y=e=>"".concat(e.getFullYear(),"-").concat(B(e.getMonth()+1),"-").concat(B(e.getDate())),I=(e,t)=>{let r=new Date(e);return r.setDate(r.getDate()+t),r},H=(e,t,r)=>{let o=new Date(e,t,1);return o.setMonth(o.getMonth()+r),{year:o.getFullYear(),month:o.getMonth()}},O=e=>{let t=e.getDay();return I(e,-((t+6)%7))},$=e=>I(O(e),6),G=(e,t)=>{let r=new Date(e,t,1),o=new Date(e,t+1,0),n=O(r),a=$(o),i=[],l=n;for(;l<=a;){let e=[];for(let t=0;t<7;t++)e.push(l),l=I(l,1);i.push(e)}return i};var q=e=>{let{t,i18n:r}=(0,b.$G)(),i=(0,R.Z)(),{user:l}=(0,g.a)(),{handleLeftSidebarToggle:d,handleSelectDate:s,setCalendarApi:c,ownerFilter:u="all"}=e,[p,f]=(0,n.useState)("month"),[m,h]=(0,n.useState)(()=>new Date().getFullYear()),[v,y]=(0,n.useState)(()=>new Date().getMonth()),[x,C]=(0,n.useState)(null),[W,B]=(0,n.useState)({}),$=(0,n.useMemo)(()=>{let e=(r.language||"ru").toLowerCase();return e.startsWith("uz")?"uz":e.startsWith("ru")?"ru":"en"},[r.language]),q=(0,n.useMemo)(()=>{let e=(r.language||"ru").toLowerCase();return e.startsWith("ru")?"ru-RU":e.startsWith("uz")?"uz-UZ":"en-GB"},[r.language]),V=A[$],J=(0,n.useMemo)(()=>"".concat(V[v]," ").concat(m),[V,v,m]),U=(0,n.useMemo)(()=>{let e=O(new Date(2025,0,6)),t=new Intl.DateTimeFormat(q,{weekday:"long"});return Array.from({length:7}).map((r,o)=>t.format(I(e,o)))},[q]),K=(0,n.useMemo)(()=>G(m,v),[m,v]),Q=(0,n.useMemo)(()=>new Date().toISOString().slice(0,10),[]),X=async(e,t)=>{try{var r,o,n,a,i,d,s,c;let p={year:e,month:t+1,company:null==l?void 0:l.company_id},f="mine"===u?z.Z.taskCalendarSelf:z.Z.taskCalendarStats,m=await _.Do.post(f,p),g=null==m?void 0:m.data,b={},h=Array.isArray(null==g?void 0:g.by_start_date)?g.by_start_date:null;if(h){let e={};for(let t of h){let n;let a=null==t?void 0:t.start_date,i=Number(null!==(r=null==t?void 0:t.total)&&void 0!==r?r:0);if("string"!=typeof a||!Number.isFinite(i))continue;try{let e=new Date(a);if(Number.isNaN(e.getTime())){let e=a.match(/^(\d{4}-\d{2}-\d{2})/);n=e?e[1]:a}else n=Y(e)}catch(t){let e=a.match(/^(\d{4}-\d{2}-\d{2})/);n=e?e[1]:a}e[n]||(e[n]={total:0,byStatus:{}}),e[n].total+=i;let l=null==t?void 0:t.by_status;if(l&&"object"==typeof l)for(let[t,r]of Object.entries(l)){let a=Number(null!==(o=null==r?void 0:r.count)&&void 0!==o?o:0);Number.isFinite(a)&&a>0&&(e[n].byStatus[t]=(e[n].byStatus[t]||0)+a)}}for(let[t,r]of Object.entries(e))b[t]={total:r.total,byStatus:r.byStatus};B(b);return}if(Array.isArray(g))for(let e of g){let t=(null==e?void 0:e.date)||(null==e?void 0:e.day)||(null==e?void 0:e.start_date),r=Number(null!==(i=null!==(a=null!==(n=null==e?void 0:e.count)&&void 0!==n?n:null==e?void 0:e.total)&&void 0!==a?a:null==e?void 0:e.value)&&void 0!==i?i:0);"string"==typeof t&&Number.isFinite(r)&&(b[t]={total:r})}else if(g&&"object"==typeof g){let e=Array.isArray(g.results)?g.results:null;if(e)for(let t of e){let e=(null==t?void 0:t.date)||(null==t?void 0:t.day)||(null==t?void 0:t.start_date),r=Number(null!==(c=null!==(s=null!==(d=null==t?void 0:t.count)&&void 0!==d?d:null==t?void 0:t.total)&&void 0!==s?s:null==t?void 0:t.value)&&void 0!==c?c:0);"string"==typeof e&&Number.isFinite(r)&&(b[e]={total:r})}else for(let[e,t]of Object.entries(g)){let r=Number(t);"string"==typeof e&&Number.isFinite(r)&&(b[e]={total:r})}}B(b)}catch(e){B({})}};(0,n.useEffect)(()=>{X(m,v)},[m,v,null==l?void 0:l.company_id,null==l?void 0:l.id,u]),(0,n.useEffect)(()=>{null==c||c({getDate:()=>new Date(m,v,1),gotoDate:e=>{h(e.getFullYear()),y(e.getMonth())},prev:()=>{let e=H(m,v,-1);h(e.year),y(e.month)},next:()=>{let e=H(m,v,1);h(e.year),y(e.month)}})},[c,m,v]);let ee=e=>{C(e),s(e)},et=e=>{C(e),s(e)},er=e=>{var r;let n=null==W?void 0:W[e],i=Number(null!==(r=null==n?void 0:n.total)&&void 0!==r?r:0),l=(null==n?void 0:n.byStatus)||{},d=Object.values(l).some(e=>Number(e)>0);if(!(Number.isFinite(i)&&i>0||d))return null;let s={new:"documents.status.new",in_progress:"documents.status.inProgress",on_review:"documents.status.onReview",returned:"documents.status.returned",done:"documents.status.done",cancelled:"documents.status.cancelled"},c=[...L,...Object.keys(l).filter(e=>!L.includes(e))],u=e=>{let{label:t,count:r,color:n}=e;return(0,o.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,px:1,py:.25,borderRadius:1,fontSize:"10px",lineHeight:"12px",backgroundColor:(0,D.Fq)(n,.12)},children:[(0,o.jsxs)(a.Z,{sx:{display:"inline-flex",alignItems:"center",gap:1,minWidth:0},children:[(0,o.jsx)(a.Z,{sx:{width:8,height:8,borderRadius:999,backgroundColor:n,flex:"0 0 auto"}}),(0,o.jsx)(M.Z,{sx:{fontSize:10},noWrap:!0,children:t})]}),(0,o.jsx)(M.Z,{sx:{fontSize:10,fontWeight:700,color:n},noWrap:!0,children:String(r)})]})};return(0,o.jsxs)(N.Z,{spacing:.5,sx:{mt:.5,overflow:"hidden"},children:[Number.isFinite(i)&&i>0?(0,o.jsx)(u,{label:String(t("calendar.stats.total")||"Total"),count:i,color:"rgba(115,103,240,0.95)"}):null,c.map(e=>{var r;let n=Number(null!==(r=l[e])&&void 0!==r?r:0);if(!Number.isFinite(n)||n<=0)return null;let a=s[e]?String(t(s[e])):e.replaceAll("_"," ");return(0,o.jsx)(u,{label:a,count:n,color:P[e]||"#999"},e)})]})},eo=(0,n.useMemo)(()=>F(m,10),[m]);return(0,o.jsxs)(a.Z,{sx:{width:"100%"},children:[(0,o.jsxs)(a.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:2,mb:4},children:[(0,o.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,o.jsx)(Z.Z,{onClick:d,size:"small","aria-label":"sidebar",children:(0,o.jsx)(T.Z,{icon:"bi:list"})}),(0,o.jsx)(Z.Z,{onClick:()=>{let e=H(m,v,-1);h(e.year),y(e.month)},size:"small","aria-label":"prev",children:(0,o.jsx)(T.Z,{icon:"bi:chevron-left"})}),(0,o.jsx)(Z.Z,{onClick:()=>{let e=H(m,v,1);h(e.year),y(e.month)},size:"small","aria-label":"next",children:(0,o.jsx)(T.Z,{icon:"bi:chevron-right"})}),(0,o.jsx)(M.Z,{sx:{ml:1,...i.typography.h5},noWrap:!0,children:J}),(0,o.jsx)(w.Z,{onClick:()=>{let e=new Date;h(e.getFullYear()),y(e.getMonth())},size:"small",variant:"outlined",sx:{ml:1},children:String(t("calendar.today")||"Today")})]}),(0,o.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,flexWrap:"wrap"},children:[(0,o.jsx)(j.Z,{size:"small",value:m,onChange:e=>h(Number(e.target.value)),sx:{height:34,minWidth:110},children:eo.map(e=>(0,o.jsx)(S.Z,{value:e,children:e},e))}),(0,o.jsx)(j.Z,{size:"small",value:v,onChange:e=>y(Number(e.target.value)),sx:{height:34,minWidth:140},children:V.map((e,t)=>(0,o.jsx)(S.Z,{value:t,children:e},e))}),(0,o.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(w.Z,{size:"small",onClick:()=>f("month"),variant:"month"===p?"contained":"outlined",sx:{textTransform:"capitalize"},color:"month"===p?"primary":"secondary",children:String(t("calendar.month")||"Month")}),(0,o.jsx)(w.Z,{size:"small",onClick:()=>f("list"),variant:"list"===p?"contained":"outlined",sx:{textTransform:"capitalize"},color:"list"===p?"primary":"secondary",children:String(t("calendar.list")||"List")})]})]})]}),"month"===p?(0,o.jsxs)(a.Z,{sx:{minHeight:380},children:[(0,o.jsx)(a.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",border:"1px solid ".concat(i.palette.divider),borderBottom:0,backgroundColor:i.palette.action.hover},children:U.map(e=>(0,o.jsx)(a.Z,{sx:{px:2,py:1,borderRight:"1px solid ".concat(i.palette.divider)},children:(0,o.jsx)(M.Z,{sx:{fontWeight:600,color:"text.secondary",fontSize:13},noWrap:!0,children:e})},e))}),(0,o.jsx)(a.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",border:"1px solid ".concat(i.palette.divider)},children:K.flat().map(e=>{var t;let r=e.getMonth()===v,n=Y(e),l=x===n,d=Q===n,s=l?(0,D.Fq)(i.palette.primary.main,.35):d?(0,D.Fq)(i.palette.primary.main,.1):"transparent",c=null==W?void 0:W[n],u=Number(null!==(t=null==c?void 0:c.total)&&void 0!==t?t:0),p=Object.values((null==c?void 0:c.byStatus)||{}).some(e=>Number(e)>0),f=Number.isFinite(u)&&u>0||p;return(0,o.jsxs)(a.Z,{onClick:r?()=>et(n):void 0,sx:{minHeight:56,px:1,py:.5,cursor:r?"pointer":"default",borderRight:"1px solid ".concat(i.palette.divider),borderTop:"1px solid ".concat(i.palette.divider),backgroundColor:s,overflow:"hidden",opacity:r?1:.35},children:[(0,o.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:r?(0,o.jsx)(M.Z,{sx:{fontSize:12,fontWeight:700,color:"text.secondary",lineHeight:1},children:e.getDate()}):(0,o.jsx)(M.Z,{sx:{fontSize:12,lineHeight:1},children:"\xa0"})}),r&&f?er(n):null]},n)})})]}):(0,o.jsx)(a.Z,{sx:{minHeight:480},children:(0,o.jsx)(N.Z,{spacing:2,children:Array.from({length:new Date(m,v+1,0).getDate()}).map((e,t)=>{var r;let n=new Date(m,v,t+1),a=Y(n),l=null==W?void 0:W[a],d=Number(null!==(r=null==l?void 0:l.total)&&void 0!==r?r:0),s=(null==l?void 0:l.byStatus)||{};if(!(Number.isFinite(d)&&d>0||Object.values(s).some(e=>Number(e)>0)))return null;let c=x===a,u=Q===a,p=E()(n).format("DD-MM-YYYY");return(0,o.jsxs)(k.Z,{variant:"outlined",onClick:()=>ee(a),sx:{p:2,cursor:"pointer",borderColor:c?i.palette.primary.main:i.palette.divider,backgroundColor:c?(0,D.Fq)(i.palette.primary.main,.08):u?(0,D.Fq)(i.palette.primary.main,.05):"background.paper"},children:[(0,o.jsx)(M.Z,{sx:{fontWeight:700,mb:1},children:p}),er(a)]},a)})})})]})},V=r(16127),J=r(11163),U=r(82071),K=r(81873);let Q=e=>{switch(e){case"new":case"cancelled":return"error";case"in_progress":return"primary";case"on_review":case"returned":return"warning";case"done":return"success";default:return"default"}};function X(e){let{data:t,loading:r,total:n}=e,{t:a}=(0,b.$G)(),i=(0,J.useRouter)(),l=[{field:"id",headerName:String(a("common.id")),width:90},{field:"title",headerName:String(a("documents.table.name")),flex:.3,minWidth:180},{field:"status",headerName:String(a("documents.table.status")),flex:.2,minWidth:140,renderCell:e=>{let t=e.row.status||"new";return(0,o.jsx)(K.Z,{label:a("documents.status.".concat(t)),color:Q(t),size:"small",variant:"outlined"})}},{field:"responsible_person",headerName:String(a("documents.table.responsible")),flex:.2,minWidth:150},{field:"department",headerName:String(a("documents.table.department")),flex:.15,minWidth:120,renderCell:e=>{let t=e.row.department;return(null==t?void 0:t.name)||""}},{field:"start_date",headerName:String(a("documents.table.start")),flex:.15,minWidth:130,renderCell:e=>{let t=e.row.start_date;return E()(t).isValid()?E()(t).format("DD.MM.YYYY HH:mm"):""}},{field:"end_date",headerName:String(a("documents.table.end")),flex:.15,minWidth:130,renderCell:e=>{let t=e.row.end_date;return E()(t).isValid()?E()(t).format("DD.MM.YYYY HH:mm"):""}}];return(0,o.jsx)(V._,{autoHeight:!0,rowHeight:56,rows:t,columns:l,loading:r,rowCount:n,onRowClick:e=>{var t;let r=(null===(t=e.row.task_detail)||void 0===t?void 0:t.id)||e.row.id;r&&i.push("/tasks/view/".concat(r))},getRowId:e=>e.id,localeText:(0,U.x)(a)})}let ee={Personal:"error",Business:"primary",Family:"warning",Holiday:"success",ETC:"info"},et=(0,u.ZP)(p.Z)(e=>{let{theme:t}=e;return{borderBottom:"0 !important","&, & .MuiTabs-scroller":{boxSizing:"content-box",padding:t.spacing(1.25,1.25,2),margin:"".concat(t.spacing(-1.25,-1.25,-2)," !important")},"& .MuiTabs-indicator":{display:"none"},"& .Mui-selected":{boxShadow:t.shadows[2],backgroundColor:t.palette.primary.main,color:"".concat(t.palette.common.white," !important")},"& .MuiTab-root":{lineHeight:1,borderRadius:t.shape.borderRadius,"&:hover":{color:t.palette.primary.main}}}}),er={events:[],selectedEvent:null,selectedCalendars:[]};var eo=()=>{var e,t;let[r,u]=(0,n.useState)(null),[p,v]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),{settings:Z}=(0,m.r)(),{user:S}=(0,g.a)(),{t:k}=(0,b.$G)(),{skin:j,direction:N}=Z,M=(0,c.Z)(e=>e.breakpoints.up("md")),R=!!(null==S?void 0:null===(e=S.role_detail)||void 0===e?void 0:e.map(e=>e.id.toString()).includes(h.K.ADMIN))||!!(null==S?void 0:null===(t=S.role_detail)||void 0===t?void 0:t.map(e=>e.id.toString()).includes(h.K.MANAGER)),[D,T]=(0,n.useState)(R?"all":"mine"),[W,E]=(0,n.useState)([]),[F,A]=(0,n.useState)(!1),L=async e=>{A(!0);try{let t=await _.Do.get(z.Z.taskMix,{date:e,page:1,limit:1e3}),r=[];if(Array.isArray(t))r=t;else if(t&&"object"==typeof t&&"data"in t){let e=t.data;r=Array.isArray(e)?e:[]}E(r)}catch(e){console.error("Error fetching tasks:",e),E([])}finally{A(!1)}};return(0,o.jsx)(x,{className:"app-calendar",sx:{boxShadow:"bordered"===j?0:6,..."bordered"===j&&{border:e=>"1px solid ".concat(e.palette.divider)}},children:(0,o.jsxs)(i.Z,{sx:{width:"100%"},children:[(0,o.jsx)(l.Z,{title:String(k("calendar.title")||"Calendar")}),(0,o.jsxs)(d.Z,{sx:{p:0},children:[(0,o.jsx)(a.Z,{sx:{px:6,pt:2,pb:2},children:(0,o.jsx)(f.ZP,{value:D,children:(0,o.jsxs)(et,{value:D,onChange:(e,t)=>T(t),children:[(0,o.jsx)(s.Z,{value:"mine",label:String(k("documents.myDocuments")||"Mening hujjatlarim")}),R&&(0,o.jsx)(s.Z,{value:"all",label:String(k("documents.allDocuments")||"Barchasi")})]})})}),(0,o.jsxs)(a.Z,{sx:{p:6,pb:0,flexGrow:1,borderRadius:1,boxShadow:"none",backgroundColor:"background.paper",...M?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:{}},children:[(0,o.jsx)(q,{store:er,direction:N,updateEvent:C.eJ,calendarApi:r,calendarsColor:ee,setCalendarApi:u,handleSelectEvent:C.cW,handleLeftSidebarToggle:()=>v(!p),handleAddEventSidebarToggle:()=>w(!y),handleSelectDate:e=>{L(e)},ownerFilter:D}),(0,o.jsx)(a.Z,{sx:{mt:2},children:(0,o.jsx)(X,{data:W,loading:F,total:W.length})})]})]})]})})};function en(){return(0,o.jsx)(eo,{})}}},function(e){e.O(0,[4885,7605,3035,2888,9774,179],function(){return e(e.s=63577)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3636],{20510:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/choose-company",function(){return t(37987)}])},71919:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var o=t(87462),a=t(63366),r=t(67294),s=t(86010),i=t(94780),c=t(77527),l=t(29567),d=t(1588),u=t(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var p=t(85893);let h=["className","component"],x=e=>{let{classes:n}=e;return(0,i.Z)({root:["root"]},m,n)},Z=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var g=r.forwardRef(function(e,n){let t=(0,l.Z)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=t,c=(0,a.Z)(t,h),d=(0,o.Z)({},t,{component:i}),u=x(d);return(0,p.jsx)(Z,(0,o.Z)({as:i,className:(0,s.Z)(u.root,r),ownerState:d,ref:n},c))})},37987:function(e,n,t){"use strict";t.r(n);var o=t(85893),a=t(67294),r=t(34273),s=t(11163),i=t(90642),c=t(60762),l=t(34375),d=t(71919),u=t(84166),m=t(96788),p=t(40492),h=t(95611),x=t(47407),Z=t(19304),g=t(73907),j=t(87590),y=t(21201),f=t(32200),w=t(81873),v=t(75673),_=t(89996),C=t(52293);let b=()=>{let{user:e,setUser:n}=(0,r.a)(),t=(0,s.useRouter)(),[b,S]=(0,a.useState)(!1),[N,k]=(0,a.useState)("");console.log(e);let I=(0,a.useMemo)(()=>e?Array.isArray(e.companies_detail)&&e.companies_detail.length>0?e.companies_detail:Array.isArray(e.companies)&&e.companies.length>0?e.companies.map(e=>({id:e,name:"Company ".concat(e)})):[]:[],[e]),A=(0,a.useMemo)(()=>{if(!N)return I;let e=N.toLowerCase();return I.filter(n=>(n.name||"").toLowerCase().includes(e)||(n.code||"").toLowerCase().includes(e)||String(n.id).includes(e))},[I,N]);(0,a.useEffect)(()=>{let t=window.localStorage.getItem(_.Z.storageTokenKeyName);!e&&t&&(S(!0),C.Do.get(_.Z.meEndpoint).then(async e=>{S(!1);let t=e.data;n({...t}),localStorage.getItem("userData")||window.localStorage.setItem("userData",JSON.stringify(t))}).finally(()=>S(!1)))},[e,n]);let E=o=>{let a={...e,company_current:o,company_id:o};n(a),window.localStorage.setItem("userData",JSON.stringify(a)),t.replace("/dashboards")};return(0,o.jsx)(i.Z,{sx:{p:6},children:(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(l.Z,{title:"Select a Company",subheader:"Pick the company you want to work with"}),(0,o.jsx)(d.Z,{children:b?(0,o.jsxs)(u.Z,{alignItems:"center",sx:{py:6},children:[(0,o.jsx)(v.Z,{icon:"tabler:loader-2",fontSize:24,className:"spinner"}),(0,o.jsx)(m.Z,{sx:{mt:2},children:"Loading companiesâ€¦"})]}):0===I.length?(0,o.jsx)(m.Z,{children:"No companies available for your account."}):(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(p.Z,{fullWidth:!0,value:N,onChange:e=>k(e.target.value),placeholder:"Search companies by name, code or ID",InputProps:{startAdornment:(0,o.jsx)(h.Z,{position:"start",children:(0,o.jsx)(v.Z,{icon:"tabler:search"})})},sx:{mb:4}}),(0,o.jsx)(x.Z,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2},children:A.map(e=>{var n,t;return(0,o.jsxs)(Z.ZP,{sx:{border:e=>"1px solid ".concat(e.palette.divider),mb:2,borderRadius:2},secondaryAction:(0,o.jsx)(g.Z,{variant:"contained",onClick:()=>E(e.id),children:"Choose"}),children:[(0,o.jsx)(j.Z,{children:(0,o.jsx)(y.Z,{src:"".concat("https://api-doc.optivora-group.com").concat(e.logo)||0,children:e.name?e.name.charAt(0).toUpperCase():"?"})}),(0,o.jsx)(f.Z,{primary:(0,o.jsxs)(u.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,o.jsx)(m.Z,{variant:"h6",children:e.name||"Company ".concat(e.id)}),!1===e.is_active?(0,o.jsx)(w.Z,{size:"small",color:"warning",label:"Inactive"}):null]}),secondary:(0,o.jsxs)(u.Z,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.code?(0,o.jsxs)(m.Z,{color:"text.secondary",children:["Code: ",e.code]}):null,e.phone?(0,o.jsxs)(m.Z,{color:"text.secondary",children:["Phone: ",e.phone]}):null,(null===(n=e.region_detail)||void 0===n?void 0:n.name)?(0,o.jsxs)(m.Z,{color:"text.secondary",children:["Region: ",e.region_detail.name]}):null,(null===(t=e.district_detail)||void 0===t?void 0:t.name)?(0,o.jsxs)(m.Z,{color:"text.secondary",children:["District: ",e.district_detail.name]}):null,e.address?(0,o.jsx)(m.Z,{color:"text.secondary",children:e.address}):null]})})]},e.id)})})]})})]})})};b.getLayout=e=>e,b.authGuard=!0,b.acl={action:"manage",subject:"all"},n.default=b}},function(e){e.O(0,[1481,2888,9774,179],function(){return e(e.s=20510)}),_N_E=e.O()}]);
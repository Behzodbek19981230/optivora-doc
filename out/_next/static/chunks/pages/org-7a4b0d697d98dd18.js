(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{67873:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/org",function(){return n(24961)}])},82071:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r=e=>({noRowsLabel:String(e("common.datagrid.noRows",{defaultValue:"No rows"})),MuiTablePagination:{labelRowsPerPage:String(e("common.datagrid.rowsPerPage",{defaultValue:"Rows per page:"})),labelDisplayedRows:t=>{let{from:n,to:r,count:i}=t;return"".concat(n,"â€“").concat(r," ").concat(String(e("common.datagrid.of",{defaultValue:"of"}))," ").concat(-1!==i?i:">".concat(r))}}})},33251:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(30202),i=n(33934),o=n(52293);let a=function(e){var t,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=(0,r.NL)(),d=["list",e,a],m=Object.fromEntries(Object.entries(a).filter(e=>{let[,t]=e;return void 0!==t})),{data:c,isLoading:u,error:g}=(0,i.a)({queryKey:d,queryFn:async()=>{var t,n,r;let i=(await o.Do.get(e,m)).data,a=Array.isArray(i)?i:null!==(n=null==i?void 0:i.results)&&void 0!==n?n:[],l=Array.isArray(i)?a.length:null!==(r=null==i?void 0:null===(t=i.pagination)||void 0===t?void 0:t.total)&&void 0!==r?r:a.length;return{items:a,total:l}},enabled:l,staleTime:3e4});return{data:null!==(t=null==c?void 0:c.items)&&void 0!==t?t:[],total:null!==(n=null==c?void 0:c.total)&&void 0!==n?n:0,loading:u,error:g,mutate:()=>{s.invalidateQueries({queryKey:d})}}}},24961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(85893),i=n(67294),o=n(60762),a=n(43374),l=n(28907),s=n(90642),d=n(34375),m=n(52857),c=n(73907),u=n(16127),g=n(83727),x=n(75673),h=n(74538),p=n(33251),j=n(52293),S=n(86501),f=n(87536),Z=n(33453),v=n(92365),b=n(40110),_=n(96727),C=n(68573),w=n(7879),y=n(22120);let z={name:"",name_en:"",name_uz:"",name_ru:""};var W=e=>{let{open:t,onClose:n,onSaved:o,mode:a,item:l}=e,{t:s}=(0,y.$G)(),{control:d,handleSubmit:m,reset:u,formState:{isSubmitting:g}}=(0,f.cI)({defaultValues:z});(0,i.useEffect)(()=>{"edit"===a&&l?u(l):"create"===a&&u(z)},[a,l,u]);let x=async e=>{try{"create"===a?await j.Do.post(h.Z.department,e):"edit"===a&&l&&await j.Do.put(h.Z.departmentById(l.id),e),o(),n(),S.ZP.success(String(s("org.departments.toast.saved")))}catch(e){console.error("Failed to save department:",e)}};return(0,r.jsxs)(Z.Z,{open:t,onClose:g?void 0:n,fullWidth:!0,maxWidth:"sm",children:[(0,r.jsx)(v.Z,{children:"create"===a?String(s("org.departments.create.title")):String(s("org.departments.edit.title"))}),(0,r.jsxs)("form",{onSubmit:m(x),children:[(0,r.jsx)(b.Z,{children:(0,r.jsxs)(C.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.departments.form.name")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_en",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameEn")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_uz",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameUz")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_ru",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameRu")),...t})}})})]})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(c.Z,{type:"button",variant:"tonal",color:"secondary",onClick:n,disabled:g,children:String(s("common.cancel"))}),(0,r.jsx)(c.Z,{type:"submit",disabled:g,children:g?String(s("common.saving")):String(s("common.save"))})]})]})]})},P=n(82071),N=()=>{let{t:e}=(0,y.$G)(),[t,n]=(0,i.useState)({page:0,pageSize:10}),[o,a]=(0,i.useState)(""),{data:l=[],total:s,loading:f,mutate:Z}=(0,p.z)(h.Z.department,{page:t.page+1,limit:t.pageSize,search:o}),[v,b]=(0,i.useState)(!1),[_,C]=(0,i.useState)("create"),[w,z]=(0,i.useState)(null),[N,k]=(0,i.useState)(!1),E=e=>{C("edit"),z(e),b(!0)},R=e=>{z(e),k(!0)},D=async()=>{w&&(await j.Do.delete(h.Z.departmentById(w.id)),Z(),k(!1),S.ZP.success(String(e("org.departments.toast.deleted"))))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:String(e("org.departments.title")),action:(0,r.jsx)(c.Z,{variant:"contained",startIcon:(0,r.jsx)(x.Z,{icon:"tabler:plus"}),onClick:()=>{C("create"),z(null),b(!0)},children:String(e("org.departments.create.title"))})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u._,{autoHeight:!0,rowHeight:56,rows:l,columns:[{field:"name",headerName:String(e("org.departments.table.name")),flex:.25,minWidth:200},{field:"name_en",headerName:String(e("org.common.nameEn")),flex:.2,minWidth:160},{field:"name_uz",headerName:String(e("org.common.nameUz")),flex:.2,minWidth:160},{field:"name_ru",headerName:String(e("org.common.nameRu")),flex:.2,minWidth:160},{field:"actions",headerName:String(e("common.actions")),flex:.15,minWidth:140,sortable:!1,renderCell:e=>{let t=e.row;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{size:"small",onClick:()=>E(t),children:(0,r.jsx)(x.Z,{icon:"tabler:edit"})}),(0,r.jsx)(m.Z,{size:"small",color:"error",onClick:()=>R(t),children:(0,r.jsx)(x.Z,{icon:"tabler:trash"})})]})}}],loading:f,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:t,onPaginationModelChange:n,getRowId:e=>e.id,localeText:(0,P.x)(e),rowCount:s})}),(0,r.jsx)(W,{open:v,onClose:()=>b(!1),onSaved:Z,mode:_,item:w}),(0,r.jsx)(g.Z,{open:N,onClose:()=>k(!1),onConfirm:D,title:String(e("org.departments.deleteConfirm.title")),description:w?String(e("org.departments.deleteConfirm.description",{name:w.name_uz||w.name,id:w.id})):void 0})]})},k=n(15972);let E={name:"",name_en:"",name_uz:"",name_ru:"",department:0};var R=e=>{let{open:t,onClose:n,onSaved:o,mode:a,item:l}=e,{t:s}=(0,y.$G)(),{control:d,handleSubmit:m,reset:u,formState:{isSubmitting:g}}=(0,f.cI)({defaultValues:E}),[x,p]=(0,i.useState)([]),[z,W]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(t){W(!0);try{var e;let t=await j.Do.get("".concat(h.Z.department,"?perPage=100")),n=Array.isArray(t.data)?t.data:Array.isArray(null===(e=t.data)||void 0===e?void 0:e.results)?t.data.results:[];p(n)}finally{W(!1)}}})()},[t]),(0,i.useEffect)(()=>{"edit"===a&&l?u(l):"create"===a&&u(E)},[a,l,u]);let P=async e=>{try{"create"===a?await j.Do.post(h.Z.position,e):"edit"===a&&l&&await j.Do.put(h.Z.positionById(l.id),e),o(),n(),S.ZP.success(String(s("org.positions.toast.saved")))}catch(e){console.error("Failed to save position:",e)}};return(0,r.jsxs)(Z.Z,{open:t,onClose:g?void 0:n,fullWidth:!0,maxWidth:"sm",children:[(0,r.jsx)(v.Z,{children:"create"===a?String(s("org.positions.create.title")):String(s("org.positions.edit.title"))}),(0,r.jsxs)("form",{onSubmit:m(P),children:[(0,r.jsx)(b.Z,{children:(0,r.jsxs)(C.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.positions.form.name")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_en",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameEn")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_uz",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameUz")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"name_ru",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{fullWidth:!0,label:String(s("org.common.nameRu")),...t})}})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"department",control:d,rules:{required:String(s("errors.required"))},render:e=>{let{field:t}=e;return(0,r.jsx)(w.Z,{select:!0,fullWidth:!0,label:String(s("org.positions.form.department")),...t,value:t.value||"",children:z?(0,r.jsx)(k.Z,{value:"",disabled:!0,children:String(s("common.loading"))}):x.length>0?x.map(e=>(0,r.jsx)(k.Z,{value:e.id,children:e.name_uz||e.name},e.id)):(0,r.jsx)(k.Z,{value:"",disabled:!0,children:String(s("org.positions.form.noDepartments"))})})}})})]})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(c.Z,{type:"button",variant:"tonal",color:"secondary",onClick:n,disabled:g,children:String(s("common.cancel"))}),(0,r.jsx)(c.Z,{type:"submit",disabled:g,children:g?String(s("common.saving")):String(s("common.save"))})]})]})]})},D=()=>{let{t:e}=(0,y.$G)(),[t,n]=(0,i.useState)({page:0,pageSize:10}),[o,a]=(0,i.useState)(""),{data:l=[],total:s,loading:f,mutate:Z}=(0,p.z)(h.Z.position,{page:t.page+1,limit:t.pageSize,search:o}),[v,b]=(0,i.useState)(!1),[_,C]=(0,i.useState)("create"),[w,z]=(0,i.useState)(null),[W,N]=(0,i.useState)(!1),k=e=>{C("edit"),z(e),b(!0)},E=e=>{z(e),N(!0)},D=async()=>{w&&(await j.Do.delete(h.Z.positionById(w.id)),Z(),N(!1),S.ZP.success(String(e("org.positions.toast.deleted"))))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:String(e("org.positions.title")),action:(0,r.jsx)(c.Z,{variant:"contained",startIcon:(0,r.jsx)(x.Z,{icon:"tabler:plus"}),onClick:()=>{C("create"),z(null),b(!0)},children:String(e("org.positions.create.title"))})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u._,{autoHeight:!0,rowHeight:56,rows:l,columns:[{field:"name",headerName:String(e("org.positions.table.name")),flex:.22,minWidth:180},{field:"name_en",headerName:String(e("org.common.nameEn")),flex:.18,minWidth:140},{field:"name_uz",headerName:String(e("org.common.nameUz")),flex:.18,minWidth:140},{field:"name_ru",headerName:String(e("org.common.nameRu")),flex:.18,minWidth:140},{field:"department",headerName:String(e("org.positions.table.department")),flex:.2,minWidth:160,valueGetter:e=>{var t;return(null===(t=e.row.department_detail)||void 0===t?void 0:t.name_uz)||e.row.department}},{field:"actions",headerName:String(e("common.actions")),flex:.16,minWidth:140,sortable:!1,renderCell:e=>{let t=e.row;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{size:"small",onClick:()=>k(t),children:(0,r.jsx)(x.Z,{icon:"tabler:edit"})}),(0,r.jsx)(m.Z,{size:"small",color:"error",onClick:()=>E(t),children:(0,r.jsx)(x.Z,{icon:"tabler:trash"})})]})}}],loading:f,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationModel:t,onPaginationModelChange:n,getRowId:e=>e.id,localeText:(0,P.x)(e),rowCount:s})}),(0,r.jsx)(R,{open:v,onClose:()=>b(!1),onSaved:Z,mode:_,item:w}),(0,r.jsx)(g.Z,{open:W,onClose:()=>N(!1),onConfirm:D,title:String(e("org.positions.deleteConfirm.title")),description:w?String(e("org.positions.deleteConfirm.description",{name:w.name_uz||w.name,id:w.id})):void 0})]})},I=()=>{let[e,t]=(0,i.useState)(0),{t:n}=(0,y.$G)();return(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(a.Z,{value:e,onChange:(e,n)=>t(n),children:[(0,r.jsx)(l.Z,{label:String(n("org.tabs.departments"))}),(0,r.jsx)(l.Z,{label:String(n("org.tabs.positions"))})]}),(0,r.jsxs)(s.Z,{sx:{p:2},children:[0===e&&(0,r.jsx)(N,{},"tab-".concat(e)),1===e&&(0,r.jsx)(D,{},"tab-".concat(e))]})]})},Q=()=>(0,r.jsx)(I,{})},83727:function(e,t,n){"use strict";var r=n(85893),i=n(33453),o=n(92365),a=n(40110),l=n(96727),s=n(73907),d=n(96788),m=n(22120);t.Z=e=>{let{open:t,onClose:n,onConfirm:c,confirming:u,title:g,description:x}=e,{t:h}=(0,m.$G)();return(0,r.jsxs)(i.Z,{open:t,onClose:u?void 0:n,fullWidth:!0,maxWidth:"xs",children:[(0,r.jsx)(o.Z,{children:g||String(h("common.deleteConfirm.title"))}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(d.Z,{variant:"body2",children:x||String(h("common.deleteConfirm.description"))})}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(s.Z,{variant:"tonal",color:"secondary",onClick:n,disabled:!!u,children:String(h("common.cancel"))}),(0,r.jsx)(s.Z,{color:"error",onClick:()=>c(),disabled:!!u,children:u?String(h("common.deleting")):String(h("common.delete"))})]})]})}}},function(e){e.O(0,[2785,7536,7605,3035,2888,9774,179],function(){return e(e.s=67873)}),_N_E=e.O()}]);
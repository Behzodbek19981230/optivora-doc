(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3636],{13264:function(e,t,r){"use strict";let o=(0,r(70182).ZP)();t.Z=o},20510:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/choose-company",function(){return r(37987)}])},60762:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var o=r(87462),a=r(63366),n=r(67294),i=r(86010),s=r(94780),l=r(77527),c=r(29567),d=r(93454),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var Z=r(85893);let h=["className","raised"],v=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)},f=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"}));var x=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCard"}),{className:n,raised:s=!1}=r,l=(0,a.Z)(r,h),d=(0,o.Z)({},r,{raised:s}),u=v(d);return(0,Z.jsx)(f,(0,o.Z)({className:(0,i.Z)(u.root,n),elevation:s?8:void 0,ref:t,ownerState:d},l))})},71919:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var o=r(87462),a=r(63366),n=r(67294),i=r(86010),s=r(94780),l=r(77527),c=r(29567),d=r(1588),u=r(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var p=r(85893);let Z=["className","component"],h=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},m,t)},v=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var f=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:n,component:s="div"}=r,l=(0,a.Z)(r,Z),d=(0,o.Z)({},r,{component:s}),u=h(d);return(0,p.jsx)(v,(0,o.Z)({as:s,className:(0,i.Z)(u.root,n),ownerState:d,ref:t},l))})},34375:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var o=r(63366),a=r(87462),n=r(67294),i=r(86010),s=r(94780),l=r(96788),c=r(29567),d=r(77527),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiCardHeader",e)}let Z=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=r(85893);let v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)},x=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.Z)({["& .".concat(Z.title)]:t.title,["& .".concat(Z.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});var C=n.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:s,className:d,component:u="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:Z,title:C,titleTypographyProps:b}=r,w=(0,o.Z)(r,v),S=(0,a.Z)({},r,{component:u,disableTypography:m}),M=f(S),N=C;null==N||N.type===l.Z||m||(N=(0,h.jsx)(l.Z,(0,a.Z)({variant:s?"body2":"h5",className:M.title,component:"span",display:"block"},b,{children:N})));let R=p;return null==R||R.type===l.Z||m||(R=(0,h.jsx)(l.Z,(0,a.Z)({variant:s?"body2":"body1",className:M.subheader,color:"text.secondary",component:"span",display:"block"},Z,{children:R}))),(0,h.jsxs)(x,(0,a.Z)({className:(0,i.Z)(M.root,d),as:u,ref:t,ownerState:S},w,{children:[s&&(0,h.jsx)(g,{className:M.avatar,ownerState:S,children:s}),(0,h.jsxs)(j,{className:M.content,ownerState:S,children:[N,R]}),n&&(0,h.jsx)(y,{className:M.action,ownerState:S,children:n})]}))})},87590:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var o=r(63366),a=r(87462),n=r(67294),i=r(86010),s=r(94780),l=r(74507),c=r(77527),d=r(29567),u=r(1588),m=r(34867);function p(e){return(0,m.Z)("MuiListItemAvatar",e)}(0,u.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var Z=r(85893);let h=["className"],v=e=>{let{alignItems:t,classes:r}=e;return(0,s.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},p,r)},f=(0,c.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})(e=>{let{ownerState:t}=e;return(0,a.Z)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})});var x=n.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiListItemAvatar"}),{className:s}=r,c=(0,o.Z)(r,h),u=n.useContext(l.Z),m=(0,a.Z)({},r,{alignItems:u.alignItems}),p=v(m);return(0,Z.jsx)(f,(0,a.Z)({className:(0,i.Z)(p.root,s),ownerState:m,ref:t},c))})},84166:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var o=r(63366),a=r(87462),n=r(67294),i=r(86010),s=r(59766),l=r(94780),c=r(34867),d=r(13264),u=r(29628),m=r(39707),p=r(66500),Z=r(95408),h=r(98700),v=r(85893);let f=["component","direction","spacing","divider","children","className","useFlexGap"],x=(0,p.Z)(),g=(0,d.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function y(e){return(0,u.Z)({props:e,name:"MuiStack",defaultTheme:x})}let j=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],C=({ownerState:e,theme:t})=>{let r=(0,a.Z)({display:"flex",flexDirection:"column"},(0,Z.k9)({theme:t},(0,Z.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let o=(0,h.hB)(t),a=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),n=(0,Z.P$)({values:e.direction,base:a}),i=(0,Z.P$)({values:e.spacing,base:a});"object"==typeof n&&Object.keys(n).forEach((e,t,r)=>{if(!n[e]){let o=t>0?n[r[t-1]]:"column";n[e]=o}}),r=(0,s.Z)(r,(0,Z.k9)({theme:t},i,(t,r)=>e.useFlexGap?{gap:(0,h.NA)(o,t)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${j(r?n[r]:e.direction)}`]:(0,h.NA)(o,t)}}))}return(0,Z.dt)(t.breakpoints,r)};var b=r(77527),w=r(29567),S=function(e={}){let{createStyledComponent:t=g,useThemeProps:r=y,componentName:s="MuiStack"}=e,d=()=>(0,l.Z)({root:["root"]},e=>(0,c.Z)(s,e),{}),u=t(C);return n.forwardRef(function(e,t){let s=r(e),l=(0,m.Z)(s),{component:c="div",direction:p="column",spacing:Z=0,divider:h,children:x,className:g,useFlexGap:y=!1}=l,j=(0,o.Z)(l,f),C=d();return(0,v.jsx)(u,(0,a.Z)({as:c,ownerState:{direction:p,spacing:Z,useFlexGap:y},ref:t,className:(0,i.Z)(C.root,g)},j,{children:h?function(e,t){let r=n.Children.toArray(e).filter(Boolean);return r.reduce((e,o,a)=>(e.push(o),a<r.length-1&&e.push(n.cloneElement(t,{key:`separator-${a}`})),e),[])}(x,h):x}))})}({createStyledComponent:(0,b.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,w.Z)({props:e,name:"MuiStack"})})},37987:function(e,t,r){"use strict";r.r(t);var o=r(85893),a=r(67294),n=r(34273),i=r(11163),s=r(90642),l=r(60762),c=r(34375),d=r(71919),u=r(84166),m=r(96788),p=r(40492),Z=r(95611),h=r(47407),v=r(19304),f=r(51015),x=r(87590),g=r(21201),y=r(32200),j=r(81873),C=r(75673),b=r(89996),w=r(52293),S=r(22120),M=r(85895);let N=()=>{let{user:e,setUser:t}=(0,n.a)(),r=(0,i.useRouter)(),[N,R]=(0,a.useState)(!1),[_,k]=(0,a.useState)(""),{t:P}=(0,S.$G)(),I=(0,a.useMemo)(()=>e&&Array.isArray(e.companies_detail)&&e.companies_detail.length>0?e.companies_detail.filter(e=>e.is_active):[],[e]),A=(0,a.useMemo)(()=>{if(!_)return I;let e=_.toLowerCase();return I.filter(t=>t.is_active&&(t.name||"").toLowerCase().includes(e)||(t.code||"").toLowerCase().includes(e)||String(t.id).includes(e))},[I,_]);(0,a.useEffect)(()=>{let r=window.localStorage.getItem(b.Z.storageTokenKeyName);!e&&r&&(R(!0),w.Do.get(b.Z.meEndpoint).then(async e=>{R(!1);let r=e.data;t({...r}),localStorage.getItem("userData")||window.localStorage.setItem("userData",JSON.stringify(r))}).finally(()=>R(!1)))},[e,t]);let T=o=>{var a;let n={...e,company_current:o,company_id:o};t(n),window.localStorage.setItem("userData",JSON.stringify(n));let i=(null==n?void 0:null===(a=n.role_detail)||void 0===a?void 0:a.map(e=>e.name))||[],s=(0,M.Z)(i);r.replace(s)};return(0,o.jsx)(s.Z,{sx:{p:6},children:(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(c.Z,{title:P("chooseCompany.title"),subheader:P("chooseCompany.subtitle")}),(0,o.jsx)(d.Z,{children:N?(0,o.jsxs)(u.Z,{alignItems:"center",sx:{py:6},children:[(0,o.jsx)(C.Z,{icon:"tabler:loader-2",fontSize:24,className:"spinner"}),(0,o.jsx)(m.Z,{sx:{mt:2},children:P("chooseCompany.loading")})]}):0===I.length?(0,o.jsx)(m.Z,{children:P("chooseCompany.empty")}):(0,o.jsxs)(s.Z,{children:[(0,o.jsx)(p.Z,{fullWidth:!0,value:_,onChange:e=>k(e.target.value),placeholder:String(P("chooseCompany.searchPlaceholder")),InputProps:{startAdornment:(0,o.jsx)(Z.Z,{position:"start",children:(0,o.jsx)(C.Z,{icon:"tabler:search"})})},sx:{mb:4}}),(0,o.jsx)(h.Z,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2},children:A.map(e=>{var t,r;return(0,o.jsxs)(v.ZP,{sx:{border:e=>"1px solid ".concat(e.palette.divider),mb:2,borderRadius:2},secondaryAction:(0,o.jsx)(f.Z,{variant:"contained",onClick:()=>T(e.id),children:P("chooseCompany.choose")}),children:[(0,o.jsx)(x.Z,{children:(0,o.jsx)(g.Z,{src:"".concat("https://api-doc.optivora-group.com").concat(e.logo)||0,children:e.name?e.name.charAt(0).toUpperCase():"?"})}),(0,o.jsx)(y.Z,{primary:(0,o.jsxs)(u.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,o.jsx)(m.Z,{variant:"h6",children:e.name||"Company ".concat(e.id)}),!1===e.is_active?(0,o.jsx)(j.Z,{size:"small",color:"warning",label:P("chooseCompany.inactive")}):null]}),secondary:(0,o.jsxs)(u.Z,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.code?(0,o.jsxs)(m.Z,{color:"text.secondary",children:[P("chooseCompany.code"),": ",e.code]}):null,e.phone?(0,o.jsxs)(m.Z,{color:"text.secondary",children:[P("chooseCompany.phone"),": ",e.phone]}):null,(null===(t=e.region_detail)||void 0===t?void 0:t.name)?(0,o.jsxs)(m.Z,{color:"text.secondary",children:[P("chooseCompany.region"),": ",e.region_detail.name]}):null,(null===(r=e.district_detail)||void 0===r?void 0:r.name)?(0,o.jsxs)(m.Z,{color:"text.secondary",children:[P("chooseCompany.district"),": ",e.district_detail.name]}):null,e.address?(0,o.jsx)(m.Z,{color:"text.secondary",children:e.address}):null]})})]},e.id)})})]})})]})})};N.getLayout=e=>e,N.authGuard=!0,N.acl={action:"manage",subject:"all"},t.default=N}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=20510)}),_N_E=e.O()}]);